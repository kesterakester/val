(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71893,(e,t,r)=>{"use strict";var s=e.r(36512).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;r.c=function(e){return s.H.useMemoCache(e)}},80142,(e,t,r)=>{"use strict";t.exports=e.r(71893)},28668,(e,t,r)=>{"use strict";function s({widthInt:e,heightInt:t,blurWidth:r,blurHeight:s,blurDataURL:i,objectFit:n}){let a=r?40*r:e,o=s?40*s:t,l=a&&o?`viewBox='0 0 ${a} ${o}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${l}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${l?"none":"contain"===n?"xMidYMid":"cover"===n?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${i}'/%3E%3C/svg%3E`}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImageBlurSvg",{enumerable:!0,get:function(){return s}})},70487,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={VALID_LOADERS:function(){return n},imageConfigDefault:function(){return a}};for(var i in s)Object.defineProperty(r,i,{enumerable:!0,get:s[i]});let n=["default","imgix","cloudinary","akamai","custom"],a={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,maximumResponseBody:5e7,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},5382,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImgProps",{enumerable:!0,get:function(){return u}}),e.r(16373);let s=e.r(96919),i=e.r(28668),n=e.r(70487),a=["-moz-initial","fill","none","scale-down",void 0];function o(e){return void 0!==e.default}function l(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function u({src:e,sizes:t,unoptimized:r=!1,priority:u=!1,preload:h=!1,loading:c,className:d,quality:f,width:p,height:m,fill:g=!1,style:y,overrideSrc:b,onLoad:v,onLoadingComplete:w,placeholder:x="empty",blurDataURL:_,fetchPriority:k,decoding:S="async",layout:T,objectFit:E,objectPosition:A,lazyBoundary:j,lazyRoot:P,...R},C){var O;let I,N,$,{imgConf:M,showAltText:D,blurComplete:U,defaultLoader:L}=C,B=M||n.imageConfigDefault;if("allSizes"in B)I=B;else{let e=[...B.deviceSizes,...B.imageSizes].sort((e,t)=>e-t),t=B.deviceSizes.sort((e,t)=>e-t),r=B.qualities?.sort((e,t)=>e-t);I={...B,allSizes:e,deviceSizes:t,qualities:r}}if(void 0===L)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let V=R.loader||L;delete R.loader,delete R.srcSet;let F="__next_img_default"in V;if(F){if("custom"===I.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=V;V=t=>{let{config:r,...s}=t;return e(s)}}if(T){"fill"===T&&(g=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[T];e&&(y={...y,...e});let r={responsive:"100vw",fill:"100vw"}[T];r&&!t&&(t=r)}let z="",W=l(p),q=l(m);if((O=e)&&"object"==typeof O&&(o(O)||void 0!==O.src)){let t=o(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(N=t.blurWidth,$=t.blurHeight,_=_||t.blurDataURL,z=t.src,!g)if(W||q){if(W&&!q){let e=W/t.width;q=Math.round(t.height*e)}else if(!W&&q){let e=q/t.height;W=Math.round(t.width*e)}}else W=t.width,q=t.height}let K=!u&&!h&&("lazy"===c||void 0===c);(!(e="string"==typeof e?e:z)||e.startsWith("data:")||e.startsWith("blob:"))&&(r=!0,K=!1),I.unoptimized&&(r=!0),F&&!I.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(r=!0);let G=l(f),H=Object.assign(g?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:E,objectPosition:A}:{},D?{}:{color:"transparent"},y),J=U||"empty"===x?null:"blur"===x?`url("data:image/svg+xml;charset=utf-8,${(0,i.getImageBlurSvg)({widthInt:W,heightInt:q,blurWidth:N,blurHeight:$,blurDataURL:_||"",objectFit:H.objectFit})}")`:`url("${x}")`,Y=a.includes(H.objectFit)?"fill"===H.objectFit?"100% 100%":"cover":H.objectFit,X=J?{backgroundSize:Y,backgroundPosition:H.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:J}:{},Z=function({config:e,src:t,unoptimized:r,width:i,quality:n,sizes:a,loader:o}){if(r){let e=(0,s.getDeploymentId)();if(t.startsWith("/")&&!t.startsWith("//")&&e){let r=t.includes("?")?"&":"?";t=`${t}${r}dpl=${e}`}return{src:t,srcSet:void 0,sizes:void 0}}let{widths:l,kind:u}=function({deviceSizes:e,allSizes:t},r,s){if(s){let r=/(^|\s)(1?\d?\d)vw/g,i=[];for(let e;e=r.exec(s);)i.push(parseInt(e[2]));if(i.length){let r=.01*Math.min(...i);return{widths:t.filter(t=>t>=e[0]*r),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof r?{widths:e,kind:"w"}:{widths:[...new Set([r,2*r].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,i,a),h=l.length-1;return{sizes:a||"w"!==u?a:"100vw",srcSet:l.map((r,s)=>`${o({config:e,src:t,quality:n,width:r})} ${"w"===u?r:s+1}${u}`).join(", "),src:o({config:e,src:t,quality:n,width:l[h]})}}({config:I,src:e,unoptimized:r,width:W,quality:G,sizes:t,loader:V}),Q=K?"lazy":c;return{props:{...R,loading:Q,fetchPriority:k,width:W,height:q,decoding:S,className:d,style:{...H,...X},sizes:Z.sizes,srcSet:Z.srcSet,src:b||Z.src},meta:{unoptimized:r,preload:h||u,placeholder:x,fill:g}}}},94740,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return o}});let s=e.r(36512),i="u"<typeof window,n=i?()=>{}:s.useLayoutEffect,a=i?()=>{}:s.useEffect;function o(e){let{headManager:t,reduceComponentsToState:r}=e;function o(){if(t&&t.mountedInstances){let e=s.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(r(e))}}return i&&(t?.mountedInstances?.add(e.children),o()),n(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),n(()=>(t&&(t._pendingUpdate=o),()=>{t&&(t._pendingUpdate=o)})),a(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},1423,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return m},defaultHead:function(){return c}};for(var i in s)Object.defineProperty(r,i,{enumerable:!0,get:s[i]});let n=e.r(11143),a=e.r(89946),o=e.r(59360),l=a._(e.r(36512)),u=n._(e.r(94740)),h=e.r(72989);function c(){return[(0,o.jsx)("meta",{charSet:"utf-8"},"charset"),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function d(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(16373);let f=["name","httpEquiv","charSet","itemProp"];function p(e){let t,r,s,i;return e.reduce(d,[]).reverse().concat(c().reverse()).filter((t=new Set,r=new Set,s=new Set,i={},e=>{let n=!0,a=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){a=!0;let r=e.key.slice(e.key.indexOf("$")+1);t.has(r)?n=!1:t.add(r)}switch(e.type){case"title":case"base":r.has(e.type)?n=!1:r.add(e.type);break;case"meta":for(let t=0,r=f.length;t<r;t++){let r=f[t];if(e.props.hasOwnProperty(r))if("charSet"===r)s.has(r)?n=!1:s.add(r);else{let t=e.props[r],s=i[r]||new Set;("name"!==r||!a)&&s.has(t)?n=!1:(s.add(t),i[r]=s)}}}return n})).reverse().map((e,t)=>{let r=e.key||t;return l.default.cloneElement(e,{key:r})})}let m=function({children:e}){let t=(0,l.useContext)(h.HeadManagerContext);return(0,o.jsx)(u.default,{reduceComponentsToState:p,headManager:t,children:e})};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},82556,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ImageConfigContext",{enumerable:!0,get:function(){return n}});let s=e.r(11143)._(e.r(36512)),i=e.r(70487),n=s.default.createContext(i.imageConfigDefault)},84108,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RouterContext",{enumerable:!0,get:function(){return s}});let s=e.r(11143)._(e.r(36512)).default.createContext(null)},95762,(e,t,r)=>{"use strict";function s(e,t){let r=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e,0):r}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"findClosestQuality",{enumerable:!0,get:function(){return s}})},57253,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let s=e.r(95762),i=e.r(96919);function n({config:e,src:t,width:r,quality:n}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let a=(0,s.findClosestQuality)(n,e),o=(0,i.getDeploymentId)();return`${e.path}?url=${encodeURIComponent(t)}&w=${r}&q=${a}${t.startsWith("/")&&o?`&dpl=${o}`:""}`}n.__next_img_default=!0;let a=n},79181,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return i}});let s=e.r(36512);function i(e,t){let r=(0,s.useRef)(null),i=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(r.current=n(e,s)),t&&(i.current=n(t,s))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},55930,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return w}});let s=e.r(11143),i=e.r(89946),n=e.r(59360),a=i._(e.r(36512)),o=s._(e.r(16289)),l=s._(e.r(1423)),u=e.r(5382),h=e.r(70487),c=e.r(82556);e.r(16373);let d=e.r(84108),f=s._(e.r(57253)),p=e.r(79181),m={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/val/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function g(e,t,r,s,i,n,a){let o=e?.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),r?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let s=!1,i=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>s,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{s=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}s?.current&&s.current(e)}}))}function y(e){return a.use?{fetchPriority:e}:{fetchpriority:e}}"u"<typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let b=(0,a.forwardRef)(({src:e,srcSet:t,sizes:r,height:s,width:i,decoding:o,className:l,style:u,fetchPriority:h,placeholder:c,loading:d,unoptimized:f,fill:m,onLoadRef:b,onLoadingCompleteRef:v,setBlurComplete:w,setShowAltText:x,sizesInput:_,onLoad:k,onError:S,...T},E)=>{let A=(0,a.useCallback)(e=>{e&&(S&&(e.src=e.src),e.complete&&g(e,c,b,v,w,f,_))},[e,c,b,v,w,S,f,_]),j=(0,p.useMergedRef)(E,A);return(0,n.jsx)("img",{...T,...y(h),loading:d,width:i,height:s,decoding:o,"data-nimg":m?"fill":"1",className:l,style:u,sizes:r,srcSet:t,src:e,ref:j,onLoad:e=>{g(e.currentTarget,c,b,v,w,f,_)},onError:e=>{x(!0),"empty"!==c&&w(!0),S&&S(e)}})});function v({isAppRouter:e,imgAttributes:t}){let r={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...y(t.fetchPriority)};return e&&o.default.preload?(o.default.preload(t.src,r),null):(0,n.jsx)(l.default,{children:(0,n.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...r},"__nimg-"+t.src+t.srcSet+t.sizes)})}let w=(0,a.forwardRef)((e,t)=>{let r=(0,a.useContext)(d.RouterContext),s=(0,a.useContext)(c.ImageConfigContext),i=(0,a.useMemo)(()=>{let e=m||s||h.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),r=e.deviceSizes.sort((e,t)=>e-t),i=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:r,qualities:i,localPatterns:"u"<typeof window?s?.localPatterns:e.localPatterns}},[s]),{onLoad:o,onLoadingComplete:l}=e,p=(0,a.useRef)(o);(0,a.useEffect)(()=>{p.current=o},[o]);let g=(0,a.useRef)(l);(0,a.useEffect)(()=>{g.current=l},[l]);let[y,w]=(0,a.useState)(!1),[x,_]=(0,a.useState)(!1),{props:k,meta:S}=(0,u.getImgProps)(e,{defaultLoader:f.default,imgConf:i,blurComplete:y,showAltText:x});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,{...k,unoptimized:S.unoptimized,placeholder:S.placeholder,fill:S.fill,onLoadRef:p,onLoadingCompleteRef:g,setBlurComplete:w,setShowAltText:_,sizesInput:e.sizes,ref:t}),S.preload?(0,n.jsx)(v,{isAppRouter:!r,imgAttributes:k}):null]})});("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},30424,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return h},getImageProps:function(){return u}};for(var i in s)Object.defineProperty(r,i,{enumerable:!0,get:s[i]});let n=e.r(11143),a=e.r(5382),o=e.r(55930),l=n._(e.r(57253));function u(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/val/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let h=o.Image},81753,(e,t,r)=>{t.exports=e.r(30424)},84565,(e,t,r)=>{var s={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],s=t[1];return(r+s)*3/4-s},t.toByteArray=function(e){var t,r,n=l(e),a=n[0],o=n[1],u=new i((a+o)*3/4-o),h=0,c=o>0?a-4:a;for(r=0;r<c;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;return 2===o&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,u[h++]=255&t),1===o&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t),u},t.fromByteArray=function(e){for(var t,s=e.length,i=s%3,n=[],a=0,o=s-i;a<o;a+=16383)n.push(function(e,t,s){for(var i,n=[],a=t;a<s;a+=3)i=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),n.push(r[i>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return n.join("")}(e,a,a+16383>o?o:a+16383));return 1===i?n.push(r[(t=e[s-1])>>2]+r[t<<4&63]+"=="):2===i&&n.push(r[(t=(e[s-2]<<8)+e[s-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),n.join("")};for(var r=[],s=[],i="u">typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=n.length;a<o;++a)r[a]=n[a],s[n.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var s=r===t?0:4-r%4;return[r,s]}s[45]=62,s[95]=63},72:function(e,t,r){"use strict";var s=r(675),i=r(783),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var s=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!o.isEncoding(i))throw TypeError("Unknown encoding: "+i);var n=0|f(s,i),l=a(n),u=l.write(s,i);return u!==n&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(P(e,SharedArrayBuffer)||e&&P(e.buffer,SharedArrayBuffer)))return function(e,t,r){var s;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(s=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),s}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var h=e.valueOf&&e.valueOf();if(null!=h&&h!==e)return o.from(h,t,r);var p=function(e){if(o.isBuffer(e)){var t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(p)return p;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),a(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),r=a(t),s=0;s<t;s+=1)r[s]=255&e[s];return r}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(u(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return h(e)},o.allocUnsafeSlow=function(e){return h(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(e).length;default:if(i)return s?-1:T(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var i,n,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var s=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>s)&&(r=s);for(var i="",n=t;n<r;++n)i+=R[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return b(this,t,r);case"ascii":return function(e,t,r){var s="";r=Math.min(e.length,r);for(var i=t;i<r;++i)s+=String.fromCharCode(127&e[i]);return s}(this,t,r);case"latin1":case"binary":return function(e,t,r){var s="";r=Math.min(e.length,r);for(var i=t;i<r;++i)s+=String.fromCharCode(e[i]);return s}(this,t,r);case"base64":return i=this,n=t,a=r,0===n&&a===i.length?s.fromByteArray(i):s.fromByteArray(i.slice(n,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var s=e.slice(t,r),i="",n=0;n<s.length;n+=2)i+=String.fromCharCode(s[n]+256*s[n+1]);return i}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,r){var s=e[t];e[t]=e[r],e[r]=s}function g(e,t,r,s,i){var n;if(0===e.length)return -1;if("string"==typeof r?(s=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(n=r*=1)!=n&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=o.from(t,s)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,s,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,s,i)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,s,i){var n,a=1,o=e.length,l=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var h=-1;for(n=r;n<o;n++)if(u(e,n)===u(t,-1===h?0:n-h)){if(-1===h&&(h=n),n-h+1===l)return h*a}else -1!==h&&(n-=n-h),h=-1}else for(r+l>o&&(r=o-l),n=r;n>=0;n--){for(var c=!0,d=0;d<l;d++)if(u(e,n+d)!==u(t,d)){c=!1;break}if(c)return n}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(P(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),P(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,s=t.length,i=0,n=Math.min(r,s);i<n;++i)if(e[i]!==t[i]){r=e[i],s=t[i];break}return r<s?-1:+(s<r)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,s=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var n=e[r];if(P(n,Uint8Array)&&(n=o.from(n)),!o.isBuffer(n))throw TypeError('"list" argument must be an Array of Buffers');n.copy(s,i),i+=n.length}return s},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,r,s,i){if(P(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===i&&(i=this.length),t<0||r>e.length||s<0||i>this.length)throw RangeError("out of range index");if(s>=i&&t>=r)return 0;if(s>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,s>>>=0,i>>>=0,this===e)return 0;for(var n=i-s,a=r-t,l=Math.min(n,a),u=this.slice(s,i),h=e.slice(t,r),c=0;c<l;++c)if(u[c]!==h[c]){n=u[c],a=h[c];break}return n<a?-1:+(a<n)},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)};function b(e,t,r){r=Math.min(e.length,r);for(var s=[],i=t;i<r;){var n,a,o,l,u=e[i],h=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c<=r)switch(c){case 1:u<128&&(h=u);break;case 2:(192&(n=e[i+1]))==128&&(l=(31&u)<<6|63&n)>127&&(h=l);break;case 3:n=e[i+1],a=e[i+2],(192&n)==128&&(192&a)==128&&(l=(15&u)<<12|(63&n)<<6|63&a)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:n=e[i+1],a=e[i+2],o=e[i+3],(192&n)==128&&(192&a)==128&&(192&o)==128&&(l=(15&u)<<18|(63&n)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(h=l)}null===h?(h=65533,c=1):h>65535&&(h-=65536,s.push(h>>>10&1023|55296),h=56320|1023&h),s.push(h),i+=c}var d=s,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=4096));return p}function v(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,s,i,n){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<n)throw RangeError('"value" argument is out of bounds');if(r+s>e.length)throw RangeError("Index out of range")}function x(e,t,r,s,i,n){if(r+s>e.length||r<0)throw RangeError("Index out of range")}function _(e,t,r,s,n){return t*=1,r>>>=0,n||x(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,s,23,4),r+4}function k(e,t,r,s,n){return t*=1,r>>>=0,n||x(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,s,52,8),r+8}o.prototype.write=function(e,t,r,s){if(void 0===t)s="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)s=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===s&&(s="utf8")):(s=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,n,a,o,l,u,h,c,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var f=!1;;)switch(s){case"hex":return function(e,t,r,s){r=Number(r)||0;var i=e.length-r;s?(s=Number(s))>i&&(s=i):s=i;var n=t.length;s>n/2&&(s=n/2);for(var a=0;a<s;++a){var o,l=parseInt(t.substr(2*a,2),16);if((o=l)!=o)break;e[r+a]=l}return a}(this,e,t,r);case"utf8":case"utf-8":return i=t,n=r,j(T(e,this.length-i),this,i,n);case"ascii":return a=t,o=r,j(E(e),this,a,o);case"latin1":case"binary":return function(e,t,r,s){return j(E(t),e,r,s)}(this,e,t,r);case"base64":return l=t,u=r,j(A(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=t,c=r,j(function(e,t){for(var r,s,i=[],n=0;n<e.length&&!((t-=2)<0);++n)s=(r=e.charCodeAt(n))>>8,i.push(r%256),i.push(s);return i}(e,this.length-h),this,h,c);default:if(f)throw TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var s=this.subarray(e,t);return Object.setPrototypeOf(s,o.prototype),s},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var s=this[e],i=1,n=0;++n<t&&(i*=256);)s+=this[e+n]*i;return s},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var s=this[e+--t],i=1;t>0&&(i*=256);)s+=this[e+--t]*i;return s},o.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var s=this[e],i=1,n=0;++n<t&&(i*=256);)s+=this[e+n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var s=t,i=1,n=this[e+--s];s>0&&(i*=256);)n+=this[e+--s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,s){if(e*=1,t>>>=0,r>>>=0,!s){var i=Math.pow(2,8*r)-1;w(this,e,t,r,i,0)}var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,s){if(e*=1,t>>>=0,r>>>=0,!s){var i=Math.pow(2,8*r)-1;w(this,e,t,r,i,0)}var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,s){if(e*=1,t>>>=0,!s){var i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}var n=0,a=1,o=0;for(this[t]=255&e;++n<r&&(a*=256);)e<0&&0===o&&0!==this[t+n-1]&&(o=1),this[t+n]=(e/a|0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,s){if(e*=1,t>>>=0,!s){var i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}var n=r-1,a=1,o=0;for(this[t+n]=255&e;--n>=0&&(a*=256);)e<0&&0===o&&0!==this[t+n+1]&&(o=1),this[t+n]=(e/a|0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return _(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return _(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,s){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(s<0)throw RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);var i=s-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,s);else if(this===e&&r<t&&t<s)for(var n=i-1;n>=0;--n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,s),t);return i},o.prototype.fill=function(e,t,r,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),void 0!==s&&"string"!=typeof s)throw TypeError("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw TypeError("Unknown encoding: "+s);if(1===e.length){var i,n=e.charCodeAt(0);("utf8"===s&&n<128||"latin1"===s)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=o.isBuffer(e)?e:o.from(e,s),l=a.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%l]}return this};var S=/[^+/0-9A-Za-z-_]/g;function T(e,t){t=t||1/0;for(var r,s=e.length,i=null,n=[],a=0;a<s;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319||a+1===s){(t-=3)>-1&&n.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&n.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return n}function E(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function A(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,s){for(var i=0;i<s&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var R=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var s=16*r,i=0;i<16;++i)t[s+i]=e[r]+e[i];return t}()},783:function(e,t){t.read=function(e,t,r,s,i){var n,a,o=8*i-s-1,l=(1<<o)-1,u=l>>1,h=-7,c=r?i-1:0,d=r?-1:1,f=e[t+c];for(c+=d,n=f&(1<<-h)-1,f>>=-h,h+=o;h>0;n=256*n+e[t+c],c+=d,h-=8);for(a=n&(1<<-h)-1,n>>=-h,h+=s;h>0;a=256*a+e[t+c],c+=d,h-=8);if(0===n)n=1-u;else{if(n===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,s),n-=u}return(f?-1:1)*a*Math.pow(2,n-s)},t.write=function(e,t,r,s,i,n){var a,o,l,u=8*n-i-1,h=(1<<u)-1,c=h>>1,d=5960464477539062e-23*(23===i),f=s?0:n-1,p=s?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?t+=d/l:t+=d*Math.pow(2,1-c),t*l>=2&&(a++,l/=2),a+c>=h?(o=0,a=h):a+c>=1?(o=(t*l-1)*Math.pow(2,i),a+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&o,f+=p,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;e[r+f]=255&a,f+=p,a/=256,u-=8);e[r+f-p]|=128*m}}},i={};function n(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},a=!0;try{s[e](r,r.exports,n),a=!1}finally{a&&delete i[e]}return r.exports}n.ab="/ROOT/Desktop/val/node_modules/next/dist/compiled/buffer/",t.exports=n(72)},59175,e=>{"use strict";let t,r,s,i,n;var a,o,l,u,h,c,d,f,p,m,g,y,b,v,w,x,_,k,S,T,E,A,j=e.i(59360),P=e.i(80142),R=e.i(36512);let C=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],O=new Set(C),I=(e,t,r)=>r>t?t:r<e?e:r,N={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},$={...N,transform:e=>I(0,1,e)},M={...N,default:1},D=e=>Math.round(1e5*e)/1e5,U=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,L=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,B=(e,t)=>r=>!!("string"==typeof r&&L.test(r)&&r.startsWith(e)||t&&null!=r&&Object.prototype.hasOwnProperty.call(r,t)),V=(e,t,r)=>s=>{if("string"!=typeof s)return s;let[i,n,a,o]=s.match(U);return{[e]:parseFloat(i),[t]:parseFloat(n),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},F={...N,transform:e=>Math.round(I(0,255,e))},z={test:B("rgb","red"),parse:V("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:s=1})=>"rgba("+F.transform(e)+", "+F.transform(t)+", "+F.transform(r)+", "+D($.transform(s))+")"},W={test:B("#"),parse:function(e){let t="",r="",s="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}},transform:z.transform},q=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),K=q("deg"),G=q("%"),H=q("px"),J=q("vh"),Y=q("vw"),X={...G,parse:e=>G.parse(e)/100,transform:e=>G.transform(100*e)},Z={test:B("hsl","hue"),parse:V("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:s=1})=>"hsla("+Math.round(e)+", "+G.transform(D(t))+", "+G.transform(D(r))+", "+D($.transform(s))+")"},Q={test:e=>z.test(e)||W.test(e)||Z.test(e),parse:e=>z.test(e)?z.parse(e):Z.test(e)?Z.parse(e):W.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?z.transform(e):Z.transform(e),getAnimatableNone:e=>{let t=Q.parse(e);return t.alpha=0,Q.transform(t)}},ee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,et="number",er="color",es=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ei(e){let t=e.toString(),r=[],s={color:[],number:[],var:[]},i=[],n=0,a=t.replace(es,e=>(Q.test(e)?(s.color.push(n),i.push(er),r.push(Q.parse(e))):e.startsWith("var(")?(s.var.push(n),i.push("var"),r.push(e)):(s.number.push(n),i.push(et),r.push(parseFloat(e))),++n,"${}")).split("${}");return{values:r,split:a,indexes:s,types:i}}function en(e){return ei(e).values}function ea(e){let{split:t,types:r}=ei(e),s=t.length;return e=>{let i="";for(let n=0;n<s;n++)if(i+=t[n],void 0!==e[n]){let t=r[n];t===et?i+=D(e[n]):t===er?i+=Q.transform(e[n]):i+=e[n]}return i}}let eo=e=>"number"==typeof e?0:Q.test(e)?Q.getAnimatableNone(e):e,el={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(U)?.length||0)+(e.match(ee)?.length||0)>0},parse:en,createTransformer:ea,getAnimatableNone:function(e){let t=en(e);return ea(e)(t.map(eo))}},eu=new Set(["brightness","contrast","saturate","opacity"]);function eh(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[s]=r.match(U)||[];if(!s)return e;let i=r.replace(s,""),n=+!!eu.has(t);return s!==r&&(n*=100),t+"("+n+i+")"}let ec=/\b([a-z-]*)\(.*?\)/gu,ed={...el,getAnimatableNone:e=>{let t=e.match(ec);return t?t.map(eh).join(" "):e}},ef={...N,transform:Math.round},ep={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,inset:H,insetBlock:H,insetBlockStart:H,insetBlockEnd:H,insetInline:H,insetInlineStart:H,insetInlineEnd:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,paddingBlock:H,paddingBlockStart:H,paddingBlockEnd:H,paddingInline:H,paddingInlineStart:H,paddingInlineEnd:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,marginBlock:H,marginBlockStart:H,marginBlockEnd:H,marginInline:H,marginInlineStart:H,marginInlineEnd:H,fontSize:H,backgroundPositionX:H,backgroundPositionY:H,rotate:K,rotateX:K,rotateY:K,rotateZ:K,scale:M,scaleX:M,scaleY:M,scaleZ:M,skew:K,skewX:K,skewY:K,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:$,originX:X,originY:X,originZ:H,zIndex:ef,fillOpacity:$,strokeOpacity:$,numOctaves:ef},em={...ep,color:Q,backgroundColor:Q,outlineColor:Q,fill:Q,stroke:Q,borderColor:Q,borderTopColor:Q,borderRightColor:Q,borderBottomColor:Q,borderLeftColor:Q,filter:ed,WebkitFilter:ed},eg=e=>em[e],ey=()=>({translate:0,scale:1,origin:0,originPoint:0}),eb=()=>({x:ey(),y:ey()}),ev=()=>({min:0,max:0}),ew=()=>({x:ev(),y:ev()}),ex=e=>!!(e&&e.getVelocity),e_=new Set(["width","height","top","left","right","bottom",...C]),ek=e=>t=>t.test(e),eS=[N,H,G,K,Y,J,{test:e=>"auto"===e,parse:e=>e}],eT=e=>eS.find(ek(e));var eE=e.i(84728);let eA=()=>{},ej=()=>{};eE.default;let eP=e=>t=>"string"==typeof t&&t.startsWith(e),eR=eP("--"),eC=eP("var(--"),eO=e=>!!eC(e)&&eI.test(e.split("/*")[0].trim()),eI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function eN(e){return"string"==typeof e&&e.split("/*")[0].includes("var(--")}let e$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,eM=e=>180*e/Math.PI,eD=e=>eL(eM(Math.atan2(e[1],e[0]))),eU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:eD,rotateZ:eD,skewX:e=>eM(Math.atan(e[1])),skewY:e=>eM(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},eL=e=>((e%=360)<0&&(e+=360),e),eB=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),eV=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),eF={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eB,scaleY:eV,scale:e=>(eB(e)+eV(e))/2,rotateX:e=>eL(eM(Math.atan2(e[6],e[5]))),rotateY:e=>eL(eM(Math.atan2(-e[2],e[0]))),rotateZ:eD,rotate:eD,skewX:e=>eM(Math.atan(e[4])),skewY:e=>eM(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ez(e){return+!!e.includes("scale")}function eW(e,t){let r,s;if(!e||"none"===e)return ez(t);let i=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(i)r=eF,s=i;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=eU,s=t}if(!s)return ez(t);let n=r[t],a=s[1].split(",").map(eq);return"function"==typeof n?n(a):a[n]}function eq(e){return parseFloat(e.trim())}let eK=e=>e===N||e===H,eG=new Set(["x","y","z"]),eH=C.filter(e=>!eG.has(e)),eJ={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>eW(t,"x"),y:(e,{transform:t})=>eW(t,"y")};eJ.translateX=eJ.x,eJ.translateY=eJ.y;let eY=e=>e,eX={},eZ=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function eQ(e,t){let r=!1,s=!0,i={delta:0,timestamp:0,isProcessing:!1},n=()=>r=!0,a=eZ.reduce((e,r)=>(e[r]=function(e,t){let r=new Set,s=new Set,i=!1,n=!1,a=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(t){a.has(t)&&(h.schedule(t),e()),l++,t(o)}let h={schedule:(e,t=!1,n=!1)=>{let o=n&&i?r:s;return t&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{s.delete(e),a.delete(e)},process:e=>{if(o=e,i){n=!0;return}i=!0,[r,s]=[s,r],r.forEach(u),t,l=0,r.clear(),i=!1,n&&(n=!1,h.process(e))}};return h}(n,t?r:void 0),e),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:h,update:c,preRender:d,render:f,postRender:p}=a,m=()=>{let n=eX.useManualTiming?i.timestamp:performance.now();r=!1,eX.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(n-i.timestamp,40),1)),i.timestamp=n,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),h.process(i),c.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,r&&t&&(s=!1,e(m))};return{schedule:eZ.reduce((t,n)=>{let o=a[n];return t[n]=(t,n=!1,a=!1)=>(!r&&(r=!0,s=!0,i.isProcessing||e(m)),o.schedule(t,n,a)),t},{}),cancel:e=>{for(let t=0;t<eZ.length;t++)a[eZ[t]].cancel(e)},state:i,steps:a}}let{schedule:e0,cancel:e1,state:e2,steps:e5}=eQ("u">typeof requestAnimationFrame?requestAnimationFrame:eY,!0),e3=new Set,e6=!1,e4=!1,e8=!1;function e9(){if(e4){let e=Array.from(e3).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t,s=(t=[],eH.forEach(r=>{let s=e.getValue(r);void 0!==s&&(t.push([r,s.get()]),s.set(+!!r.startsWith("scale")))}),t);s.length&&(r.set(e,s),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{e.getValue(t)?.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}e4=!1,e6=!1,e3.forEach(e=>e.complete(e8)),e3.clear()}function e7(){e3.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(e4=!0)})}class te{constructor(e,t,r,s,i,n=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=i,this.isAsync=n}scheduleResolve(){this.state="scheduled",this.isAsync?(e3.add(this),e6||(e6=!0,e0.read(e7),e0.resolveKeyframes(e9))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(null===e[0]){let i=s?.get(),n=e[e.length-1];if(void 0!==i)e[0]=i;else if(r&&t){let s=r.readValue(t,n);null!=s&&(e[0]=s)}void 0===e[0]&&(e[0]=n),s&&void 0===i&&s.set(e[0])}for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),e3.delete(this)}cancel(){"scheduled"===this.state&&(e3.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function tt(e,t){let r=eg(e);return r!==ed&&(r=el),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let tr=new Set(["auto","none","0"]);class ts extends te{constructor(e,t,r,s,i){super(e,t,r,s,i,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let s=e[r];if("string"==typeof s&&eO(s=s.trim())){let i=function e(t,r,s=1){ej(s<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[i,n]=function(e){let t=e$.exec(e);if(!t)return[,];let[,r,s,i]=t;return[`--${r??s}`,i]}(t);if(!i)return;let a=window.getComputedStyle(r).getPropertyValue(i);if(a){let e=a.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return eO(n)?e(n,r,s+1):n}(s,t.current);void 0!==i&&(e[r]=i),r===e.length-1&&(this.finalKeyframe=s)}}if(this.resolveNoneKeyframes(),!e_.has(r)||2!==e.length)return;let[s,i]=e,n=eT(s),a=eT(i);if(eN(s)!==eN(i)&&eJ[r]){this.needsMeasurement=!0;return}if(n!==a)if(eK(n)&&eK(a))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else eJ[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++)(null===e[t]||function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)}(e[t]))&&r.push(t);r.length&&function(e,t,r){let s,i=0;for(;i<e.length&&!s;){let t=e[i];"string"==typeof t&&!tr.has(t)&&ei(t).values.length&&(s=e[i]),i++}if(s&&r)for(let i of t)e[i]=tt(r,s)}(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=eJ[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let s=t[t.length-1];void 0!==s&&e.getValue(r,s).jump(s,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;let s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);let i=r.length-1,n=r[i];r[i]=eJ[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==n&&void 0===this.finalKeyframe&&(this.finalKeyframe=n),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,r])=>{e.getValue(t).set(r)}),this.resolveNoneKeyframes()}}function ti(e,t){-1===e.indexOf(t)&&e.push(t)}function tn(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class ta{constructor(){this.subscriptions=[]}add(e){return ti(this.subscriptions,e),()=>tn(this.subscriptions,e)}notify(e,t,r){let s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](e,t,r);else for(let i=0;i<s;i++){let s=this.subscriptions[i];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let{schedule:to}=eQ(queueMicrotask,!1);function tl(){t=void 0}let tu={now:()=>(void 0===t&&tu.set(e2.isProcessing||eX.useManualTiming?e2.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(tl)}};class th{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=tu.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=tu.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ta);let r=this.events[e].add(t);return"change"===e?()=>{r(),e0.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return n&&n.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=tu.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),r?1e3/r*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tc(e,t){return new th(e,t)}let td=[...eS,Q,el],tf={current:null},tp={current:!1},tm="u">typeof window,tg=new WeakMap;function ty(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function tb(e){return"string"==typeof e||Array.isArray(e)}let tv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tw=["initial",...tv];function tx(e){return ty(e.animate)||tw.some(t=>tb(e[t]))}function t_(e){return!!(tx(e)||e.variants)}function tk(e){let t=[{},{}];return e?.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function tS(e,t,r,s){if("function"==typeof t){let[i,n]=tk(s);t=t(void 0!==r?r:e.custom,i,n)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[i,n]=tk(s);t=t(void 0!==r?r:e.custom,i,n)}return t}let tT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],tE={};class tA{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:n},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=te,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=tu.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,e0.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=n;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=tx(t),this.isVariantNode=t_(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in h){const t=h[e];void 0!==o[e]&&ex(t)&&t.set(o[e])}}mount(e){this.current=e,tg.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(tp.current||function(){if(tp.current=!0,tm)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>tf.current=e.matches;e.addEventListener("change",t),t()}else tf.current=!1}(),this.shouldReduceMotion=tf.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),e1(this.notifyUpdate),e1(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let s=O.has(e);s&&this.onBindTransform&&this.onBindTransform();let i=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&e0.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});"u">typeof window&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in tE){let t=tE[e];if(!t)continue;let{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ew()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<tT.length;t++){let r=tT[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=function(e,t,r){for(let s in t){let i=t[s],n=r[s];if(ex(i))e.addValue(s,i);else if(ex(n))e.addValue(s,tc(i,{owner:e}));else if(n!==i)if(e.hasValue(s)){let t=e.getValue(s);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{let t=e.getStaticValue(s);e.addValue(s,tc(void 0!==t?t:i,{owner:e}))}}for(let s in r)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=tc(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=r){let s,i;if("string"==typeof r&&(s=r,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s)||(i=r,/^0[^.\s]+$/u.test(i))))r=parseFloat(r);else{let s;s=r,!td.find(ek(s))&&el.test(t)&&(r=tt(e,t))}this.setBaseTarget(e,ex(r)?r.get():r)}return ex(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:r}=this.props;if("string"==typeof r||"object"==typeof r){let s=tS(this.props,r,this.presenceContext?.custom);s&&(t=s[e])}if(r&&void 0!==t)return t;let s=this.getBaseTargetFromProps(this.props,e);return void 0===s||ex(s)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new ta),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){to.render(this.render)}}class tj extends tA{constructor(){super(...arguments),this.KeyframeResolver=ts}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){let r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;ex(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function tP(e){return e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}let tR=(e,t)=>t&&"number"==typeof e?t.transform(e):e,tC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tO=C.length;function tI(e,t,r){let{style:s,vars:i,transformOrigin:n}=e,a=!1,o=!1;for(let e in t){let r=t[e];if(O.has(e)){a=!0;continue}if(eR(e)){i[e]=r;continue}{let t=tR(r,ep[e]);e.startsWith("origin")?(o=!0,n[e]=t):s[e]=t}}if(!t.transform&&(a||r?s.transform=function(e,t,r){let s="",i=!0;for(let n=0;n<tO;n++){let a=C[n],o=e[a];if(void 0===o)continue;let l=!0;if("number"==typeof o)l=o===+!!a.startsWith("scale");else{let e=parseFloat(o);l=a.startsWith("scale")?1===e:0===e}if(!l||r){let e=tR(o,ep[a]);if(!l){i=!1;let t=tC[a]||a;s+=`${t}(${e}) `}r&&(t[a]=e)}}return s=s.trim(),r?s=r(t,i?"":s):i&&(s="none"),s}(t,e.transform,r):s.transform&&(s.transform="none")),o){let{originX:e="50%",originY:t="50%",originZ:r=0}=n;s.transformOrigin=`${e} ${t} ${r}`}}let tN={offset:"stroke-dashoffset",array:"stroke-dasharray"},t$={offset:"strokeDashoffset",array:"strokeDasharray"},tM=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function tD(e,{attrX:t,attrY:r,attrScale:s,pathLength:i,pathSpacing:n=1,pathOffset:a=0,...o},l,u,h){if(tI(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:c,style:d}=e;for(let e of(c.transform&&(d.transform=c.transform,delete c.transform),(d.transform||c.transformOrigin)&&(d.transformOrigin=c.transformOrigin??"50% 50%",delete c.transformOrigin),d.transform&&(d.transformBox=h?.transformBox??"fill-box",delete c.transformBox),tM))void 0!==c[e]&&(d[e]=c[e],delete c[e]);void 0!==t&&(c.x=t),void 0!==r&&(c.y=r),void 0!==s&&(c.scale=s),void 0!==i&&function(e,t,r=1,s=0,i=!0){e.pathLength=1;let n=i?tN:t$;e[n.offset]=`${-s}`,e[n.array]=`${t} ${r}`}(c,i,n,a,!1)}let tU=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),tL=e=>"string"==typeof e&&"svg"===e.toLowerCase();function tB(e,{style:t,vars:r},s,i){let n,a=e.style;for(n in t)a[n]=t[n];for(n in i?.applyProjectionStyles(a,s),r)a.setProperty(n,r[n])}function tV(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let tF={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!H.test(e))return e;else e=parseFloat(e);let r=tV(e,t.target.x),s=tV(e,t.target.y);return`${r}% ${s}%`}},tz=(e,t,r)=>e+(t-e)*r,tW={borderRadius:{...tF,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tF,borderTopRightRadius:tF,borderBottomLeftRadius:tF,borderBottomRightRadius:tF,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let s=el.parse(e);if(s.length>5)return e;let i=el.createTransformer(e),n=+("number"!=typeof s[0]),a=r.x.scale*t.x,o=r.y.scale*t.y;s[0+n]/=a,s[1+n]/=o;let l=tz(a,o,.5);return"number"==typeof s[2+n]&&(s[2+n]/=l),"number"==typeof s[3+n]&&(s[3+n]/=l),i(s)}}};function tq(e,{layout:t,layoutId:r}){return O.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!tW[e]||"opacity"===e)}function tK(e,t,r){let s=e.style,i=t?.style,n={};if(!s)return n;for(let t in s)(ex(s[t])||i&&ex(i[t])||tq(t,e)||r?.getValue(t)?.liveStyle!==void 0)&&(n[t]=s[t]);return n}function tG(e,t,r){let s=tK(e,t,r);for(let r in e)(ex(e[r])||ex(t[r]))&&(s[-1!==C.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return s}class tH extends tj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ew}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(O.has(t)){let e=eg(t);return e&&e.default||0}return t=tU.has(t)?t:tP(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return tG(e,t,r)}build(e,t,r){tD(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){for(let r in tB(e,t,void 0,s),t.attrs)e.setAttribute(tU.has(r)?r:tP(r),t.attrs[r])}mount(e){this.isSVGTag=tL(e.tagName),super.mount(e)}}function tJ({top:e,left:t,right:r,bottom:s}){return{x:{min:t,max:r},y:{min:e,max:s}}}function tY(e){return void 0===e||1===e}function tX({scale:e,scaleX:t,scaleY:r}){return!tY(e)||!tY(t)||!tY(r)}function tZ(e){return tX(e)||tQ(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function tQ(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function t0(e,t,r,s,i){return void 0!==i&&(e=s+i*(e-s)),s+r*(e-s)+t}function t1(e,t=0,r=1,s,i){e.min=t0(e.min,t,r,s,i),e.max=t0(e.max,t,r,s,i)}function t2(e,{x:t,y:r}){t1(e.x,t.translate,t.scale,t.originPoint),t1(e.y,r.translate,r.scale,r.originPoint)}function t5(e,t){e.min=e.min+t,e.max=e.max+t}function t3(e,t,r,s,i=.5){let n=tz(e.min,e.max,i);t1(e,t,r,n,s)}function t6(e,t){t3(e.x,t.x,t.scaleX,t.scale,t.originX),t3(e.y,t.y,t.scaleY,t.scale,t.originY)}function t4(e,t){return tJ(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}class t8 extends tj{constructor(){super(...arguments),this.type="html",this.renderInstance=tB}readValueFromInstance(e,t){if(O.has(t))return this.projection?.isProjecting?ez(t):((e,t)=>{let{transform:r="none"}=getComputedStyle(e);return eW(r,t)})(e,t);{let r=window.getComputedStyle(e),s=(eR(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof s?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return t4(e,t)}build(e,t,r){tI(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return tK(e,t,r)}}let t9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function t7(e){if("string"!=typeof e||e.includes("-"));else if(t9.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let re=(0,R.createContext)({}),rt=(0,R.createContext)({strict:!1}),rr=(0,R.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),rs=(0,R.createContext)({});function ri(e){return Array.isArray(e)?e.join(" "):e}let rn=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ra(e,t,r){for(let s in t)ex(t[s])||tq(s,r)||(e[s]=t[s])}let ro=()=>({...rn(),attrs:{}}),rl=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ru(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||rl.has(e)}let rh=e=>!ru(e);try{a=(()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default,"function"==typeof a&&(rh=e=>e.startsWith("on")?!ru(e):a(e))}catch{}function rc(e){return ex(e)?e.get():e}let rd=(0,R.createContext)(null);function rf(e){let t=(0,R.useRef)(null);return null===t.current&&(t.current=e()),t.current}let rp=e=>(t,r)=>{let s=(0,R.useContext)(rs),i=(0,R.useContext)(rd),n=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t},r,s,i){return{latestValues:function(e,t,r,s){let i={},n=s(e,{});for(let e in n)i[e]=rc(n[e]);let{initial:a,animate:o}=e,l=tx(e),u=t_(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let h=!!r&&!1===r.initial,c=(h=h||!1===a)?o:a;if(c&&"boolean"!=typeof c&&!ty(c)){let t=Array.isArray(c)?c:[c];for(let r=0;r<t.length;r++){let s=tS(e,t[r]);if(s){let{transitionEnd:e,transition:t,...r}=s;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=h?t.length-1:0;t=t[e]}null!==t&&(i[e]=t)}for(let t in e)i[t]=e[t]}}}return i}(r,s,i,e),renderState:t()}})(e,t,s,i);return r?n():rf(n)},rm=rp({scrapeMotionValuesFromProps:tK,createRenderState:rn}),rg=rp({scrapeMotionValuesFromProps:tG,createRenderState:ro}),ry="u">typeof window,rb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rv=!1;function rw(){return!function(){if(rv)return;let e={};for(let t in rb)e[t]={isEnabled:e=>rb[t].some(t=>!!e[t])};tE=e,rv=!0}(),tE}let rx=Symbol.for("motionComponentSymbol"),r_="data-"+tP("framerAppearId"),rk=(0,R.createContext)({});function rS(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let rT=ry?R.useLayoutEffect:R.useEffect;function rE(e,{forwardMotionProps:t=!1,type:r}={},s,i){s&&function(e){let t=rw();for(let r in e)t[r]={...t[r],...e[r]};tE=t}(s);let n=r?"svg"===r:t7(e),a=n?rg:rm;function o(r,s){var o;let l,u,h,c={...(0,R.useContext)(rr),...r,layoutId:function({layoutId:e}){let t=(0,R.useContext)(re).id;return t&&void 0!==e?t+"-"+e:e}(r)},{isStatic:d}=c,f=function(e){let{initial:t,animate:r}=function(e,t){if(tx(e)){let{initial:t,animate:r}=e;return{initial:!1===t||tb(t)?t:void 0,animate:tb(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,R.useContext)(rs));return(0,R.useMemo)(()=>({initial:t,animate:r}),[ri(t),ri(r)])}(r),p=a(r,d);if(!d&&ry){(0,R.useContext)(rt).strict;let t=function(e){let{drag:t,layout:r}=rw();if(!t&&!r)return{};let s={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}(c);l=t.MeasureLayout,f.visualElement=function(e,t,r,s,i,n){let{visualElement:a}=(0,R.useContext)(rs),o=(0,R.useContext)(rt),l=(0,R.useContext)(rd),u=(0,R.useContext)(rr).reducedMotion,h=(0,R.useRef)(null),c=(0,R.useRef)(!1);s=s||o.renderer,!h.current&&s&&(h.current=s(e,{visualState:t,parent:a,props:r,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u,isSVG:n}),c.current&&h.current&&(h.current.manuallyAnimateOnMount=!0));let d=h.current,f=(0,R.useContext)(rk);d&&!d.projection&&i&&("html"===d.type||"svg"===d.type)&&function(e,t,r,s){let{layoutId:i,layout:n,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:i,layout:n,alwaysMeasureLayout:!!a||o&&rS(o),visualElement:e,animationType:"string"==typeof n?n:"both",initialPromotionConfig:s,crossfade:h,layoutScroll:l,layoutRoot:u})}(h.current,r,i,f);let p=(0,R.useRef)(!1);(0,R.useInsertionEffect)(()=>{d&&p.current&&d.update(r,l)});let m=r[r_],g=(0,R.useRef)(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return rT(()=>{c.current=!0,d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),(0,R.useEffect)(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),g.current=!1),d.enteringChildren=void 0)}),d}(e,p,c,i,t.ProjectionNode,n)}return(0,j.jsxs)(rs.Provider,{value:f,children:[l&&f.visualElement?(0,j.jsx)(l,{visualElement:f.visualElement,...c}):null,function(e,t,r,{latestValues:s},i,n=!1,a){let o=(a??t7(e)?function(e,t,r,s){let i=(0,R.useMemo)(()=>{let r=ro();return tD(r,t,tL(s),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};ra(t,e.style,e),i.style={...t,...i.style}}return i}:function(e,t){let r,s,i={},n=(r=e.style||{},ra(s={},r,e),Object.assign(s,function({transformTemplate:e},t){return(0,R.useMemo)(()=>{let r=rn();return tI(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),s);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=n,i})(t,s,i,e),l=function(e,t,r){let s={};for(let i in e)("values"!==i||"object"!=typeof e.values)&&(rh(i)||!0===r&&ru(i)||!t&&!ru(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}(t,"string"==typeof e,n),u=e!==R.Fragment?{...l,...o,ref:r}:{},{children:h}=t,c=(0,R.useMemo)(()=>ex(h)?h.get():h,[h]);return(0,R.createElement)(e,{...u,children:c})}(e,r,(o=f.visualElement,u=(0,R.useRef)(s),(0,R.useInsertionEffect)(()=>{u.current=s}),h=(0,R.useRef)(null),(0,R.useCallback)(e=>{e&&p.onMount?.(e),o&&(e?o.mount(e):o.unmount());let t=u.current;if("function"==typeof t)if(e){let r=t(e);"function"==typeof r&&(h.current=r)}else h.current?(h.current(),h.current=null):t(e);else t&&(t.current=e)},[o])),p,d,t,n)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;let l=(0,R.forwardRef)(o);return l[rx]=e,l}class rA{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rj(e,t,r){let s=e.getProps();return tS(s,t,void 0!==r?r:s.custom,e)}function rP(e,t){return e?.[t]??e?.default??e}let rR=e=>Array.isArray(e);function rC(e,t){let r=e.getValue("willChange");if(ex(r)&&r.add)return r.add(t);if(!r&&eX.WillChange){let r=new eX.WillChange("auto");e.addValue("willChange",r),r.add(t)}}let rO=e=>1e3*e,rI=(e,t)=>r=>t(e(r)),rN=(...e)=>e.reduce(rI),r$={layout:0,mainThread:0,waapi:0};function rM(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rD(e,t){return r=>r>0?t:e}let rU=(e,t,r)=>{let s=e*e,i=r*(t*t-s)+s;return i<0?0:Math.sqrt(i)},rL=[W,z,Z];function rB(e){let t=rL.find(t=>t.test(e));if(eA(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let r=t.parse(e);return t===Z&&(r=function({hue:e,saturation:t,lightness:r,alpha:s}){e/=360,r/=100;let i=0,n=0,a=0;if(t/=100){let s=r<.5?r*(1+t):r+t-r*t,o=2*r-s;i=rM(o,s,e+1/3),n=rM(o,s,e),a=rM(o,s,e-1/3)}else i=n=a=r;return{red:Math.round(255*i),green:Math.round(255*n),blue:Math.round(255*a),alpha:s}}(r)),r}let rV=(e,t)=>{let r=rB(e),s=rB(t);if(!r||!s)return rD(e,t);let i={...r};return e=>(i.red=rU(r.red,s.red,e),i.green=rU(r.green,s.green,e),i.blue=rU(r.blue,s.blue,e),i.alpha=tz(r.alpha,s.alpha,e),z.transform(i))},rF=new Set(["none","hidden"]);function rz(e,t){return r=>tz(e,t,r)}function rW(e){return"number"==typeof e?rz:"string"==typeof e?eO(e)?rD:Q.test(e)?rV:rG:Array.isArray(e)?rq:"object"==typeof e?Q.test(e)?rV:rK:rD}function rq(e,t){let r=[...e],s=r.length,i=e.map((e,r)=>rW(e)(e,t[r]));return e=>{for(let t=0;t<s;t++)r[t]=i[t](e);return r}}function rK(e,t){let r={...e,...t},s={};for(let i in r)void 0!==e[i]&&void 0!==t[i]&&(s[i]=rW(e[i])(e[i],t[i]));return e=>{for(let t in s)r[t]=s[t](e);return r}}let rG=(e,t)=>{let r=el.createTransformer(t),s=ei(e),i=ei(t);if(!(s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length))return eA(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),rD(e,t);if(rF.has(e)&&!i.values.length||rF.has(t)&&!s.values.length)return rF.has(e)?r=>r<=0?e:t:r=>r>=1?t:e;return rN(rq(function(e,t){let r=[],s={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){let n=t.types[i],a=e.indexes[n][s[n]],o=e.values[a]??0;r[i]=o,s[n]++}return r}(s,i),i.values),r)};function rH(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?tz(e,t,r):rW(e)(e,t)}let rJ=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>e0.update(t,e),stop:()=>e1(t),now:()=>e2.isProcessing?e2.timestamp:tu.now()}},rY=(e,t,r=10)=>{let s="",i=Math.max(Math.round(t/r),2);for(let t=0;t<i;t++)s+=Math.round(1e4*e(t/(i-1)))/1e4+", ";return`linear(${s.substring(0,s.length-2)})`};function rX(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}function rZ(e,t,r){var s,i;let n=Math.max(t-5,0);return s=r-e(n),(i=t-n)?1e3/i*s:0}let rQ=.01,r0=2,r1=.005,r2=.5;function r5(e,t){return e*Math.sqrt(1-t*t)}let r3=["duration","bounce"],r6=["stiffness","damping","mass"];function r4(e,t){return t.some(t=>void 0!==e[t])}function r8(e=.3,t=.3){let r,s="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:i,restDelta:n}=s,a=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:a},{stiffness:u,damping:h,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!r4(e,r6)&&r4(e,r3))if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),s=r*r,i=2*I(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:1,stiffness:s,damping:i}}else{let r=function({duration:e=800,bounce:t=.3,velocity:r=0,mass:s=1}){let i,n;eA(e<=rO(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-t;a=I(.05,1,a),e=I(.01,10,e/1e3),a<1?(i=t=>{let s=t*a,i=s*e;return .001-(s-r)/r5(t,a)*Math.exp(-i)},n=t=>{let s=t*a*e,n=Math.pow(a,2)*Math.pow(t,2)*e,o=Math.exp(-s),l=r5(Math.pow(t,2),a);return(s*r+r-n)*o*(-i(t)+.001>0?-1:1)/l}):(i=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),n=t=>e*e*(r-t)*Math.exp(-t*e));let o=function(e,t,r){let s=r;for(let r=1;r<12;r++)s-=e(s)/t(s);return s}(i,n,5/e);if(e=rO(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(o,2)*s;return{stiffness:t,damping:2*a*Math.sqrt(s*t),duration:e}}}(e);(t={...t,...r,mass:1}).isResolvedFromDuration=!0}return t}({...s,velocity:-((s.velocity||0)/1e3)}),m=f||0,g=h/(2*Math.sqrt(u*c)),y=o-a,b=Math.sqrt(u/c)/1e3,v=5>Math.abs(y);if(i||(i=v?rQ:r0),n||(n=v?r1:r2),g<1){let e=r5(b,g);r=t=>o-Math.exp(-g*b*t)*((m+g*b*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===g)r=e=>o-Math.exp(-b*e)*(y+(m+b*y)*e);else{let e=b*Math.sqrt(g*g-1);r=t=>{let r=Math.exp(-g*b*t),s=Math.min(e*t,300);return o-r*((m+g*b*y)*Math.sinh(s)+e*y*Math.cosh(s))/e}}let w={calculatedDuration:p&&d||null,next:e=>{let t=r(e);if(p)l.done=e>=d;else{let s=0===e?m:0;g<1&&(s=0===e?rO(m):rZ(r,e,t));let a=Math.abs(o-t)<=n;l.done=Math.abs(s)<=i&&a}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(rX(w),2e4),t=rY(t=>w.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return w}function r9({keyframes:e,velocity:t=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:n=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:h}){let c,d,f=e[0],p={done:!1,value:f},m=r*t,g=f+m,y=void 0===a?g:a(g);y!==g&&(m=y-f);let b=e=>-m*Math.exp(-e/s),v=e=>y+b(e),w=e=>{let t=b(e),r=v(e);p.done=Math.abs(t)<=u,p.value=p.done?y:r},x=e=>{let t;if(t=p.value,void 0!==o&&t<o||void 0!==l&&t>l){var r;c=e,d=r8({keyframes:[p.value,(r=p.value,void 0===o?l:void 0===l||Math.abs(o-r)<Math.abs(l-r)?o:l)],velocity:rZ(v,e,p.value),damping:i,stiffness:n,restDelta:u,restSpeed:h})}};return x(0),{calculatedDuration:null,next:e=>{let t=!1;return(d||void 0!==c||(t=!0,w(e),x(e)),void 0!==c&&e>=c)?d.next(e-c):(t||w(e),p)}}}r8.applyToOptions=e=>{let t=function(e,t=100,r){let s=r({...e,keyframes:[0,t]}),i=Math.min(rX(s),2e4);return{type:"keyframes",ease:e=>s.next(i*e).value/t,duration:i/1e3}}(e,100,r8);return e.ease=t.ease,e.duration=rO(t.duration),e.type="keyframes",e};let r7=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function se(e,t,r,s){return e===t&&r===s?eY:i=>0===i||1===i?i:r7(function(e,t,r,s,i){let n,a,o=0;do(n=r7(a=t+(r-t)/2,s,i)-e)>0?r=a:t=a;while(Math.abs(n)>1e-7&&++o<12)return a}(i,0,1,e,r),t,s)}let st=se(.42,0,1,1),sr=se(0,0,.58,1),ss=se(.42,0,.58,1),si=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,sn=e=>t=>1-e(1-t),sa=se(.33,1.53,.69,.99),so=sn(sa),sl=si(so),su=e=>(e*=2)<1?.5*so(e):.5*(2-Math.pow(2,-10*(e-1))),sh=e=>1-Math.sin(Math.acos(e)),sc=sn(sh),sd=si(sh),sf=e=>Array.isArray(e)&&"number"==typeof e[0],sp={linear:eY,easeIn:st,easeInOut:ss,easeOut:sr,circIn:sh,circInOut:sd,circOut:sc,backIn:so,backInOut:sl,backOut:sa,anticipate:su},sm=e=>{if(sf(e)){ej(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,r,s,i]=e;return se(t,r,s,i)}return"string"==typeof e?(ej(void 0!==sp[e],`Invalid easing type '${e}'`,"invalid-easing-type"),sp[e]):e},sg=(e,t,r)=>{let s=t-e;return 0===s?1:(r-e)/s};function sy({duration:e=300,keyframes:t,times:r,ease:s="easeInOut"}){var i;let n,a=Array.isArray(s)&&"number"!=typeof s[0]?s.map(sm):sm(s),o={done:!1,value:t[0]},l=function(e,t,{clamp:r=!0,ease:s,mixer:i}={}){let n=e.length;if(ej(n===t.length,"Both input and output ranges must be the same length","range-length"),1===n)return()=>t[0];if(2===n&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[n-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,r){let s=[],i=r||eX.mix||rH,n=e.length-1;for(let r=0;r<n;r++){let n=i(e[r],e[r+1]);t&&(n=rN(Array.isArray(t)?t[r]||eY:t,n)),s.push(n)}return s}(t,s,i),l=o.length,u=r=>{if(a&&r<e[0])return t[0];let s=0;if(l>1)for(;s<e.length-2&&!(r<e[s+1]);s++);let i=sg(e[s],e[s+1],r);return o[s](i)};return r?t=>u(I(e[0],e[n-1],t)):u}((i=r&&r.length===t.length?r:(!function(e,t){let r=e[e.length-1];for(let s=1;s<=t;s++){let i=sg(0,t,s);e.push(tz(r,1,i))}}(n=[0],t.length-1),n),i.map(t=>t*e)),t,{ease:Array.isArray(a)?a:t.map(()=>a||ss).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(o.value=l(t),o.done=t>=e,o)}}let sb=e=>null!==e;function sv(e,{repeat:t,repeatType:r="loop"},s,i=1){let n=e.filter(sb),a=i<0||t&&"loop"!==r&&t%2==1?0:n.length-1;return a&&void 0!==s?s:n[a]}let sw={decay:r9,inertia:r9,tween:sy,keyframes:sy,spring:r8};function sx(e){"string"==typeof e.type&&(e.type=sw[e.type])}class s_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}let sk=e=>e/100;class sS extends s_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==tu.now()&&this.tick(tu.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},r$.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){let{options:e}=this;sx(e);let{type:t=sy,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:n=0}=e,{keyframes:a}=e,o=t||sy;o!==sy&&"number"!=typeof a[0]&&(this.mixKeyframes=rN(sk,rH(a[0],a[1])),a=[0,100]);let l=o({...e,keyframes:a});"mirror"===i&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-n})),null===l.calculatedDuration&&(l.calculatedDuration=rX(l));let{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){let{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:n,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return r.next(0);let{delay:l=0,keyframes:u,repeat:h,repeatType:c,repeatDelay:d,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=s);let b=this.currentTime,v=r;if(h){let e=Math.min(this.currentTime,s)/a,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,h+1))%2&&("reverse"===c?(r=1-r,d&&(r-=d/a)):"mirror"===c&&(v=n)),b=I(0,1,r)*a}let w=y?{done:!1,value:u[0]}:v.next(b);i&&(w.value=i(w.value));let{done:x}=w;y||null===o||(x=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);let _=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return _&&f!==r9&&(w.value=sv(u,this.options,m,this.speed)),p&&p(w.value),_&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return this.currentTime/1e3}set time(e){e=rO(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tu.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:e=rJ,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();let r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tu.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,r$.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function sT(e){let t;return()=>(void 0===t&&(t=e()),t)}let sE=sT(()=>void 0!==window.ScrollTimeline),sA={},sj=(s=sT(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>sA.linearEasing??s()),sP=([e,t,r,s])=>`cubic-bezier(${e}, ${t}, ${r}, ${s})`,sR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sP([0,.65,.55,1]),circOut:sP([.55,0,1,.45]),backIn:sP([.31,.01,.66,-.59]),backOut:sP([.33,1.53,.69,.99])};function sC(e){return"function"==typeof e&&"applyToOptions"in e}class sO extends s_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:i,allowFlatten:n=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=!!i,this.allowFlatten=n,this.options=e,ej("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function({type:e,...t}){return sC(e)&&sj()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=function(e,t,r,{delay:s=0,duration:i=300,repeat:n=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u){let h={[t]:r};l&&(h.offset=l);let c=function e(t,r){if(t)return"function"==typeof t?sj()?rY(t,r):"ease-out":sf(t)?sP(t):Array.isArray(t)?t.map(t=>e(t,r)||sR.easeOut):sR[t]}(o,i);Array.isArray(c)&&(h.easing=c);let d={delay:s,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:n+1,direction:"reverse"===a?"alternate":"normal"};u&&(d.pseudoElement=u);let f=e.animate(h,d);return f}(t,r,s,l,i),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){let e=sv(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):r.startsWith("--")?t.style.setProperty(r,e):t.style[r]=e,this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=rO(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&sE())?(this.animation.timeline=e,eY):t(this)}}let sI={anticipate:su,backInOut:sl,circInOut:sd};class sN extends sO{constructor(e){!function(e){"string"==typeof e.ease&&e.ease in sI&&(e.ease=sI[e.ease])}(e),sx(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:r,onComplete:s,element:i,...n}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);let a=new sS({...n,autoplay:!1}),o=Math.max(10,tu.now()-this.startTime),l=I(0,10,o-10);t.setWithVelocity(a.sample(Math.max(0,o-l)).value,a.sample(o).value,l),a.stop()}}let s$=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(el.test(e)||"0"===e)&&!e.startsWith("url("));function sM(e){e.duration=0,e.type="keyframes"}let sD=new Set(["opacity","clipPath","filter","transform"]),sU=sT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class sL extends s_{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:n="loop",keyframes:a,name:o,motionValue:l,element:u,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=tu.now();const c={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:i,repeatType:n,name:o,motionValue:l,element:u,...h},d=u?.KeyframeResolver||te;this.keyframeResolver=new d(a,(e,t,r)=>this.onKeyframesResolved(e,t,c,!r),o,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,s){this.keyframeResolver=void 0;let{name:i,type:n,velocity:a,delay:o,isHandoff:l,onUpdate:u}=r;this.resolvedAt=tu.now(),!function(e,t,r,s){let i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;let n=e[e.length-1],a=s$(i,t),o=s$(n,t);return eA(a===o,`You are trying to animate ${t} from "${i}" to "${n}". "${a?n:i}" is not an animatable value.`,"value-not-animatable"),!!a&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||sC(r))&&s)}(e,i,n,a)&&((eX.instantAnimations||!o)&&u?.(sv(e,r,t)),e[0]=e[e.length-1],sM(r),r.repeat=0);let h={startTime:s?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},c=!l&&function(e){let{motionValue:t,name:r,repeatDelay:s,repeatType:i,damping:n,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return sU()&&r&&sD.has(r)&&("transform"!==r||!l)&&!o&&!s&&"mirror"!==i&&0!==n&&"inertia"!==a}(h),d=h.motionValue?.owner?.current,f=c?new sN({...h,element:d}):new sS(h);f.finished.then(()=>{this.notifyFinished()}).catch(eY),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),e8=!0,e7(),e9(),e8=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let sB={type:"spring",stiffness:500,damping:25,restSpeed:10},sV={type:"keyframes",duration:.8},sF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sz=e=>null!==e,sW=(e,t,r,s={},i,n)=>a=>{let o=rP(s,e)||{},l=o.delay||s.delay||0,{elapsed:u=0}=s;u-=rO(l);let h={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:n?void 0:i};!function({when:e,delay:t,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:n,repeatType:a,repeatDelay:o,from:l,elapsed:u,...h}){return!!Object.keys(h).length}(o)&&Object.assign(h,((e,{keyframes:t})=>t.length>2?sV:O.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:sB:sF)(e,h)),h.duration&&(h.duration=rO(h.duration)),h.repeatDelay&&(h.repeatDelay=rO(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let c=!1;if(!1!==h.type&&(0!==h.duration||h.repeatDelay)||(sM(h),0===h.delay&&(c=!0)),(eX.instantAnimations||eX.skipAnimations)&&(c=!0,sM(h),h.delay=0),h.allowFlatten=!o.type&&!o.ease,c&&!n&&void 0!==t.get()){let e=function(e,{repeat:t,repeatType:r="loop"},s){let i=e.filter(sz),n=t&&"loop"!==r&&t%2==1?0:i.length-1;return i[n]}(h.keyframes,o);if(void 0!==e)return void e0.update(()=>{h.onUpdate(e),h.onComplete()})}return o.isSync?new sS(h):new sL(h)};function sq(e,t,{delay:r=0,transitionOverride:s,type:i}={}){let{transition:n=e.getDefaultTransition(),transitionEnd:a,...o}=t,l=n?.reduceMotion;s&&(n=s);let u=[],h=i&&e.animationState&&e.animationState.getState()[i];for(let t in o){let s=e.getValue(t,e.latestValues[t]??null),i=o[t];if(void 0===i||h&&function({protectedKeys:e,needsAnimating:t},r){let s=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,s}(h,t))continue;let a={delay:r,...rP(n||{},t)},c=s.get();if(void 0!==c&&!s.isAnimating&&!Array.isArray(i)&&i===c&&!a.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){let r=e.props[r_];if(r){let e=window.MotionHandoffAnimation(r,t,e0);null!==e&&(a.startTime=e,d=!0)}}rC(e,t);let f=l??e.shouldReduceMotion;s.start(sW(t,s,i,f&&e_.has(t)?{type:!1}:a,e,d));let p=s.animation;p&&u.push(p)}return a&&Promise.all(u).then(()=>{e0.update(()=>{a&&function(e,t){let{transitionEnd:r={},transition:s={},...i}=rj(e,t)||{};for(let t in i={...i,...r}){var n;let r=rR(n=i[t])?n[n.length-1]||0:n;e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,tc(r))}}(e,a)})}),u}function sK(e,t,r,s=0,i=1){let n=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*s;return"function"==typeof r?r(n,a):1===i?n*s:o-n*s}function sG(e,t,r={}){let s=rj(e,t,"exit"===r.type?e.presenceContext?.custom:void 0),{transition:i=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);let n=s?()=>Promise.all(sq(e,s,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(s=0)=>{let{delayChildren:n=0,staggerChildren:a,staggerDirection:o}=i;return function(e,t,r=0,s=0,i=0,n=1,a){let o=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),o.push(sG(l,t,{...a,delay:r+("function"==typeof s?0:s)+sK(e.variantChildren,l,s,i,n)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,s,n,a,o,r)}:()=>Promise.resolve(),{when:o}=i;if(!o)return Promise.all([n(),a(r.delay)]);{let[e,t]="beforeChildren"===o?[n,a]:[a,n];return e().then(()=>t())}}let sH=tw.length;function sJ(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}let sY=[...tv].reverse(),sX=tv.length;function sZ(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sQ(){return{animate:sZ(!0),whileInView:sZ(),whileHover:sZ(),whileTap:sZ(),whileDrag:sZ(),whileFocus:sZ(),exit:sZ()}}let s0=0;function s1(e){return[e("x"),e("y")]}let s2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function s5(e){return s2.has(e.tagName)||!0===e.isContentEditable}function s3(e,t,r,s={passive:!0}){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}let s6={x:!1,y:!1};function s4(e){return e.max-e.min}function s8(e,t,r,s=.5){e.origin=s,e.originPoint=tz(t.min,t.max,e.origin),e.scale=s4(r)/s4(t),e.translate=tz(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function s9(e,t,r,s){s8(e.x,t.x,r.x,s?s.originX:void 0),s8(e.y,t.y,r.y,s?s.originY:void 0)}function s7(e,t,r){e.min=r.min+t.min,e.max=e.min+s4(t)}function ie(e,t,r){e.min=t.min-r.min,e.max=e.min+s4(t)}function it(e,t,r){ie(e.x,t.x,r.x),ie(e.y,t.y,r.y)}let ir=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function is(e){return{point:{x:e.pageX,y:e.pageY}}}function ii(e,t,r,s){return s3(e,t,e=>ir(e)&&r(e,is(e)),s)}let ia=({current:e})=>e?e.ownerDocument.defaultView:null,io=(e,t)=>Math.abs(e-t),il=new Set(["auto","scroll"]);class iu{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:n=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let r=id(this.lastMoveEventInfo,this.history),s=null!==this.startEvent,i=(e=r.offset,t={x:0,y:0},Math.sqrt(io(e.x,t.x)**2+io(e.y,t.y)**2)>=this.distanceThreshold);if(!s&&!i)return;let{point:n}=r,{timestamp:a}=e2;this.history.push({...n,timestamp:a});let{onStart:o,onMove:l}=this.handlers;s||(o&&o(this.lastMoveEvent,r),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,r)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ih(t,this.transformPagePoint),e0.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:s,resumeAnimation:i}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&i&&i(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let n=id("pointercancel"===e.type?this.lastMoveEventInfo:ih(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,n),s&&s(e,n)},!ir(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=n,this.contextWindow=s||window;const o=ih(is(e),this.transformPagePoint),{point:l}=o,{timestamp:u}=e2;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=t;h&&h(e,id(o,this.history)),this.removeListeners=rN(ii(this.contextWindow,"pointermove",this.handlePointerMove),ii(this.contextWindow,"pointerup",this.handlePointerUp),ii(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let t=e.parentElement;for(;t;){let e=getComputedStyle(t);(il.has(e.overflowX)||il.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){let t=this.scrollPositions.get(e);if(!t)return;let r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:s.x-t.x,y:s.y-t.y};(0!==i.x||0!==i.y)&&(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,s),e0.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),e1(this.updatePoint)}}function ih(e,t){return t?{point:t(e.point)}:e}function ic(e,t){return{x:e.x-t.x,y:e.y-t.y}}function id({point:e},t){return{point:e,delta:ic(e,ip(t)),offset:ic(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null,i=ip(e);for(;r>=0&&(s=e[r],!(i.timestamp-s.timestamp>rO(.1)));)r--;if(!s)return{x:0,y:0};let n=(i.timestamp-s.timestamp)/1e3;if(0===n)return{x:0,y:0};let a={x:(i.x-s.x)/n,y:(i.y-s.y)/n};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function ip(e){return e[e.length-1]}function im(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function ig(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}function iy(e,t,r){return{min:ib(e,t),max:ib(e,r)}}function ib(e,t){return"number"==typeof e?e:e[t]||0}let iv=new WeakMap;class iw{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ew(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){let{presenceContext:s}=this.visualElement;if(s&&!1===s.isPresent)return;let i=e=>{t?(this.stopAnimation(),this.snapToCursor(is(e).point)):this.pauseAnimation()},n=(e,t)=>{this.stopAnimation();let{drag:r,dragPropagation:s,onDragStart:i}=this.getProps();if(r&&!s&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(s6[e])return null;else return s6[e]=!0,()=>{s6[e]=!1};return s6.x||s6.y?null:(s6.x=s6.y=!0,()=>{s6.x=s6.y=!1})}(r),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),s1(e=>{let t=this.getAxisMotionValue(e).get()||0;if(G.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let s=r.layout.layoutBox[e];s&&(t=s4(s)*(parseFloat(t)/100))}}this.originPoint[e]=t}),i&&e0.postRender(()=>i(e,t)),rC(this.visualElement,"transform");let{animationState:n}=this.visualElement;n&&n.setActive("whileDrag",!0)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:r,dragDirectionLock:s,onDirectionLock:i,onDrag:n}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:a}=t;if(s&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(a),null!==this.currentDirection&&i&&i(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),n&&n(e,t)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>s1(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new iu(e,{onSessionStart:i,onStart:n,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:ia(this.visualElement),element:this.visualElement.current})}stop(e,t){let r=e||this.latestPointerEvent,s=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;let{velocity:n}=s;this.startAnimation(n);let{onDragEnd:a}=this.getProps();a&&e0.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){let{drag:s}=this.getProps();if(!r||!ix(e,s,this.currentDirection))return;let i=this.getAxisMotionValue(e),n=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(n=function(e,{min:t,max:r},s){return void 0!==t&&e<t?e=s?tz(t,e,s.min):Math.max(e,t):void 0!==r&&e>r&&(e=s?tz(r,e,s.max):Math.min(e,r)),e}(n,this.constraints[e],this.elastic[e])),i.set(n)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&rS(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=function(e,{top:t,left:r,bottom:s,right:i}){return{x:im(e.x,r,i),y:im(e.y,t,s)}}(r.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:iy(e,"left","right"),y:iy(e,"top","bottom")}}(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&s1(e=>{var t,s;let i;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=r.layoutBox[e],s=this.constraints[e],i={},void 0!==s.min&&(i.min=s.min-t.min),void 0!==s.max&&(i.max=s.max-t.min),i))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!rS(t))return!1;let s=t.current;ej(null!==s,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:i}=this.visualElement;if(!i||!i.layout)return!1;let n=function(e,t,r){let s=t4(e,r),{scroll:i}=t;return i&&(t5(s.x,i.offset.x),t5(s.y,i.offset.y)),s}(s,i.root,this.visualElement.getTransformPagePoint()),a=(e=i.layout.layoutBox,{x:ig(e.x,n.x),y:ig(e.y,n.y)});if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=tJ(e))}return a}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:n,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(s1(a=>{if(!ix(a,t,this.currentDirection))return;let l=o&&o[a]||{};n&&(l={min:0,max:0});let u={type:"inertia",velocity:r?e[a]:0,bounceStiffness:s?200:1e6,bounceDamping:s?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,u)})).then(a)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return rC(this.visualElement,e),r.start(sW(e,r,0,t,this.visualElement,!1))}stopAnimation(){s1(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){s1(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){s1(t=>{let{drag:r}=this.getProps();if(!ix(t,r,this.currentDirection))return;let{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){let{min:r,max:n}=s.layout.layoutBox[t],a=i.get()||0;i.set(e[t]-tz(r,n,.5)+a)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!rS(t)||!r||!this.constraints)return;this.stopAnimation();let s={x:0,y:0};s1(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var r,i;let n,a,o,l=t.get();s[e]=(r={min:l,max:l},i=this.constraints[e],n=.5,a=s4(r),(o=s4(i))>a?n=sg(i.min,i.max-a,r.min):a>o&&(n=sg(r.min,r.max-o,i.min)),I(0,1,n))}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),s1(t=>{if(!ix(t,e,null))return;let r=this.getAxisMotionValue(t),{min:i,max:n}=this.constraints[t];r.set(tz(i,n,s[t]))})}addListeners(){if(!this.visualElement.current)return;iv.set(this.visualElement,this);let e=this.visualElement.current,t=ii(e,"pointerdown",t=>{let{drag:r,dragListener:s=!0}=this.getProps(),i=t.target,n=i!==e&&s5(i);r&&s&&!n&&this.start(t)}),r=()=>{let{dragConstraints:e}=this.getProps();rS(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),e0.read(r);let n=s3(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(s1(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{n(),t(),i(),a&&a()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:n=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:n,dragMomentum:a}}}function ix(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}let i_=e=>(t,r)=>{e&&e0.postRender(()=>e(t,r))},ik={hasAnimatedSinceResize:!0,hasEverUpdated:!1};var iS=R;function iT(e=!0){let t=(0,R.useContext)(rd);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:s,register:i}=t,n=(0,R.useId)();(0,R.useEffect)(()=>{if(e)return i(n)},[e]);let a=(0,R.useCallback)(()=>e&&s&&s(n),[n,s,e]);return!r&&s?[!1,a]:[!0]}let iE=!1;class iA extends iS.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(t.group&&t.group.add(i),r&&r.register&&s&&r.register(i),iE&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),ik.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:s,isPresent:i}=this.props,{projection:n}=r;return n&&(n.isPresent=i,e.layoutDependency!==t&&n.setOptions({...n.options,layoutDependency:t}),iE=!0,s||e.layoutDependency!==t||void 0===t||e.isPresent!==i?n.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?n.promote():n.relegate()||e0.postRender(()=>{let e=n.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),to.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;iE=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ij(e){let[t,r]=iT(),s=(0,iS.useContext)(re);return(0,j.jsx)(iA,{...e,layoutGroup:s,switchLayoutGroup:(0,iS.useContext)(rk),isPresent:t,safeToRemove:r})}function iP(e){return"object"==typeof e&&null!==e}function iR(e){return iP(e)&&"ownerSVGElement"in e}let iC=["TopLeft","TopRight","BottomLeft","BottomRight"],iO=iC.length,iI=e=>"string"==typeof e?parseFloat(e):e,iN=e=>"number"==typeof e||H.test(e);function i$(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let iM=iU(0,.5,sc),iD=iU(.5,.95,eY);function iU(e,t,r){return s=>s<e?0:s>t?1:r(sg(e,t,s))}function iL(e,t){e.min=t.min,e.max=t.max}function iB(e,t){iL(e.x,t.x),iL(e.y,t.y)}function iV(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function iF(e,t,r,s,i){return e-=t,e=s+1/r*(e-s),void 0!==i&&(e=s+1/i*(e-s)),e}function iz(e,t,[r,s,i],n,a){!function(e,t=0,r=1,s=.5,i,n=e,a=e){if(G.test(t)&&(t=parseFloat(t),t=tz(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=tz(n.min,n.max,s);e===n&&(o-=t),e.min=iF(e.min,t,r,o,i),e.max=iF(e.max,t,r,o,i)}(e,t[r],t[s],t[i],t.scale,n,a)}let iW=["x","scaleX","originX"],iq=["y","scaleY","originY"];function iK(e,t,r,s){iz(e.x,t,iW,r?r.x:void 0,s?s.x:void 0),iz(e.y,t,iq,r?r.y:void 0,s?s.y:void 0)}function iG(e){return 0===e.translate&&1===e.scale}function iH(e){return iG(e.x)&&iG(e.y)}function iJ(e,t){return e.min===t.min&&e.max===t.max}function iY(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function iX(e,t){return iY(e.x,t.x)&&iY(e.y,t.y)}function iZ(e){return s4(e.x)/s4(e.y)}function iQ(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class i0{constructor(){this.members=[]}add(e){ti(this.members,e),e.scheduleRender()}remove(e){if(tn(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();let s=r.options.layoutDependency,i=e.options.layoutDependency;(void 0===s||void 0===i||s!==i)&&(e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));let{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let i1=(e,t)=>e.depth-t.depth;class i2{constructor(){this.children=[],this.isDirty=!1}add(e){ti(this.children,e),this.isDirty=!0}remove(e){tn(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(i1),this.isDirty=!1,this.children.forEach(e)}}let i5=["","X","Y","Z"],i3=0;function i6(e,t,r,s){let{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function i4({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(e={},r=t?.()){this.id=i3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(i7),this.nodes.forEach(na),this.nodes.forEach(no),this.nodes.forEach(ne)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new i2)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new ta),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=iR(t)&&!(iR(t)&&"svg"===t.tagName),this.instance=t;let{layoutId:r,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||r)&&(this.isLayoutDirty=!0),e){let r,s=0,i=()=>this.root.updateBlockedByResize=!1;e0.read(()=>{s=window.innerWidth}),e(t,()=>{let e=window.innerWidth;if(e!==s){let t,n;s=e,this.root.updateBlockedByResize=!0,r&&r(),t=tu.now(),n=({timestamp:e})=>{let r=e-t;r>=250&&(e1(n),i(r-250))},e0.setup(n,!0),r=()=>e1(n),ik.hasAnimatedSinceResize&&(ik.hasAnimatedSinceResize=!1,this.nodes.forEach(nn))}})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:r,layout:s})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let n=this.options.transition||i.getDefaultTransition()||nf,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=i.getProps(),l=!this.targetLayout||!iX(this.targetLayout,s),u=!t&&r;if(this.options.layoutRoot||this.resumeFrom||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...rP(n,"layout"),onPlay:a,onComplete:o};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,u)}else t||nn(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),e1(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nl),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:r}=t.options;if(!r)return;let s=r.props[r_];if(window.MotionHasOptimisedAnimation(s,"transform")){let{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",e0,!(e||r))}let{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&e(i)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nr);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(ns);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ni),this.nodes.forEach(i8),this.nodes.forEach(i9)):this.nodes.forEach(ns),this.clearAllSnapshots();let e=tu.now();e2.delta=I(0,1e3/60,e-e2.timestamp),e2.timestamp=e,e2.isProcessing=!0,e5.update.process(e2),e5.preRender.process(e2),e5.render.process(e2),e2.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,to.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nt),this.sharedNodes.forEach(nu)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,e0.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){e0.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||s4(this.snapshot.measuredBox.x)||s4(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ew(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=s(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!iH(this.projectionDelta),r=this.getTransformTemplate(),s=r?r(this.latestValues,""):void 0,n=s!==this.prevTransformTemplateValue;e&&this.instance&&(t||tZ(this.latestValues)||n)&&(i(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),s=this.removeElementScroll(r);return e&&(s=this.removeTransform(s)),ng((t=s).x),ng(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:s,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return ew();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nb))){let{scroll:e}=this.root;e&&(t5(t.x,e.offset.x),t5(t.y,e.offset.y))}return t}removeElementScroll(e){let t=ew();if(iB(t,e),this.scroll?.wasRoot)return t;for(let r=0;r<this.path.length;r++){let s=this.path[r],{scroll:i,options:n}=s;s!==this.root&&i&&n.layoutScroll&&(i.wasRoot&&iB(t,e),t5(t.x,i.offset.x),t5(t.y,i.offset.y))}return t}applyTransform(e,t=!1){let r=ew();iB(r,e);for(let e=0;e<this.path.length;e++){let s=this.path[e];!t&&s.options.layoutScroll&&s.scroll&&s!==s.root&&t6(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),tZ(s.latestValues)&&t6(r,s.latestValues)}return tZ(this.latestValues)&&t6(r,this.latestValues),r}removeTransform(e){let t=ew();iB(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!tZ(r.latestValues))continue;tX(r.latestValues)&&r.updateSnapshot();let s=ew();iB(s,r.measurePageBox()),iK(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,s)}return tZ(this.latestValues)&&iK(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==e2.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);let r=!!this.resumingFrom||this!==t;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:s,layoutId:i}=this.options;if(!this.layout||!(s||i))return;this.resolvedRelativeTargetAt=e2.timestamp;let n=this.getClosestProjectingParent();if(n&&this.linkedParentVersion!==n.layoutVersion&&!n.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(n&&n.layout?this.createRelativeTarget(n,this.layout.layoutBox,n.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=ew(),this.targetWithTransforms=ew()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var a,o,l;this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,s7(a.x,o.x,l.x),s7(a.y,o.y,l.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):iB(this.target,this.layout.layoutBox),t2(this.target,this.targetDelta)):iB(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,n&&!!n.resumingFrom==!!this.resumingFrom&&!n.options.layoutScroll&&n.target&&1!==this.animationProgress?this.createRelativeTarget(n,this.target,n.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||tX(this.parent.latestValues)||tQ(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,r){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ew(),this.relativeTargetOrigin=ew(),it(this.relativeTargetOrigin,t,r),iB(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,r=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(r=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===e2.timestamp&&(r=!1),r)return;let{layout:s,layoutId:i}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(s||i))return;iB(this.layoutCorrected,this.layout.layoutBox);let n=this.treeScale.x,a=this.treeScale.y;!function(e,t,r,s=!1){let i,n,a=r.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){n=(i=r[o]).projectionDelta;let{visualElement:a}=i.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&t6(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),n&&(t.x*=n.x.scale,t.y*=n.y.scale,t2(e,n)),s&&tZ(i.latestValues)&&t6(e,i.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=ew());let{target:o}=e;if(!o){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(iV(this.prevProjectionDelta.x,this.projectionDelta.x),iV(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),s9(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===n&&this.treeScale.y===a&&iQ(this.projectionDelta.x,this.prevProjectionDelta.x)&&iQ(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=eb(),this.projectionDelta=eb(),this.projectionDeltaWithTransform=eb()}setAnimationOrigin(e,t=!1){let r,s=this.snapshot,i=s?s.latestValues:{},n={...this.latestValues},a=eb();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=ew(),l=(s?s.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),h=!u||u.members.length<=1,c=!!(l&&!h&&!0===this.options.crossfade&&!this.path.some(nd));this.animationProgress=0,this.mixTargetDelta=t=>{let s=t/1e3;if(nh(a.x,e.x,s),nh(a.y,e.y,s),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,d,f,p,m,g;it(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,p=this.relativeTargetOrigin,m=o,g=s,nc(f.x,p.x,m.x,g),nc(f.y,p.y,m.y,g),r&&(u=this.relativeTarget,d=r,iJ(u.x,d.x)&&iJ(u.y,d.y))&&(this.isProjectionDirty=!1),r||(r=ew()),iB(r,this.relativeTarget)}l&&(this.animationValues=n,function(e,t,r,s,i,n){i?(e.opacity=tz(0,r.opacity??1,iM(s)),e.opacityExit=tz(t.opacity??1,0,iD(s))):n&&(e.opacity=tz(t.opacity??1,r.opacity??1,s));for(let i=0;i<iO;i++){let n=`border${iC[i]}Radius`,a=i$(t,n),o=i$(r,n);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||iN(a)===iN(o)?(e[n]=Math.max(tz(iI(a),iI(o),s),0),(G.test(o)||G.test(a))&&(e[n]+="%")):e[n]=o)}(t.rotate||r.rotate)&&(e.rotate=tz(t.rotate||0,r.rotate||0,s))}(n,i,this.latestValues,s,c,h)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=s},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(e1(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=e0.update(()=>{var t,r,s;let i;ik.hasAnimatedSinceResize=!0,r$.layout++,this.motionValue||(this.motionValue=tc(0)),this.currentAnimation=(t=this.motionValue,r=[0,1e3],s={...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{r$.layout--},onComplete:()=>{r$.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}},(i=ex(t)?t:tc(t)).start(sW("",i,r,s)),i.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:s,latestValues:i}=e;if(t&&r&&s){if(this!==e&&this.layout&&s&&ny(this.options.animationType,this.layout.layoutBox,s.layoutBox)){r=this.target||ew();let t=s4(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let s=s4(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+s}iB(t,r),t6(t,i),s9(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new i0),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let s=this.getStack();s&&s.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let s={};r.z&&i6("z",e,s,this.animationValues);for(let t=0;t<i5.length;t++)i6(`rotate${i5[t]}`,e,s,this.animationValues),i6(`skew${i5[t]}`,e,s,this.animationValues);for(let t in e.render(),s)e.setStaticValue(t,s[t]),this.animationValues&&(this.animationValues[t]=s[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let r=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=rc(t?.pointerEvents)||"",e.transform=r?r(this.latestValues,""):"none";return}let s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=rc(t?.pointerEvents)||""),this.hasProjected&&!tZ(this.latestValues)&&(e.transform=r?r({},""):"none",this.hasProjected=!1);return}e.visibility="";let i=s.animationValues||s.latestValues;this.applyTransformsToTarget();let n=function(e,t,r){let s="",i=e.x.translate/t.x,n=e.y.translate/t.y,a=r?.z||0;if((i||n||a)&&(s=`translate3d(${i}px, ${n}px, ${a}px) `),(1!==t.x||1!==t.y)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:i,rotateY:n,skewX:a,skewY:o}=r;e&&(s=`perspective(${e}px) ${s}`),t&&(s+=`rotate(${t}deg) `),i&&(s+=`rotateX(${i}deg) `),n&&(s+=`rotateY(${n}deg) `),a&&(s+=`skewX(${a}deg) `),o&&(s+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(s+=`scale(${o}, ${l})`),s||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);r&&(n=r(i,n)),e.transform=n;let{x:a,y:o}=this.projectionDelta;for(let t in e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,s.animationValues?e.opacity=s===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=s===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0,tW){if(void 0===i[t])continue;let{correct:r,applyTo:a,isCSSVariable:o}=tW[t],l="none"===n?i[t]:r(i[t],s);if(a){let t=a.length;for(let r=0;r<t;r++)e[a[r]]=l}else o?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=s===this?rc(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(nr),this.root.sharedNodes.clear()}}}function i8(e){e.updateLayout()}function i9(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){let{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,n=t.source!==e.layout.source;"size"===i?s1(e=>{let s=n?t.measuredBox[e]:t.layoutBox[e],i=s4(s);s.min=r[e].min,s.max=s.min+i}):ny(i,t.layoutBox,r)&&s1(s=>{let i=n?t.measuredBox[s]:t.layoutBox[s],a=s4(r[s]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[s].max=e.relativeTarget[s].min+a)});let a=eb();s9(a,r,t.layoutBox);let o=eb();n?s9(o,e.applyTransform(s,!0),t.measuredBox):s9(o,r,t.layoutBox);let l=!iH(a),u=!1;if(!e.resumeFrom){let s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){let{snapshot:i,layout:n}=s;if(i&&n){let a=ew();it(a,t.layoutBox,i.layoutBox);let o=ew();it(o,r,n.layoutBox),iX(a,o)||(u=!0),s.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=s)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function i7(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function ne(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nt(e){e.clearSnapshot()}function nr(e){e.clearMeasurements()}function ns(e){e.isLayoutDirty=!1}function ni(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nn(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function na(e){e.resolveTargetDelta()}function no(e){e.calcProjection()}function nl(e){e.resetSkewAndRotation()}function nu(e){e.removeLeadSnapshot()}function nh(e,t,r){e.translate=tz(t.translate,0,r),e.scale=tz(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function nc(e,t,r,s){e.min=tz(t.min,r.min,s),e.max=tz(t.max,r.max,s)}function nd(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let nf={duration:.45,ease:[.4,0,.1,1]},np=e=>"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),nm=np("applewebkit/")&&!np("chrome/")?Math.round:eY;function ng(e){e.min=nm(e.min),e.max=nm(e.max)}function ny(e,t,r){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(iZ(t)-iZ(r)))}function nb(e){return e!==e.root&&e.scroll?.wasRoot}let nv=i4({attachResizeListener:(e,t)=>s3(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),nw={current:void 0},nx=i4({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!nw.current){let e=new nv({});e.mount(window),e.setOptions({layoutScroll:!0}),nw.current=e}return nw.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function n_(e,t){let r=function(e,t,r){if(null==e)return[];if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document,r=(void 0)??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e).filter(e=>null!=e)}(e),s=new AbortController;return[r,{passive:!0,...t,signal:s.signal},()=>s.abort()]}function nk(e){return!("touch"===e.pointerType||s6.x||s6.y)}function nS(e,t,r){let{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover","Start"===r);let i=s["onHover"+r];i&&e0.postRender(()=>i(t,is(t)))}function nT(e){return iP(e)&&"offsetHeight"in e}let nE=(e,t)=>!!t&&(e===t||nE(e,t.parentElement)),nA=new WeakSet;function nj(e){return t=>{"Enter"===t.key&&e(t)}}function nP(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function nR(e){return ir(e)&&!(s6.x||s6.y)}function nC(e,t,r){let{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap","Start"===r);let i=s["onTap"+("End"===r?"":r)];i&&e0.postRender(()=>i(t,is(t)))}let nO=new WeakMap,nI=new WeakMap,nN=e=>{let t=nO.get(e.target);t&&t(e)},n$=e=>{e.forEach(nN)},nM={some:0,all:1},nD=function(e,t){if("u"<typeof Proxy)return rE;let r=new Map,s=(r,s)=>rE(r,s,e,t);return new Proxy((e,t)=>s(e,t),{get:(i,n)=>"create"===n?s:(r.has(n)||r.set(n,rE(n,void 0,e,t)),r.get(n))})}({animation:{Feature:class extends rA{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let s;if(e.notify("AnimationStart",t),Array.isArray(t))s=Promise.all(t.map(t=>sG(e,t,r)));else if("string"==typeof t)s=sG(e,t,r);else{let i="function"==typeof t?rj(e,t,r.custom):t;s=Promise.all(sq(e,i,r))}return s.then(()=>{e.notify("AnimationComplete",t)})})(e,t,r))),r=sQ(),s=!0,i=t=>(r,s)=>{let i=rj(e,s,"exit"===t?e.presenceContext?.custom:void 0);if(i){let{transition:e,transitionEnd:t,...s}=i;r={...r,...s,...t}}return r};function n(n){let{props:a}=e,o=function e(t){if(!t)return;if(!t.isControllingVariants){let r=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(r.initial=t.props.initial),r}let r={};for(let e=0;e<sH;e++){let s=tw[e],i=t.props[s];(tb(i)||!1===i)&&(r[s]=i)}return r}(e.parent)||{},l=[],u=new Set,h={},c=1/0;for(let t=0;t<sX;t++){var d,f;let p=sY[t],m=r[p],g=void 0!==a[p]?a[p]:o[p],y=tb(g),b=p===n?m.isActive:null;!1===b&&(c=t);let v=g===o[p]&&g!==a[p]&&y;if(v&&s&&e.manuallyAnimateOnMount&&(v=!1),m.protectedKeys={...h},!m.isActive&&null===b||!g&&!m.prevProp||ty(g)||"boolean"==typeof g)continue;let w=(d=m.prevProp,"string"==typeof(f=g)?f!==d:!!Array.isArray(f)&&!sJ(f,d)),x=w||p===n&&m.isActive&&!v&&y||t>c&&y,_=!1,k=Array.isArray(g)?g:[g],S=k.reduce(i(p),{});!1===b&&(S={});let{prevResolvedValues:T={}}=m,E={...T,...S},A=t=>{x=!0,u.has(t)&&(_=!0,u.delete(t)),m.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in E){let t=S[e],r=T[e];if(!h.hasOwnProperty(e))(rR(t)&&rR(r)?sJ(t,r):t===r)?void 0!==t&&u.has(e)?A(e):m.protectedKeys[e]=!0:null!=t?A(e):u.add(e)}m.prevProp=g,m.prevResolvedValues=S,m.isActive&&(h={...h,...S}),s&&e.blockInitialAnimation&&(x=!1);let j=v&&w,P=!j||_;x&&P&&l.push(...k.map(t=>{let r={type:p};if("string"==typeof t&&s&&!j&&e.manuallyAnimateOnMount&&e.parent){let{parent:s}=e,i=rj(s,t);if(s.enteringChildren&&i){let{delayChildren:t}=i.transition||{};r.delay=sK(s.enteringChildren,e,t)}}return{animation:t,options:r}}))}if(u.size){let t={};if("boolean"!=typeof a.initial){let r=rj(e,Array.isArray(a.initial)?a.initial[0]:a.initial);r&&r.transition&&(t.transition=r.transition)}u.forEach(r=>{let s=e.getBaseTarget(r),i=e.getValue(r);i&&(i.liveStyle=!0),t[r]=s??null}),l.push({animation:t})}let p=!!l.length;return s&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(p=!1),s=!1,p?t(l):Promise.resolve()}return{animateChanges:n,setActive:function(t,s){if(r[t].isActive===s)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,s)),r[t].isActive=s;let i=n(t);for(let e in r)r[e].protectedKeys={};return i},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=sQ()}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();ty(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends rA{constructor(){super(...arguments),this.id=s0++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends rA{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:r={}}=this.node.getProps(),{root:s,margin:i,amount:n="some",once:a}=r,o={root:s?s.current:void 0,rootMargin:i,threshold:"number"==typeof n?n:nM[n]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,a&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:s}=this.node.getProps(),i=t?r:s;i&&i(e)};return e=this.node.current,t=function({root:e,...t}){let r=e||document;nI.has(r)||nI.set(r,{});let s=nI.get(r),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(n$,{root:e,...t})),s[i]}(o),nO.set(e,l),t.observe(e),()=>{nO.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("u"<typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends rA{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[s,i,n]=n_(e,r),a=e=>{let s=e.currentTarget;if(!nR(e))return;nA.add(s);let n=t(s,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),nA.has(s)&&nA.delete(s),nR(e)&&"function"==typeof n&&n(e,{success:t})},o=e=>{a(e,s===window||s===document||r.useGlobalTarget||nE(s,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",l,i)};return s.forEach(e=>{(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),nT(e)&&(e.addEventListener("focus",e=>((e,t)=>{let r=e.currentTarget;if(!r)return;let s=nj(()=>{if(nA.has(r))return;nP(r,"down");let e=nj(()=>{nP(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>nP(r,"cancel"),t)});r.addEventListener("keydown",s,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",s),t)})(e,i)),s5(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),n}(e,(e,t)=>(nC(this.node,t,"Start"),(e,{success:t})=>nC(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends rA{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rN(s3(this.node.current,"focus",()=>this.onFocus()),s3(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends rA{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[s,i,n]=n_(e,r),a=e=>{if(!nk(e))return;let{target:r}=e,s=t(r,e);if("function"!=typeof s||!r)return;let n=e=>{nk(e)&&(s(e),r.removeEventListener("pointerleave",n))};r.addEventListener("pointerleave",n,i)};return s.forEach(e=>{e.addEventListener("pointerenter",a,i)}),n}(e,(e,t)=>(nS(this.node,t,"Start"),e=>nS(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends rA{constructor(){super(...arguments),this.removePointerDownListener=eY}onPointerDown(e){this.session=new iu(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ia(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:i_(e),onStart:i_(t),onMove:r,onEnd:(e,t)=>{delete this.session,s&&e0.postRender(()=>s(e,t))}}}mount(){this.removePointerDownListener=ii(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends rA{constructor(e){super(e),this.removeGroupControls=eY,this.removeListeners=eY,this.controls=new iw(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||eY}update(){let{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}},ProjectionNode:nx,MeasureLayout:ij},layout:{ProjectionNode:nx,MeasureLayout:ij}},(e,t)=>t.isSVG??t7(e)?new tH(t):new t8(t,{allowProjection:e!==R.Fragment}));var nU=R;function nL(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class nB extends nU.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=nT(e)&&e.offsetWidth||0,s=nT(e)&&e.offsetHeight||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left,i.bottom=s-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}}function nV({children:e,isPresent:t,anchorX:r,anchorY:s,root:i}){let n=(0,nU.useId)(),a=(0,nU.useRef)(null),o=(0,nU.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:l}=(0,nU.useContext)(rr),u=function(...e){return R.useCallback(function(...e){return t=>{let r=!1,s=e.map(e=>{let s=nL(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():nL(e[t],null)}}}}(...e),e)}(a,e.props?.ref??e?.ref);return(0,nU.useInsertionEffect)(()=>{let{width:e,height:u,top:h,left:c,right:d,bottom:f}=o.current;if(t||!a.current||!e||!u)return;let p="left"===r?`left: ${c}`:`right: ${d}`,m="bottom"===s?`bottom: ${f}`:`top: ${h}`;a.current.dataset.motionPopId=n;let g=document.createElement("style");l&&(g.nonce=l);let y=i??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${u}px !important;
            ${p}px !important;
            ${m}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[t]),(0,j.jsx)(nB,{isPresent:t,childRef:a,sizeRef:o,children:nU.cloneElement(e,{ref:u})})}let nF=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:i,presenceAffectsLayout:n,mode:a,anchorX:o,anchorY:l,root:u})=>{let h=rf(nz),c=(0,R.useId)(),d=!0,f=(0,R.useMemo)(()=>(d=!1,{id:c,initial:t,isPresent:r,custom:i,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;s&&s()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[r,h,s]);return n&&d&&(f={...f}),(0,R.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[r]),R.useEffect(()=>{r||h.size||!s||s()},[r]),"popLayout"===a&&(e=(0,j.jsx)(nV,{isPresent:r,anchorX:o,anchorY:l,root:u,children:e})),(0,j.jsx)(rd.Provider,{value:f,children:e})};function nz(){return new Map}let nW=e=>e.key||"";function nq(e){let t=[];return R.Children.forEach(e,e=>{(0,R.isValidElement)(e)&&t.push(e)}),t}let nK=({children:e,custom:t,initial:r=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:n="sync",propagate:a=!1,anchorX:o="left",anchorY:l="top",root:u})=>{let[h,c]=iT(a),d=(0,R.useMemo)(()=>nq(e),[e]),f=a&&!h?[]:d.map(nW),p=(0,R.useRef)(!0),m=(0,R.useRef)(d),g=rf(()=>new Map),y=(0,R.useRef)(new Set),[b,v]=(0,R.useState)(d),[w,x]=(0,R.useState)(d);rT(()=>{p.current=!1,m.current=d;for(let e=0;e<w.length;e++){let t=nW(w[e]);f.includes(t)?(g.delete(t),y.current.delete(t)):!0!==g.get(t)&&g.set(t,!1)}},[w,f.length,f.join("-")]);let _=[];if(d!==b){let e=[...d];for(let t=0;t<w.length;t++){let r=w[t],s=nW(r);f.includes(s)||(e.splice(t,0,r),_.push(r))}return"wait"===n&&_.length&&(e=_),x(nq(e)),v(d),null}let{forceRender:k}=(0,R.useContext)(re);return(0,j.jsx)(j.Fragment,{children:w.map(e=>{let b=nW(e),v=(!a||!!h)&&(d===w||f.includes(b));return(0,j.jsx)(nF,{isPresent:v,initial:(!p.current||!!r)&&void 0,custom:t,presenceAffectsLayout:i,mode:n,root:u,onExitComplete:v?void 0:()=>{if(y.current.has(b)||(y.current.add(b),!g.has(b)))return;g.set(b,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(k?.(),x(m.current),a&&c?.(),s&&s())},anchorX:o,anchorY:l,children:e},b)})})};var nG={};!function e(t,r,s,i){var n,a,o,l,u,h,c,d,f,p,m,g=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),y="function"==typeof Path2D&&"function"==typeof DOMMatrix;function b(){}function v(e){var s=r.exports.Promise,i=void 0!==s?s:t.Promise;return"function"==typeof i?new i(e):(e(b,b),null)}var w=(n=function(){if(!t.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),r=e.getContext("2d");r.fillRect(0,0,1,1);var s=e.transferToImageBitmap();r.createPattern(s,"no-repeat")}catch(e){return!1}return!0}(),a=new Map,{transform:function(e){if(n)return e;if(a.has(e))return a.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),a.set(e,t),t},clear:function(){a.clear()}}),x=(u=Math.floor(1e3/60),h={},c=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(o=function(e){var t=Math.random();return h[t]=requestAnimationFrame(function r(s){c===s||c+u-1<s?(c=s,delete h[t],e()):h[t]=requestAnimationFrame(r)}),t},l=function(e){h[e]&&cancelAnimationFrame(h[e])}):(o=function(e){return setTimeout(e,u)},l=function(e){return clearTimeout(e)}),{frame:o,cancel:l}),_=(p={},function(){if(d)return d;if(!s&&g){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {\n  if (msg.data.options) {\n    CONFETTI(msg.data.options).then(function () {\n      if (msg.data.callback) {\n        postMessage({ callback: msg.data.callback });\n      }\n    });\n  } else if (msg.data.reset) {\n    CONFETTI && CONFETTI.reset();\n  } else if (msg.data.resize) {\n    SIZE.width = msg.data.resize.width;\n    SIZE.height = msg.data.resize.height;\n  } else if (msg.data.canvas) {\n    SIZE.width = msg.data.canvas.width;\n    SIZE.height = msg.data.canvas.height;\n    CONFETTI = module.exports.create(msg.data.canvas);\n  }\n}"].join("\n");try{d=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return"u">typeof console&&"function"==typeof console.warn&&console.warn(" Could not load worker",e),null}var r=d;function i(e,t){r.postMessage({options:e||{},callback:t})}r.init=function(e){var t=e.transferControlToOffscreen();r.postMessage({canvas:t},[t])},r.fire=function(e,t,s){if(f)return i(e,null),f;var n=Math.random().toString(36).slice(2);return f=v(function(t){function a(e){e.data.callback===n&&(delete p[n],r.removeEventListener("message",a),f=null,w.clear(),s(),t())}r.addEventListener("message",a),i(e,n),p[n]=a.bind(null,{data:{callback:n}})})},r.reset=function(){for(var e in r.postMessage({reset:!0}),p)p[e](),delete p[e]}}return d}),k={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function S(e,t,r){var s;return s=e&&null!=e[t]?e[t]:k[t],r?r(s):s}function T(e){return e<0?0:Math.floor(e)}function E(e){return parseInt(e,16)}function A(e){return e.map(j)}function j(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:E(t.substring(0,2)),g:E(t.substring(2,4)),b:E(t.substring(4,6))}}function P(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function R(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function C(e,r){var n,a=!e,o=!!S(r||{},"resize"),l=!1,u=S(r,"disableForReducedMotion",Boolean),h=g&&S(r||{},"useWorker")?_():null,c=a?P:R,d=!!e&&!!h&&!!e.__confetti_initialized,f="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function p(r){var p,m=u||S(r,"disableForReducedMotion",Boolean),g=S(r,"zIndex",Number);if(m&&f)return v(function(e){e()});a&&n?e=n.canvas:a&&!e&&((p=document.createElement("canvas")).style.position="fixed",p.style.top="0px",p.style.left="0px",p.style.pointerEvents="none",p.style.zIndex=g,e=p,document.body.appendChild(e)),o&&!d&&c(e);var b={width:e.width,height:e.height};function _(){if(h){var t={getBoundingClientRect:function(){if(!a)return e.getBoundingClientRect()}};c(t),h.postMessage({resize:{width:t.width,height:t.height}});return}b.width=b.height=null}function k(){n=null,o&&(l=!1,t.removeEventListener("resize",_)),a&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,d=!1)}return(h&&!d&&h.init(e),d=!0,h&&(e.__confetti_initialized=!0),o&&!l&&(l=!0,t.addEventListener("resize",_,!1)),h)?h.fire(r,b,k):function(t,r,a){for(var o,l,u,h,d,f,p,m=S(t,"particleCount",T),g=S(t,"angle",Number),b=S(t,"spread",Number),_=S(t,"startVelocity",Number),k=S(t,"decay",Number),E=S(t,"gravity",Number),j=S(t,"drift",Number),P=S(t,"colors",A),R=S(t,"ticks",Number),C=S(t,"shapes"),O=S(t,"scalar"),I=!!S(t,"flat"),N=((o=S(t,"origin",Object)).x=S(o,"x",Number),o.y=S(o,"y",Number),o),$=m,M=[],D=e.width*N.x,U=e.height*N.y;$--;)M.push(function(e){var t=e.angle*(Math.PI/180),r=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*r-Math.random()*r),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}({x:D,y:U,angle:g,spread:b,startVelocity:_,color:P[$%P.length],shape:C[Math.floor(Math.random()*(C.length-0))+0],ticks:R,decay:k,gravity:E,drift:j,scalar:O,flat:I}));return n?n.addFettis(M):(l=e,d=M.slice(),f=l.getContext("2d"),p=v(function(e){function t(){u=h=null,f.clearRect(0,0,r.width,r.height),w.clear(),a(),e()}u=x.frame(function e(){s&&(r.width!==i.width||r.height!==i.height)&&(r.width=l.width=i.width,r.height=l.height=i.height),r.width||r.height||(c(l),r.width=l.width,r.height=l.height),f.clearRect(0,0,r.width,r.height),(d=d.filter(function(e){return function(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var r,s,i,n,a,o,l,u,h,c,d,f,p,m,g,b,v=t.tick++/t.totalTicks,x=t.x+t.random*t.tiltCos,_=t.y+t.random*t.tiltSin,k=t.wobbleX+t.random*t.tiltCos,S=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-v)+")",e.beginPath(),y&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix)){e.fill((r=t.shape.path,s=t.shape.matrix,i=t.x,n=t.y,a=.1*Math.abs(k-x),o=.1*Math.abs(S-_),l=Math.PI/10*t.wobble,u=new Path2D(r),(h=new Path2D).addPath(u,new DOMMatrix(s)),(c=new Path2D).addPath(h,new DOMMatrix([Math.cos(l)*a,Math.sin(l)*a,-Math.sin(l)*o,Math.cos(l)*o,i,n])),c))}else if("bitmap"===t.shape.type){var T=Math.PI/10*t.wobble,E=.1*Math.abs(k-x),A=.1*Math.abs(S-_),j=t.shape.bitmap.width*t.scalar,P=t.shape.bitmap.height*t.scalar,R=new DOMMatrix([Math.cos(T)*E,Math.sin(T)*E,-Math.sin(T)*A,Math.cos(T)*A,t.x,t.y]);R.multiplySelf(new DOMMatrix(t.shape.matrix));var C=e.createPattern(w.transform(t.shape.bitmap),"no-repeat");C.setTransform(R),e.globalAlpha=1-v,e.fillStyle=C,e.fillRect(t.x-j/2,t.y-P/2,j,P),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(k-x)*t.ovalScalar,Math.abs(S-_)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):(d=t.x,f=t.y,p=Math.abs(k-x)*t.ovalScalar,m=Math.abs(S-_)*t.ovalScalar,g=Math.PI/10*t.wobble,b=2*Math.PI,e.save(),e.translate(d,f),e.rotate(g),e.scale(p,m),e.arc(0,0,1,0,b,void 0),e.restore());else if("star"===t.shape)for(var O=Math.PI/2*3,I=4*t.scalar,N=8*t.scalar,$=t.x,M=t.y,D=5,U=Math.PI/5;D--;)$=t.x+Math.cos(O)*N,M=t.y+Math.sin(O)*N,e.lineTo($,M),O+=U,$=t.x+Math.cos(O)*I,M=t.y+Math.sin(O)*I,e.lineTo($,M),O+=U;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(_)),e.lineTo(Math.floor(k),Math.floor(S)),e.lineTo(Math.floor(x),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}(f,e)})).length?u=x.frame(e):t()}),h=t}),(n={addFettis:function(e){return d=d.concat(e),p},canvas:l,promise:p,reset:function(){u&&x.cancel(u),h&&h()}}).promise)}(r,b,k)}return p.reset=function(){h&&h.reset(),n&&n.reset()},p}function O(){return m||(m=C(null,{useWorker:!0,resize:!0})),m}r.exports=function(){return O().apply(this,arguments)},r.exports.reset=function(){O().reset()},r.exports.create=C,r.exports.shapeFromPath=function(e){if(!y)throw Error("path confetti are not supported in this browser");"string"==typeof e?s=e:(s=e.path,i=e.matrix);var t=new Path2D(s),r=document.createElement("canvas").getContext("2d");if(!i){for(var s,i,n,a,o=1e3,l=1e3,u=0,h=0,c=0;c<1e3;c+=2)for(var d=0;d<1e3;d+=2)r.isPointInPath(t,c,d,"nonzero")&&(o=Math.min(o,c),l=Math.min(l,d),u=Math.max(u,c),h=Math.max(h,d));n=u-o;var f=Math.min(10/n,10/(a=h-l));i=[f,0,0,f,-Math.round(n/2+o)*f,-Math.round(a/2+l)*f]}return{type:"path",path:s,matrix:i}},r.exports.shapeFromText=function(e){var t,r=1,s="#000000",i='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,r="scalar"in e?e.scalar:r,i="fontFamily"in e?e.fontFamily:i,s="color"in e?e.color:s);var n=10*r,a=""+n+"px "+i,o=new OffscreenCanvas(n,n),l=o.getContext("2d");l.font=a;var u=l.measureText(t),h=Math.ceil(u.actualBoundingBoxRight+u.actualBoundingBoxLeft),c=Math.ceil(u.actualBoundingBoxAscent+u.actualBoundingBoxDescent),d=u.actualBoundingBoxLeft+2,f=u.actualBoundingBoxAscent+2;h+=4,c+=4,(l=(o=new OffscreenCanvas(h,c)).getContext("2d")).font=a,l.fillStyle=s,l.fillText(t,d,f);var p=1/r;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[p,0,0,p,-h*p/2,-c*p/2]}}}(function(){return"u">typeof window?window:"u">typeof self?self:this||{}}(),nG,!1);let nH=nG.exports;nG.exports.create;let nJ=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),nY=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var nX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let nZ=(0,R.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:n,iconNode:a,...o},l)=>(0,R.createElement)("svg",{ref:l,...nX,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:nJ("lucide",i),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(o)&&{"aria-hidden":"true"},...o},[...a.map(([e,t])=>(0,R.createElement)(e,t)),...Array.isArray(n)?n:[n]])),nQ=(e,t)=>{let r=(0,R.forwardRef)(({className:r,...s},i)=>(0,R.createElement)(nZ,{ref:i,iconNode:t,className:nJ(`lucide-${nY(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...s}));return r.displayName=nY(e),r},n0=nQ("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),n1=nQ("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),n2=nQ("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),n5=nQ("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var n3=e.i(81753);class n6 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class n4 extends n6{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class n8 extends n6{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class n9 extends n6{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(o=y||(y={})).Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2";function n7(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)0>t.indexOf(s[i])&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]]);return r}"function"==typeof SuppressedError&&SuppressedError;class ae{constructor(e,{headers:t={},customFetch:r,region:s=y.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){var t,r,s,i;return t=this,r=arguments,s=void 0,i=function*(e,t={}){var r;let s,i;try{let n,{headers:a,method:o,body:l,signal:u,timeout:h}=t,c={},{region:d}=t;d||(d=this.region);let f=new URL(`${this.url}/${e}`);d&&"any"!==d&&(c["x-region"]=d,f.searchParams.set("forceFunctionRegion",d)),l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?"u">typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",n=l):"string"==typeof l?(c["Content-Type"]="text/plain",n=l):"u">typeof FormData&&l instanceof FormData?n=l:(c["Content-Type"]="application/json",n=JSON.stringify(l)):n=!l||"string"==typeof l||"u">typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer||"u">typeof FormData&&l instanceof FormData?l:JSON.stringify(l);let p=u;h&&(i=new AbortController,s=setTimeout(()=>i.abort(),h),u?(p=i.signal,u.addEventListener("abort",()=>i.abort())):p=i.signal);let m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:n,signal:p}).catch(e=>{throw new n4(e)}),g=m.headers.get("x-relay-error");if(g&&"true"===g)throw new n8(m);if(!m.ok)throw new n9(m);let y=(null!=(r=m.headers.get("Content-Type"))?r:"text/plain").split(";")[0].trim();return{data:"application/json"===y?yield m.json():"application/octet-stream"===y||"application/pdf"===y?yield m.blob():"text/event-stream"===y?m:"multipart/form-data"===y?yield m.formData():yield m.text(),error:null,response:m}}catch(e){return{data:null,error:e,response:e instanceof n9||e instanceof n8?e.context:void 0}}finally{s&&clearTimeout(s)}},new(s||(s=Promise))(function(e,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function o(e){try{l(i.throw(e))}catch(e){n(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof s?r:new s(function(e){e(r)})).then(a,o)}l((i=i.apply(t,r||[])).next())})}}var at=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ar=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!=(t=e.shouldThrowOnError)&&t,this.signal=e.signal,this.isMaybeSingle=null!=(r=e.isMaybeSingle)&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,i,n;let a=null,o=null,l=null,u=e.status,h=e.statusText;if(e.ok){if("HEAD"!==r.method){let t=await e.text();""===t||(o="text/csv"===r.headers.get("Accept")||r.headers.get("Accept")&&(null==(i=r.headers.get("Accept"))?void 0:i.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}let n=null==(t=r.headers.get("Prefer"))?void 0:t.match(/count=(exact|planned|estimated)/),c=null==(s=e.headers.get("content-range"))?void 0:s.split("/");n&&c&&c.length>1&&(l=parseInt(c[1])),r.isMaybeSingle&&"GET"===r.method&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,u=406,h="Not Acceptable"):o=1===o.length?o[0]:null)}else{let t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(o=[],a=null,u=200,h="OK")}catch(r){404===e.status&&""===t?(u=204,h="No Content"):a={message:t}}if(a&&r.isMaybeSingle&&(null==a||null==(n=a.details)?void 0:n.includes("0 rows"))&&(a=null,u=200,h="OK"),a&&r.shouldThrowOnError)throw new at(a)}return{error:a,data:o,count:l,status:u,statusText:h}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,r,s,i,n,a;let o="",l=null==e?void 0:e.cause;if(l){let t=null!=(r=null==l?void 0:l.message)?r:"",a=null!=(s=null==l?void 0:l.code)?s:"";o=`${null!=(i=null==e?void 0:e.name)?i:"FetchError"}: ${null==e?void 0:e.message}

Caused by: ${null!=(n=null==l?void 0:l.name)?n:"Error"}: ${t}`,a&&(o+=` (${a})`),(null==l?void 0:l.stack)&&(o+=`
${l.stack}`)}else o=null!=(a=null==e?void 0:e.stack)?a:"";return{error:{message:`${null!=(t=null==e?void 0:e.name)?t:"FetchError"}: ${null==e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},as=class extends ar{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){let n=i?`${i}.order`:"order",a=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){let i=void 0===s?"offset":`${s}.offset`,n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:n="text"}={}){var a;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!=(a=this.headers.get("Accept"))?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};let ai=RegExp("[,()]");var an=class extends as{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&ai.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&ai.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";"plain"===s?i="pl":"phrase"===s?i="ph":"websearch"===s&&(i="w");let n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},aa=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:r=!1,count:s}=null!=t?t:{},i=!1,n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join(""),{url:a,headers:o}=this.cloneRequestState();return a.searchParams.set("select",n),s&&o.append("Prefer",`count=${s}`),new an({method:r?"HEAD":"GET",url:a,headers:o,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;let{url:i,headers:n}=this.cloneRequestState();if(t&&n.append("Prefer",`count=${t}`),r||n.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);i.searchParams.set("columns",e.join(","))}}return new an({method:"POST",url:i,headers:n,schema:this.schema,body:e,fetch:null!=(s=this.fetch)?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var n;let{url:a,headers:o}=this.cloneRequestState();if(o.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&a.searchParams.set("on_conflict",t),s&&o.append("Prefer",`count=${s}`),i||o.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);a.searchParams.set("columns",e.join(","))}}return new an({method:"POST",url:a,headers:o,schema:this.schema,body:e,fetch:null!=(n=this.fetch)?n:fetch})}update(e,{count:t}={}){var r;let{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new an({method:"PATCH",url:s,headers:i,schema:this.schema,body:e,fetch:null!=(r=this.fetch)?r:fetch})}delete({count:e}={}){var t;let{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new an({method:"DELETE",url:r,headers:s,schema:this.schema,fetch:null!=(t=this.fetch)?t:fetch})}},ao=class e{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){if(!e||"string"!=typeof e||""===e.trim())throw Error("Invalid relation name: relation must be a non-empty string.");return new aa(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){var n;let a,o,l=new URL(`${this.url}/rpc/${e}`),u=e=>null!==e&&"object"==typeof e&&(!Array.isArray(e)||e.some(u)),h=r&&Object.values(t).some(u);h?(a="POST",o=t):r||s?(a=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(a="POST",o=t);let c=new Headers(this.headers);return h?c.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&c.set("Prefer",`count=${i}`),new an({method:a,url:l,headers:c,schema:this.schemaName,body:o,fetch:null!=(n=this.fetch)?n:fetch})}};let al=class{static detectEnvironment(){var t;if("u">typeof WebSocket)return{type:"native",constructor:WebSocket};if("u">typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==e.g.WebSocket)return{type:"native",constructor:e.g.WebSocket};if("u">typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("u">typeof globalThis&&globalThis.EdgeRuntime||"u">typeof navigator&&(null==(t=navigator.userAgent)?void 0:t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let r=globalThis.process;if(r){let e=r.versions;if(e&&e.node){let t=parseInt(e.node.replace(/^v/,"").split(".")[0]);return t>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},au="2.0.0";(l=b||(b={}))[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed",(u=v||(v={})).closed="closed",u.errored="errored",u.joined="joined",u.joining="joining",u.leaving="leaving",(h=w||(w={})).close="phx_close",h.error="phx_error",h.join="phx_join",h.reply="phx_reply",h.leave="phx_leave",h.access_token="access_token",(x||(x={})).websocket="websocket",(c=_||(_={})).Connecting="connecting",c.Open="open",c.Closing="closing",c.Closed="closed";class ah{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){return e.event!==this.BROADCAST_EVENT||e.payload instanceof ArrayBuffer||"string"!=typeof e.payload.event?t(JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload])):t(this._binaryEncodeUserBroadcastPush(e))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null==(t=e.payload)?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;let s=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;let s=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:{},i=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(e,t,r){let s=e.topic,i=null!=(f=e.ref)?f:"",n=null!=(p=e.join_ref)?p:"",a=e.payload.event,o=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},l=0===Object.keys(o).length?"":JSON.stringify(o);if(n.length>255)throw Error(`joinRef length ${n.length} exceeds maximum of 255`);if(i.length>255)throw Error(`ref length ${i.length} exceeds maximum of 255`);if(s.length>255)throw Error(`topic length ${s.length} exceeds maximum of 255`);if(a.length>255)throw Error(`userEvent length ${a.length} exceeds maximum of 255`);if(l.length>255)throw Error(`metadata length ${l.length} exceeds maximum of 255`);let u=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+s.length+a.length+l.length,h=new ArrayBuffer(this.HEADER_LENGTH+u),c=new DataView(h),d=0;c.setUint8(d++,this.KINDS.userBroadcastPush),c.setUint8(d++,n.length),c.setUint8(d++,i.length),c.setUint8(d++,s.length),c.setUint8(d++,a.length),c.setUint8(d++,l.length),c.setUint8(d++,t),Array.from(n,e=>c.setUint8(d++,e.charCodeAt(0))),Array.from(i,e=>c.setUint8(d++,e.charCodeAt(0))),Array.from(s,e=>c.setUint8(d++,e.charCodeAt(0))),Array.from(a,e=>c.setUint8(d++,e.charCodeAt(0))),Array.from(l,e=>c.setUint8(d++,e.charCodeAt(0)));var f,p,m=new Uint8Array(h.byteLength+r.byteLength);return m.set(new Uint8Array(h),0),m.set(new Uint8Array(r),h.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e))return t(this._binaryDecode(e));if("string"==typeof e){let[r,s,i,n,a]=JSON.parse(e);return t({join_ref:r,ref:s,topic:i,event:n,payload:a})}return t({})}_binaryDecode(e){let t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,s)}_decodeUserBroadcast(e,t,r){let s=t.getUint8(1),i=t.getUint8(2),n=t.getUint8(3),a=t.getUint8(4),o=this.HEADER_LENGTH+4,l=r.decode(e.slice(o,o+s));o+=s;let u=r.decode(e.slice(o,o+i));o+=i;let h=r.decode(e.slice(o,o+n));o+=n;let c=e.slice(o,e.byteLength),d=a===this.JSON_ENCODING?JSON.parse(r.decode(c)):c,f={type:this.BROADCAST_EVENT,event:u,payload:d};return n>0&&(f.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||(null==(t=null==e?void 0:e.constructor)?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class ac{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(d=k||(k={})).abstime="abstime",d.bool="bool",d.date="date",d.daterange="daterange",d.float4="float4",d.float8="float8",d.int2="int2",d.int4="int4",d.int4range="int4range",d.int8="int8",d.int8range="int8range",d.json="json",d.jsonb="jsonb",d.money="money",d.numeric="numeric",d.oid="oid",d.reltime="reltime",d.text="text",d.time="time",d.timestamp="timestamp",d.timestamptz="timestamptz",d.timetz="timetz",d.tsrange="tsrange",d.tstzrange="tstzrange";let ad=(e,t,r={})=>{var s;let i=null!=(s=r.skipTypes)?s:[];return t?Object.keys(t).reduce((r,s)=>(r[s]=af(s,e,t,i),r),{}):{}},af=(e,t,r,s)=>{let i=t.find(t=>t.name===e),n=null==i?void 0:i.type,a=r[e];return n&&!s.includes(n)?ap(n,a):am(a)},ap=(e,t)=>{if("_"===e.charAt(0))return av(t,e.slice(1,e.length));switch(e){case k.bool:return ag(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return ay(t);case k.json:case k.jsonb:return ab(t);case k.timestamp:return aw(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:default:return am(t)}},am=e=>e,ag=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ay=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ab=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e},av=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s,i=e.slice(1,r);try{s=JSON.parse("["+i+"]")}catch(e){s=i?i.split(","):[]}return s.map(e=>ap(t,e))}return e},aw=e=>"string"==typeof e?e.replace(" ","T"):e,ax=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class a_{constructor(e,t,r={},s=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(f=S||(S={})).SYNC="sync",f.JOIN="join",f.LEAVE="leave";class ak{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ak.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=ak.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=ak.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){let i=this.cloneDeep(e),n=this.transformState(t),a={},o={};return this.map(i,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{let r=i[e];if(r){let s=t.map(e=>e.presence_ref),i=r.map(e=>e.presence_ref),n=t.filter(e=>0>i.indexOf(e.presence_ref)),l=r.filter(e=>0>s.indexOf(e.presence_ref));n.length>0&&(a[e]=n),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:o},r,s)}static syncDiff(e,t,r,s){let{joins:i,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(t,s)=>{var i;let n=null!=(i=e[t])?i:[];if(e[t]=this.cloneDeep(s),n.length>0){let r=e[t].map(e=>e.presence_ref),s=n.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...s)}r(t,n,s)}),this.map(n,(t,r)=>{let i=e[t];if(!i)return;let n=r.map(e=>e.presence_ref);i=i.filter(e=>0>n.indexOf(e.presence_ref)),e[t]=i,s(t,i,r),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let s=e[r];return"metas"in s?t[r]=s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(p=T||(T={})).ALL="*",p.INSERT="INSERT",p.UPDATE="UPDATE",p.DELETE="DELETE",(m=E||(E={})).BROADCAST="broadcast",m.PRESENCE="presence",m.POSTGRES_CHANGES="postgres_changes",m.SYSTEM="system",(g=A||(A={})).SUBSCRIBED="SUBSCRIBED",g.TIMED_OUT="TIMED_OUT",g.CLOSED="CLOSED",g.CHANNEL_ERROR="CHANNEL_ERROR";class aS{constructor(e,t={config:{}},r){var s,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=v.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new a_(this,w.join,this.params,this.timeout),this.rejoinTimer=new ac(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=v.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=v.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=v.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=v.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=v.errored,this.rejoinTimer.scheduleTimeout())}),this._on(w.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ak(this),this.broadcastEndpointURL=ax(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(i=null==(s=this.params.config)?void 0:s.broadcast)?void 0:i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==v.closed){let{config:{broadcast:n,presence:a,private:o}}=this.params,l=null!=(s=null==(r=this.bindings.postgres_changes)?void 0:r.map(e=>e.filter))?s:[],u=!!this.bindings[E.PRESENCE]&&this.bindings[E.PRESENCE].length>0||(null==(i=this.params.config.presence)?void 0:i.enabled)===!0,h={},c={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(A.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(A.CLOSED)),this.updateJoinPayload(Object.assign({config:c},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket._isManualToken()||this.socket.setAuth(),void 0===t){null==e||e(A.SUBSCRIBED);return}{let s=this.bindings.postgres_changes,i=null!=(r=null==s?void 0:s.length)?r:0,n=[];for(let r=0;r<i;r++){let i=s[r],{filter:{event:a,schema:o,table:l,filter:u}}=i,h=t&&t[r];if(h&&h.event===a&&aS.isFilterValueEqual(h.schema,o)&&aS.isFilterValueEqual(h.table,l)&&aS.isFilterValueEqual(h.filter,u))n.push(Object.assign(Object.assign({},i),{id:h.id}));else{this.unsubscribe(),this.state=v.errored,null==e||e(A.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=n,e&&e(A.SUBSCRIBED);return}}).receive("error",t=>{this.state=v.errored,null==e||e(A.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(A.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===v.joined&&e===E.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;if(null==t)return Promise.reject("Payload is required for httpSend()");let i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);let n={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,n,null!=(s=r.timeout)?s:this.timeout);if(202===a.status)return{success:!0};let o=a.statusText;try{let e=await a.json();o=e.error||e.message||o}catch(e){}return Promise.reject(Error(o))}async send(e,t={}){var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,i,n;let a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null==(n=null==(i=null==(s=this.params)?void 0:s.config)?void 0:i.broadcast)?void 0:n.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:i,payload:n}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let o={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:n,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!=(r=t.timeout)?r:this.timeout);return await (null==(s=e.body)?void 0:s.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=v.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(w.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{(r=new a_(this,w.leave,{},e)).receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=v.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){let s=new AbortController,i=setTimeout(()=>s.abort(),r),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),n}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new a_(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;let n=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:u}=w;if(r&&[a,o,l,u].indexOf(n)>=0&&r!==this._joinRef())return;let h=this._onMessage(n,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null==(s=this.bindings.postgres_changes)||s.filter(e=>{var t,r,s;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(s=null==(r=e.filter)?void 0:r.event)?void 0:s.toLocaleLowerCase())===n}).map(e=>e.callback(h,r)):null==(i=this.bindings[n])||i.filter(e=>{var r,s,i,a,o,l;if(!["broadcast","presence","postgres_changes"].includes(n))return e.type.toLocaleLowerCase()===n;if("id"in e){let n=e.id,a=null==(r=e.filter)?void 0:r.event;return n&&(null==(s=t.ids)?void 0:s.includes(n))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null==(i=t.data)?void 0:i.type.toLocaleLowerCase()))}{let r=null==(o=null==(a=null==e?void 0:e.filter)?void 0:a.event)?void 0:o.toLocaleLowerCase();return"*"===r||r===(null==(l=null==t?void 0:t.event)?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof h&&"ids"in h){let e=h.data,{schema:t,table:r,commit_timestamp:s,type:i,errors:n}=e;h=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:s,eventType:i,new:{},old:{},errors:n}),this._getPayloadRecords(e))}e.callback(h,r)})}_isClosed(){return this.state===v.closed}_isJoined(){return this.state===v.joined}_isJoining(){return this.state===v.joining}_isLeaving(){return this.state===v.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null==(s=e.type)?void 0:s.toLocaleLowerCase())===r&&aS.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(null!=e?e:void 0)===(null!=t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(w.close,{},e)}_onError(e){this._on(w.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=v.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=ad(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=ad(e.columns,e.old_record)),t}}let aT=()=>{},aE=[1e3,2e3,5e3,1e4],aA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aj{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=aT,this.ref=0,this.reconnectTimer=null,this.vsn=au,this.logger=aT,this.conn=null,this.sendBuffer=[],this.serializer=new ah,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null==(r=null==t?void 0:t.params)?void 0:r.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${x.websocket}`,this.httpEndpoint=ax(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=al.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;if(e.includes("Node.js"))throw Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case b.connecting:return _.Connecting;case b.open:return _.Open;case b.closing:return _.Closing;default:return _.Closed}}isConnected(){return this.connectionState()===_.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){let r=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===r);if(s)return s;{let r=new aS(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){let{topic:t,event:r,payload:s,ref:i}=e,n=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,null==(e=this.conn)||e.close(1e3,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||null==(e=this.reconnectTimer)||e.scheduleTimeout()},100);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event&&e.ref&&e.ref===this.pendingHeartbeatRef){let t=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error",t)}catch(e){this.log("error","error in heartbeat callback",e)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:t,event:r,payload:s,ref:i}=e,n=i?`(${i})`:"",a=s.status||"";this.log("receive",`${a} ${t} ${r} ${n}`.trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null==(t=this.reconnectTimer)||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===b.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===b.open||this.conn.readyState===b.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(t=this.reconnectTimer)||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(e){this.log("error","error in heartbeat callback",e)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(w.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([aA],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(e){this.log("error","Error fetching access token from callback",e),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{let r={access_token:t,version:"realtime-js/2.93.3"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(w.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new ac(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,n,a,o,l,u,h,c,d;switch(this.transport=null!=(t=null==e?void 0:e.transport)?t:null,this.timeout=null!=(r=null==e?void 0:e.timeout)?r:1e4,this.heartbeatIntervalMs=null!=(s=null==e?void 0:e.heartbeatIntervalMs)?s:25e3,this.worker=null!=(i=null==e?void 0:e.worker)&&i,this.accessToken=null!=(n=null==e?void 0:e.accessToken)?n:null,this.heartbeatCallback=null!=(a=null==e?void 0:e.heartbeatCallback)?a:aT,this.vsn=null!=(o=null==e?void 0:e.vsn)?o:au,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(l=null==e?void 0:e.reconnectAfterMs)?l:e=>aE[e-1]||1e4,this.vsn){case"1.0.0":this.encode=null!=(u=null==e?void 0:e.encode)?u:(e,t)=>t(JSON.stringify(e)),this.decode=null!=(h=null==e?void 0:e.decode)?h:(e,t)=>t(JSON.parse(e));break;case au:this.encode=null!=(c=null==e?void 0:e.encode)?c:this.serializer.encode.bind(this.serializer),this.decode=null!=(d=null==e?void 0:e.decode)?d:this.serializer.decode.bind(this.serializer);break;default:throw Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("u">typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}var aP=e.i(84565),aR=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function aC(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}function aO(e){return e.join("\x1f")}var aI=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:aO(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){let r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aO(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aO(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aO(e.namespace)}`}),!0}catch(e){if(e instanceof aR&&404===e.status)return!1;throw e}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(e){if(e instanceof aR&&409===e.status)return;throw e}}};function aN(e){return e.join("\x1f")}var a$=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aN(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aN(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){let r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aN(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aN(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aN(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aN(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(e){if(e instanceof aR&&404===e.status)return!1;throw e}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof aR&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},aM=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=function(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:i,body:n,headers:a}){let o=function(e,t,r){let s=new URL(t,e);if(r)for(let[e,t]of Object.entries(r))void 0!==t&&s.searchParams.set(e,t);return s.toString()}(e.baseUrl,s,i),l=await aC(e.auth),u=await t(o,{method:r,headers:{...n?{"Content-Type":"application/json"}:{},...l,...a},body:n?JSON.stringify(n):void 0}),h=await u.text(),c=(u.headers.get("content-type")||"").includes("application/json"),d=c&&h?JSON.parse(h):h;if(!u.ok){let e=c?d:void 0,t=e?.error;throw new aR(t?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:u.status,headers:u.headers,data:d}}}}({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new aI(this.client,t),this.tableOps=new a$(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},aD=class extends Error{constructor(e,t="storage",r,s){super(e),this.__isStorageError=!0,this.namespace=t,this.name="vectors"===t?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=s}};function aU(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var aL=class extends aD{constructor(e,t,r,s="storage"){super(e,s,t,r),this.name="vectors"===s?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},aB=class extends aD{constructor(e,t,r="storage"){super(e,r),this.name="vectors"===r?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};let aV=e=>{if(Array.isArray(e))return e.map(e=>aV(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=aV(r)}),t};function aF(e){return(aF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function az(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function aW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?az(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=aF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=aF(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==aF(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):az(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let aq=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null==(t=e.error)?void 0:t.message)||JSON.stringify(e)},aK=async(e,t,r,s)=>{if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){let r=e.status||500;"function"==typeof e.json?e.json().then(e=>{let i=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new aL(aq(e),r,i,s))}).catch(()=>{t(new aL(e.statusText||`HTTP ${r} error`,r,r+"",s))}):t(new aL(e.statusText||`HTTP ${r} error`,r,r+"",s))}else t(new aB(aq(e),e,s))};async function aG(e,t,r,s,i,n,a){return new Promise((o,l)=>{let u;e(r,(u={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t||"HEAD"===t||!n||((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(u.headers=aW({"Content-Type":"application/json"},null==s?void 0:s.headers),u.body=JSON.stringify(n)):u.body=n,(null==s?void 0:s.duplex)&&(u.duplex=s.duplex)),aW(aW({},u),i))).then(e=>{if(!e.ok)throw e;if(null==s?void 0:s.noResolveJson)return e;if("vectors"===a){let t=e.headers.get("content-type");if("0"===e.headers.get("content-length")||204===e.status||!t||!t.includes("application/json"))return{}}return e.json()}).then(e=>o(e)).catch(e=>aK(e,l,s,a))})}function aH(e="storage"){return{get:async(t,r,s,i)=>aG(t,"GET",r,s,i,void 0,e),post:async(t,r,s,i,n)=>aG(t,"POST",r,i,n,s,e),put:async(t,r,s,i,n)=>aG(t,"PUT",r,i,n,s,e),head:async(t,r,s,i)=>aG(t,"HEAD",r,aW(aW({},s),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,r,s,i,n)=>aG(t,"DELETE",r,i,n,s,e)}}let{get:aJ,post:aY,put:aX,head:aZ,remove:aQ}=aH("storage"),a0=aH("vectors");var a1=class{constructor(e,t={},r,s="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){try{return{data:await e(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aU(e))return{data:null,error:e};throw e}}},a2=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aU(e))return{data:null,error:e};throw e}}};r=Symbol.toStringTag;var a5=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[r]="BlobDownloadBuilder",this.promise=null}asStream(){return new a2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await (await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aU(e))return{data:null,error:e};throw e}}};let a3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},a6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var a4=class extends a1{constructor(e,t={},r,s){super(e,t,s,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,s){var i=this;return i.handleOperation(async()=>{let n,a=aW(aW({},a6),s),o=aW(aW({},i.headers),"POST"===e&&{"x-upsert":String(a.upsert)}),l=a.metadata;"u">typeof Blob&&r instanceof Blob?((n=new FormData).append("cacheControl",a.cacheControl),l&&n.append("metadata",i.encodeMetadata(l)),n.append("",r)):"u">typeof FormData&&r instanceof FormData?((n=r).has("cacheControl")||n.append("cacheControl",a.cacheControl),l&&!n.has("metadata")&&n.append("metadata",i.encodeMetadata(l))):(n=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(l))),("u">typeof ReadableStream&&n instanceof ReadableStream||n&&"object"==typeof n&&"pipe"in n&&"function"==typeof n.pipe)&&!a.duplex&&(a.duplex="half")),(null==s?void 0:s.headers)&&(o=aW(aW({},o),s.headers));let u=i._removeEmptyFolders(t),h=i._getFinalPath(u),c=await ("PUT"==e?aX:aY)(i.fetch,`${i.url}/object/${h}`,n,aW({headers:o},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{path:u,id:c.Id,fullPath:c.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){var i=this;let n=i._removeEmptyFolders(e),a=i._getFinalPath(n),o=new URL(i.url+`/object/upload/sign/${a}`);return o.searchParams.set("token",t),i.handleOperation(async()=>{let e,t=aW({upsert:a6.upsert},s),a=aW(aW({},i.headers),{"x-upsert":String(t.upsert)});return"u">typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"u">typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType),{path:n,fullPath:(await aX(i.fetch,o.toString(),e,{headers:a})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(e),i=aW({},r.headers);(null==t?void 0:t.upsert)&&(i["x-upsert"]="true");let n=await aY(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:i}),a=new URL(r.url+n.url),o=a.searchParams.get("token");if(!o)throw new aD("No token returned by API");return{signedUrl:a.toString(),path:e,token:o}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var s=this;return s.handleOperation(async()=>await aY(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:s.headers}))}async copy(e,t,r){var s=this;return s.handleOperation(async()=>({path:(await aY(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(e,t,r){var s=this;return s.handleOperation(async()=>{let i=s._getFinalPath(e),n=await aY(s.fetch,`${s.url}/object/sign/${i}`,aW({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:s.headers}),a=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{signedUrl:encodeURI(`${s.url}${n.signedURL}${a}`)}})}async createSignedUrls(e,t,r){var s=this;return s.handleOperation(async()=>{let i=await aY(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return i.map(e=>aW(aW({},e),{},{signedUrl:e.signedURL?encodeURI(`${s.url}${e.signedURL}${n}`):null}))})}download(e,t){let r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=s?`?${s}`:"",n=this._getFinalPath(e);return new a5(()=>aJ(this.fetch,`${this.url}/${r}/${n}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(e){var t=this;let r=t._getFinalPath(e);return t.handleOperation(async()=>aV(await aJ(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){let t=this._getFinalPath(e);try{return await aZ(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aU(e)&&e instanceof aB){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}getPublicUrl(e,t){let r=this._getFinalPath(e),s=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&s.push(i);let n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&s.push(a);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${r}${o}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await aQ(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var s=this;return s.handleOperation(async()=>{let i=aW(aW(aW({},a3),t),{},{prefix:e||""});return await aY(s.fetch,`${s.url}/object/list/${s.bucketId}`,i,{headers:s.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{let s=aW({},e);return await aY(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==aP.Buffer?aP.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};let a8={"X-Client-Info":"storage-js/2.93.3"};var a9=class extends a1{constructor(e,t={},r,s){const i=new URL(e);(null==s?void 0:s.useNewHostname)&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),super(i.href.replace(/\/$/,""),aW(aW({},a8),t),r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let r=t.listBucketOptionsToQueryString(e);return await aJ(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await aJ(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await aY(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await aX(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await aY(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await aQ(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},a7=class extends a1{constructor(e,t={},r){super(e.replace(/\/$/,""),aW(aW({},a8),t),r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await aY(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let r=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&r.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&r.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&r.set("search",e.search);let s=r.toString(),i=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return await aJ(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await aQ(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!(!(!e||"string"!=typeof e||0===e.length||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))throw new aD("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let r=new aM({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(e,t){let r=e[t];return"function"!=typeof r?r:async(...t)=>{try{return{data:await r.apply(e,t),error:null}}catch(e){if(s)throw e;return{data:null,error:e}}}}})}},oe=class extends a1{constructor(e,t={},r){super(e.replace(/\/$/,""),aW(aW({},a8),{},{"Content-Type":"application/json"},t),r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await a0.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await a0.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},ot=class extends a1{constructor(e,t={},r){super(e.replace(/\/$/,""),aW(aW({},a8),{},{"Content-Type":"application/json"},t),r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},or=class extends a1{constructor(e,t={},r){super(e.replace(/\/$/,""),aW(aW({},a8),{},{"Content-Type":"application/json"},t),r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await a0.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},os=class extends or{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new oi(this.url,this.headers,e,this.fetch)}async createBucket(e){return super.createBucket.call(this,e)}async getBucket(e){return super.getBucket.call(this,e)}async listBuckets(e={}){return super.listBuckets.call(this,e)}async deleteBucket(e){return super.deleteBucket.call(this,e)}},oi=class extends oe{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){return super.createIndex.call(this,aW(aW({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(e={}){return super.listIndexes.call(this,aW(aW({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return super.getIndex.call(this,this.vectorBucketName,e)}async deleteIndex(e){return super.deleteIndex.call(this,this.vectorBucketName,e)}index(e){return new on(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},on=class extends ot{constructor(e,t,r,s,i){super(e,t,i),this.vectorBucketName=r,this.indexName=s}async putVectors(e){return super.putVectors.call(this,aW(aW({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async getVectors(e){return super.getVectors.call(this,aW(aW({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async listVectors(e={}){return super.listVectors.call(this,aW(aW({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async queryVectors(e){return super.queryVectors.call(this,aW(aW({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async deleteVectors(e){return super.deleteVectors.call(this,aW(aW({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}},oa=class extends a9{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new a4(this.url,this.headers,e,this.fetch)}get vectors(){return new os(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new a7(this.url+"/iceberg",this.headers,this.fetch)}};let oo="2.93.3",ol={"X-Client-Info":`gotrue-js/${oo}`},ou="X-Supabase-Api-Version",oh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},oc=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class od extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function of(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class op extends od{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class om extends od{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class og extends od{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class oy extends og{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ob(e){return of(e)&&"AuthSessionMissingError"===e.name}class ov extends og{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ow extends og{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ox extends og{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class o_ extends og{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ok extends og{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class oS extends og{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function oT(e){return of(e)&&"AuthRetryableFetchError"===e.name}class oE extends og{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class oA extends og{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}let oj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oP=" 	\n\r=".split(""),oR=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<oP.length;t+=1)e[oP[t].charCodeAt(0)]=-2;for(let t=0;t<oj.length;t+=1)e[oj[t].charCodeAt(0)]=t;return e})();function oC(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;)r(oj[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)r(oj[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function oO(e,t,r){let s=oR[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else if(-2===s)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}function oI(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let t=0;t<e.length;t+=1)oO(e.charCodeAt(t),i,n);return t.join("")}function oN(e){let t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)oO(e.charCodeAt(t),r,s);return new Uint8Array(t)}function o$(e){let t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>oC(e,r,s)),oC(null,r,s),t.join("")}let oM=()=>"u">typeof window&&"u">typeof document,oD={tested:!1,writable:!1},oU=()=>{if(!oM())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(oD.tested)return oD.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),oD.tested=!0,oD.writable=!0}catch(e){oD.tested=!0,oD.writable=!1}return oD.writable},oL=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),oB=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},oV=async(e,t)=>{let r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}},oF=async(e,t)=>{await e.removeItem(t)};class oz{constructor(){this.promise=new oz.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function oW(e){let t=e.split(".");if(3!==t.length)throw new oA("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!oc.test(t[e]))throw new oA("JWT not in base64url format");return{header:JSON.parse(oI(t[0])),payload:JSON.parse(oI(t[1])),signature:oN(t[2]),raw:{header:t[0],payload:t[1]}}}async function oq(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function oK(e){return("0"+e.toString(16)).substr(-2)}async function oG(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>String.fromCharCode(e)).join("")}async function oH(e){return"u">typeof crypto&&void 0!==crypto.subtle&&"u">typeof TextEncoder?btoa(await oG(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e)}async function oJ(e,t,r=!1){let s=function(){let e=new Uint32Array(56);if("u"<typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,oK).join("")}(),i=s;r&&(i+="/PASSWORD_RECOVERY"),await oB(e,`${t}-code-verifier`,i);let n=await oH(s),a=s===n?"plain":"s256";return[n,a]}oz.promiseConstructor=Promise;let oY=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,oX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oZ(e){if(!oX.test(e))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function oQ(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){let e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function o0(e){return JSON.parse(JSON.stringify(e))}let o1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),o2=[502,503,504];async function o5(e){var t;let r,s;if(!("object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json))throw new oS(o1(e),0);if(o2.includes(e.status))throw new oS(o1(e),e.status);try{r=await e.json()}catch(e){throw new om(o1(e),e)}let i=function(e){let t=e.headers.get(ou);if(!t||!t.match(oY))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(i&&i.getTime()>=oh["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?s=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new oE(o1(r),e.status,(null==(t=r.weak_password)?void 0:t.reasons)||[]);else if("session_not_found"===s)throw new oy}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new oE(o1(r),e.status,r.weak_password.reasons);throw new op(o1(r),e.status||500,s)}async function o3(e,t,r,s){var i;let n=Object.assign({},null==s?void 0:s.headers);n[ou]||(n[ou]=oh["2024-01-01"].name),(null==s?void 0:s.jwt)&&(n.Authorization=`Bearer ${s.jwt}`);let a=null!=(i=null==s?void 0:s.query)?i:{};(null==s?void 0:s.redirectTo)&&(a.redirect_to=s.redirectTo);let o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await o6(e,t,r+o,{headers:n,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function o6(e,t,r,s,i,n){let a,o,l=(o={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==s?void 0:s.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),i)));try{a=await e(r,Object.assign({},l))}catch(e){throw console.error(e),new oS(o1(e),0)}if(a.ok||await o5(a),null==s?void 0:s.noResolveJson)return a;try{return await a.json()}catch(e){await o5(e)}}function o4(e){var t,r,s;let i=null;(s=e).access_token&&s.refresh_token&&s.expires_in&&(i=Object.assign({},e),e.expires_at||(i.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:i,user:null!=(t=e.user)?t:e},error:null}}function o8(e){let t=o4(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function o9(e){var t;return{data:{user:null!=(t=e.user)?t:e},error:null}}function o7(e){return{data:e,error:null}}function le(e){let{action_link:t,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n}=e;return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n},user:Object.assign({},n7(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function lt(e){return e}let lr=["global","local","others"];class ls{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=oL(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=lr[0]){if(0>lr.indexOf(t))throw Error(`@supabase/auth-js: Parameter scope must be one of ${lr.join(", ")}`);try{return await o3(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(of(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await o3(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:o9})}catch(e){if(of(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,r=n7(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null==r?void 0:r.newEmail,delete s.newEmail),await o3(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:le,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(of(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await o3(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:o9})}catch(e){if(of(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,r,s,i,n,a,o;try{let l={nextPage:null,lastPage:0,total:0},u=await o3(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(i=null==(s=null==e?void 0:e.perPage)?void 0:s.toString())?i:""},xform:lt});if(u.error)throw u.error;let h=await u.json(),c=null!=(n=u.headers.get("x-total-count"))?n:0,d=null!=(o=null==(a=u.headers.get("link"))?void 0:a.split(","))?o:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(c)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(e){if(of(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){oZ(e);try{return await o3(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:o9})}catch(e){if(of(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){oZ(e);try{return await o3(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:o9})}catch(e){if(of(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){oZ(e);try{return await o3(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:o9})}catch(e){if(of(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){oZ(e.userId);try{let{data:t,error:r}=await o3(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(of(e))return{data:null,error:e};throw e}}async _deleteFactor(e){oZ(e.userId),oZ(e.id);try{return{data:await o3(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(of(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){var t,r,s,i,n,a,o;try{let l={nextPage:null,lastPage:0,total:0},u=await o3(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(i=null==(s=null==e?void 0:e.perPage)?void 0:s.toString())?i:""},xform:lt});if(u.error)throw u.error;let h=await u.json(),c=null!=(n=u.headers.get("x-total-count"))?n:0,d=null!=(o=null==(a=u.headers.get("link"))?void 0:a.split(","))?o:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(c)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(e){if(of(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await o3(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(of(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await o3(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(of(e))return{data:null,error:e};throw e}}async _updateOAuthClient(e,t){try{return await o3(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(of(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await o3(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(of(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await o3(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(of(e))return{data:null,error:e};throw e}}}function li(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}let ln={debug:!!(globalThis&&oU()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class la extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class lo extends la{}async function ll(e,t,r){ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),ln.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(s){ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}if(0===t)throw ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new lo(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ln.debug)try{let e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}))}function lu(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}class lh extends Error{constructor({message:e,code:t,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!=(i=null!=s?s:r instanceof Error?r.name:void 0)?i:"Unknown Error",this.code=t}}class lc extends lh{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}let ld=new class{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function lf(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function lp(){var e,t;return!!(oM()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null==(e=null==navigator?void 0:navigator.credentials)?void 0:e.create)&&"function"==typeof(null==(t=null==navigator?void 0:navigator.credentials)?void 0:t.get))}async function lm(e){try{let t=await navigator.credentials.create(e);if(!t)return{data:null,error:new lc("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new lc("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){var r,s,i;let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new lh({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if((null==(r=n.authenticatorSelection)?void 0:r.requireResidentKey)===!0)return new lh({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});else if("conditional"===t.mediation&&(null==(s=n.authenticatorSelection)?void 0:s.userVerification)==="required")return new lh({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});else if((null==(i=n.authenticatorSelection)?void 0:i.userVerification)==="required")return new lh({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else if("InvalidStateError"===e.name)return new lh({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});else if("NotAllowedError"===e.name)return new lh({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("NotSupportedError"===e.name)return new lh(0===n.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!lf(t))return new lh({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rp.id!==t)return new lh({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new lh({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new lh({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new lh({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}async function lg(e){try{let t=await navigator.credentials.get(e);if(!t)return{data:null,error:new lc("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new lc("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){let{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new lh({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("NotAllowedError"===e.name)return new lh({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!lf(t))return new lh({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new lh({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new lh({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new lh({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}let ly={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},lb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lv(...e){let t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),s={};for(let i of e)if(i)for(let e in i){let n=i[e];if(void 0!==n)if(Array.isArray(n))s[e]=n;else if(r(n))s[e]=n;else if(t(n)){let r=s[e];t(r)?s[e]=lv(r,n):s[e]=lv(n)}else s[e]=n}return s}class lw{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},i){var n,a,o,l,u;try{let{data:h,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!h)return{data:null,error:c};let d=null!=s?s:ld.createNewAbortSignal();if("create"===h.webauthn.type){let{user:e}=h.webauthn.credential_options.publicKey;if(!e.name)if(r)e.name=`${e.id}:${r}`;else{let t=(await this.client.getUser()).data.user,r=(null==(n=null==t?void 0:t.user_metadata)?void 0:n.name)||(null==t?void 0:t.email)||(null==t?void 0:t.id)||"User";e.name=`${e.id}:${r}`}e.displayName||(e.displayName=e.name)}switch(h.webauthn.type){case"create":{let t=(a=h.webauthn.credential_options.publicKey,o=null==i?void 0:i.create,lv(ly,a,o||{})),{data:r,error:s}=await lm({publicKey:t,signal:d});if(r)return{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:r}},error:null};return{data:null,error:s}}case"request":{let t=(l=h.webauthn.credential_options.publicKey,u=null==i?void 0:i.request,lv(lb,l,u||{})),{data:r,error:s}=await lg(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:t,signal:d}));if(r)return{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:r}},error:null};return{data:null,error:s}}}}catch(e){if(of(e))return{data:null,error:e};return{data:null,error:new om("Unexpected error in challenge",e)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t="u">typeof window?window.location.hostname:void 0,rpOrigins:r="u">typeof window?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new od("rpId is required for WebAuthn authentication")};try{if(!lp())return{data:null,error:new om("Browser does not support WebAuthn",null)};let{data:n,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:i});if(!n)return{data:null,error:a};let{webauthn:o}=n;return this._verify({factorId:e,challengeId:n.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:r,credential_response:o.credential_response}})}catch(e){if(of(e))return{data:null,error:e};return{data:null,error:new om("Unexpected error in authenticate",e)}}}async _register({friendlyName:e,webauthn:{rpId:t="u">typeof window?window.location.hostname:void 0,rpOrigins:r="u">typeof window?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new od("rpId is required for WebAuthn registration")};try{if(!lp())return{data:null,error:new om("Browser does not support WebAuthn",null)};let{data:n,error:a}=await this._enroll({friendlyName:e});if(!n)return await this.client.mfa.listFactors().then(t=>{var r;return null==(r=t.data)?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:a};let{data:o,error:l}=await this._challenge({factorId:n.id,friendlyName:n.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:i});if(!o)return{data:null,error:l};return this._verify({factorId:n.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}})}catch(e){if(of(e))return{data:null,error:e};return{data:null,error:new om("Unexpected error in register",e)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"u">typeof self&&(self.globalThis=self)}let lx={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ol,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function l_(e,t,r){return await r()}let lk={};class lS{get jwks(){var e,t;return null!=(t=null==(e=lk[this.storageKey])?void 0:e.jwks)?t:{keys:[]}}set jwks(e){lk[this.storageKey]=Object.assign(Object.assign({},lk[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!=(t=null==(e=lk[this.storageKey])?void 0:e.cachedAt)?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){lk[this.storageKey]=Object.assign(Object.assign({},lk[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},lx),e);if(this.storageKey=i.storageKey,this.instanceID=null!=(t=lS.nextInstanceID[this.storageKey])?t:0,lS.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,"function"==typeof i.debug&&(this.logger=i.debug),this.instanceID>0&&oM()){const e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ls({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=oL(i.fetch),this.lock=i.lock||l_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&oM()&&(null==(r=null==globalThis?void 0:globalThis.navigator)?void 0:r.locks)?this.lock=ll:this.lock=l_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new lw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:oU()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=li(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=li(this.memoryStorage)),oM()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null==(s=this.broadcastChannel)||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e);try{await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}catch(e){this._debug("#broadcastChannel","error",e)}})}this.initialize().catch(e=>{this._debug("#initialize()","error",e)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${oo}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(oM()&&(t=function(e){let t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(e){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),oM()&&this.detectSessionInUrl&&"none"!==r){let{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){(this._debug("#_initialize()","error detecting session from URL",i),of(i)&&"AuthImplicitGrantRedirectError"===i.name)&&(null==(e=i.details)||e.code);return{error:i}}let{session:n,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",a),await this._saveSession(n),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){if(of(e))return this._returnResult({error:e});return this._returnResult({error:new om("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{let{data:i,error:n}=await o3(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(r=null==(t=null==e?void 0:e.options)?void 0:t.data)?r:{},gotrue_meta_security:{captcha_token:null==(s=null==e?void 0:e.options)?void 0:s.captchaToken}},xform:o4});if(n||!i)return this._returnResult({data:{user:null,session:null},error:n});let a=i.session,o=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),this._returnResult({data:{user:o,session:a},error:null})}catch(e){if(of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signUp(e){var t,r,s;try{let i;if("email"in e){let{email:r,password:s,options:n}=e,a=null,o=null;"pkce"===this.flowType&&([a,o]=await oJ(this.storage,this.storageKey)),i=await o3(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:r,password:s,data:null!=(t=null==n?void 0:n.data)?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:o},xform:o4})}else if("phone"in e){let{phone:t,password:n,options:a}=e;i=await o3(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!=(r=null==a?void 0:a.data)?r:{},channel:null!=(s=null==a?void 0:a.channel)?s:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:o4})}else throw new ow("You must provide either an email or phone number and a password");let{data:n,error:a}=i;if(a||!n)return await oF(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});let o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(await oF(this.storage,`${this.storageKey}-code-verifier`),of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithPassword(e){try{let t;if("email"in e){let{email:r,password:s,options:i}=e;t=await o3(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:o8})}else if("phone"in e){let{phone:r,password:s,options:i}=e;t=await o3(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:o8})}else throw new ow("You must provide either an email or phone number and a password");let{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){let e=new ov;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(e){if(of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null==(t=e.options)?void 0:t.redirectTo,scopes:null==(r=e.options)?void 0:r.scopes,queryParams:null==(s=e.options)?void 0:s.queryParams,skipBrowserRedirect:null==(i=e.options)?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,i,n,a,o,l,u,h,c,d;let f,p;if("message"in e)f=e.message,p=e.signature;else{let h,{chain:c,wallet:m,statement:g,options:y}=e;if(oM())if("object"==typeof m)h=m;else{let e=window;if("ethereum"in e&&"object"==typeof e.ethereum&&"request"in e.ethereum&&"function"==typeof e.ethereum.request)h=e.ethereum;else throw Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");h=m}let b=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href),v=await h.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let w=lu(v[0]),x=null==(r=null==y?void 0:y.signInWithEthereum)?void 0:r.chainId;x||(x=parseInt(await h.request({method:"eth_chainId"}),16)),f=function(e){var t;let{chainId:r,domain:s,expirationTime:i,issuedAt:n=new Date,nonce:a,notBefore:o,requestId:l,resources:u,scheme:h,uri:c,version:d}=e;if(!Number.isInteger(r))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!c)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==d)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(null==(t=e.statement)?void 0:t.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);let f=lu(e.address),p=h?`${h}://${s}`:s,m=e.statement?`${e.statement}
`:"",g=`${p} wants you to sign in with your Ethereum account:
${f}

${m}`,y=`URI: ${c}
Version: ${d}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${n.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),l&&(y+=`
Request ID: ${l}`),u){let e="\nResources:";for(let t of u){if(!t||"string"!=typeof t)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`
- ${t}`}y+=e}return`${g}
${y}`}({domain:b.host,address:w,statement:g,uri:b.href,version:"1",chainId:x,nonce:null==(s=null==y?void 0:y.signInWithEthereum)?void 0:s.nonce,issuedAt:null!=(n=null==(i=null==y?void 0:y.signInWithEthereum)?void 0:i.issuedAt)?n:new Date,expirationTime:null==(a=null==y?void 0:y.signInWithEthereum)?void 0:a.expirationTime,notBefore:null==(o=null==y?void 0:y.signInWithEthereum)?void 0:o.notBefore,requestId:null==(l=null==y?void 0:y.signInWithEthereum)?void 0:l.requestId,resources:null==(u=null==y?void 0:y.signInWithEthereum)?void 0:u.resources}),p=await h.request({method:"personal_sign",params:[(d=f,"0x"+Array.from(new TextEncoder().encode(d),e=>e.toString(16).padStart(2,"0")).join("")),w]})}try{let{data:t,error:r}=await o3(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:p},(null==(h=e.options)?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null==(c=e.options)?void 0:c.captchaToken}}:null),xform:o4});if(r)throw r;if(!t||!t.session||!t.user){let e=new ov;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSolana(e){var t,r,s,i,n,a,o,l,u,h,c,d;let f,p;if("message"in e)f=e.message,p=e.signature;else{let c,{chain:d,wallet:m,statement:g,options:y}=e;if(oM())if("object"==typeof m)c=m;else{let e=window;if("solana"in e&&"object"==typeof e.solana&&("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))c=e.solana;else throw Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");c=m}let b=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href);if("signIn"in c&&c.signIn){let e,t=await c.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==y?void 0:y.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),g?{statement:g}:null));if(Array.isArray(t)&&t[0]&&"object"==typeof t[0])e=t[0];else if(t&&"object"==typeof t&&"signedMessage"in t&&"signature"in t)e=t;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in e&&"signature"in e&&("string"==typeof e.signedMessage||e.signedMessage instanceof Uint8Array)&&e.signature instanceof Uint8Array)f="string"==typeof e.signedMessage?e.signedMessage:new TextDecoder().decode(e.signedMessage),p=e.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in c)||"function"!=typeof c.signMessage||!("publicKey"in c)||"object"!=typeof c||!c.publicKey||!("toBase58"in c.publicKey)||"function"!=typeof c.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${b.host} wants you to sign in with your Solana account:`,c.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${null!=(s=null==(r=null==y?void 0:y.signInWithSolana)?void 0:r.issuedAt)?s:new Date().toISOString()}`,...(null==(i=null==y?void 0:y.signInWithSolana)?void 0:i.notBefore)?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...(null==(n=null==y?void 0:y.signInWithSolana)?void 0:n.expirationTime)?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...(null==(a=null==y?void 0:y.signInWithSolana)?void 0:a.chainId)?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...(null==(o=null==y?void 0:y.signInWithSolana)?void 0:o.nonce)?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...(null==(l=null==y?void 0:y.signInWithSolana)?void 0:l.requestId)?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...(null==(h=null==(u=null==y?void 0:y.signInWithSolana)?void 0:u.resources)?void 0:h.length)?["Resources",...y.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");let e=await c.signMessage(new TextEncoder().encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{let{data:t,error:r}=await o3(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:o$(p)},(null==(c=e.options)?void 0:c.captchaToken)?{gotrue_meta_security:{captcha_token:null==(d=e.options)?void 0:d.captchaToken}}:null),xform:o4});if(r)throw r;if(!t||!t.session||!t.user){let e=new ov;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _exchangeCodeForSession(e){let t=await oV(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(null!=t?t:"").split("/");try{if(!r&&"pkce"===this.flowType)throw new ok;let{data:t,error:i}=await o3(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:o4});if(await oF(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!t||!t.session||!t.user){let e=new ov;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:i})}catch(e){if(await oF(this.storage,`${this.storageKey}-code-verifier`),of(e))return this._returnResult({data:{user:null,session:null,redirectType:null},error:e});throw e}}async signInWithIdToken(e){try{let{options:t,provider:r,token:s,access_token:i,nonce:n}=e,{data:a,error:o}=await o3(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:o4});if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!a||!a.session||!a.user){let e=new ov;return this._returnResult({data:{user:null,session:null},error:e})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:a,error:o})}catch(e){if(of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(e){var t,r,s,i,n;try{if("email"in e){let{email:s,options:i}=e,n=null,a=null;"pkce"===this.flowType&&([n,a]=await oJ(this.storage,this.storageKey));let{error:o}=await o3(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!=(t=null==i?void 0:i.data)?t:{},create_user:null==(r=null==i?void 0:i.shouldCreateUser)||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:n,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){let{phone:t,options:r}=e,{data:a,error:o}=await o3(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!=(s=null==r?void 0:r.data)?s:{},create_user:null==(i=null==r?void 0:r.shouldCreateUser)||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!=(n=null==r?void 0:r.channel)?n:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o})}throw new ow("You must provide either an email or phone number.")}catch(e){if(await oF(this.storage,`${this.storageKey}-code-verifier`),of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=null==(t=e.options)?void 0:t.redirectTo,i=null==(r=e.options)?void 0:r.captchaToken);let{data:n,error:a}=await o3(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:o4});if(a)throw a;if(!n)throw Error("An error occurred on token verification.");let o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSSO(e){var t,r,s,i,n;try{let a=null,o=null;"pkce"===this.flowType&&([a,o]=await oJ(this.storage,this.storageKey));let l=await o3(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!=(r=null==(t=e.options)?void 0:t.redirectTo)?r:void 0}),(null==(s=null==e?void 0:e.options)?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:o7});return(null==(i=l.data)?void 0:i.url)&&oM()&&!(null==(n=e.options)?void 0:n.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(e){if(await oF(this.storage,`${this.storageKey}-code-verifier`),of(e))return this._returnResult({data:null,error:e});throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new oy;let{error:s}=await o3(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:s,options:i}=e,{error:n}=await o3(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:n})}if("phone"in e){let{phone:r,type:s,options:i}=e,{data:n,error:a}=await o3(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:a})}throw new ow("You must provide either an email or phone number and a type")}catch(e){if(of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let t=null,r=await oV(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),null!==r&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};let s=!!t.expires_at&&1e3*t.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){let e=await oV(this.userStorage,this.storageKey+"-user");(null==e?void 0:e.user)?t.user=e.user:t.user=oQ()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){var e;let r={value:this.suppressGetSessionWarning};t.user=(e=t.user,new Proxy(e,{get:(e,t,s)=>{if("__isInsecureUserWarningProxy"===t)return!0;if("symbol"==typeof t){let r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r||"Symbol(nodejs.util.inspect.custom)"===r)return Reflect.get(e,t,s)}return r.value||"string"!=typeof t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(e,t,s)}})),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:i,error:n}=await this._callRefreshToken(t.refresh_token);if(n)return this._returnResult({data:{session:null},error:n});return this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;let t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{if(e)return await o3(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:o9});return await this._useSession(async e=>{var t,r,s;let{data:i,error:n}=e;if(n)throw n;return(null==(t=i.session)?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await o3(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(s=null==(r=i.session)?void 0:r.access_token)?s:void 0,xform:o9}):{data:{user:null},error:new oy}})}catch(e){if(of(e))return ob(e)&&(await this._removeSession(),await oF(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new oy;let n=s.session,a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await oJ(this.storage,this.storageKey));let{data:l,error:u}=await o3(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:n.access_token,xform:o9});if(u)throw u;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),this._returnResult({data:{user:n.user},error:null})})}catch(e){if(await oF(this.storage,`${this.storageKey}-code-verifier`),of(e))return this._returnResult({data:{user:null},error:e});throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oy;let t=Date.now()/1e3,r=t,s=!0,i=null,{payload:n}=oW(e.access_token);if(n.exp&&(s=(r=n.exp)<=t),s){let{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};i=t}else{let{data:s,error:n}=await this._getUser(e.access_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});i={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(e){if(of(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:s,error:i}=t;if(i)throw i;e=null!=(r=s.session)?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new oy;let{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(e,t){try{if(!oM())throw new ox("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ox(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new o_("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new ox("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new o_("No code detected.");let{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;let s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:n,expires_in:a,expires_at:o,token_type:l}=e;if(!i||!a||!n||!l)throw new ox("No session defined in URL");let u=Math.round(Date.now()/1e3),h=parseInt(a),c=u+h;o&&(c=parseInt(o));let d=c-u;1e3*d<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${h}s`);let f=c-h;u-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,c,u):u-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,c,u);let{data:p,error:m}=await this._getUser(i);if(m)throw m;let g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:c,refresh_token:n,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(e){if(of(e))return this._returnResult({data:{session:null,redirectType:null},error:e});throw e}}_isImplicitGrantCallback(e){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await oV(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:s,error:i}=t;if(i&&!ob(i))return this._returnResult({error:i});let n=null==(r=s.session)?void 0:r.access_token;if(n){let{error:t}=await this.admin.signOut(n,e);if(t&&!(of(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status||403===t.status)||ob(t)))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await oF(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){let t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{let{data:{session:s},error:i}=t;if(i)throw i;await (null==(r=this.stateChangeEmitters.get(e))?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(t){await (null==(s=this.stateChangeEmitters.get(e))?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;"pkce"===this.flowType&&([r,s]=await oJ(this.storage,this.storageKey,!0));try{return await o3(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(await oF(this.storage,`${this.storageKey}-code-verifier`),of(e))return this._returnResult({data:null,error:e});throw e}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!=(e=t.user.identities)?e:[]},error:null})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{let{data:r,error:s}=await this._useSession(async t=>{var r,s,i,n,a;let{data:o,error:l}=t;if(l)throw l;let u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null==(r=e.options)?void 0:r.redirectTo,scopes:null==(s=e.options)?void 0:s.scopes,queryParams:null==(i=e.options)?void 0:i.queryParams,skipBrowserRedirect:!0});return await o3(this.fetch,"GET",u,{headers:this.headers,jwt:null!=(a=null==(n=o.session)?void 0:n.access_token)?a:void 0})});if(s)throw s;return!oM()||(null==(t=e.options)?void 0:t.skipBrowserRedirect)||window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(t){if(of(t))return this._returnResult({data:{provider:e.provider,url:null},error:t});throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{let{error:s,data:{session:i}}=t;if(s)throw s;let{options:n,provider:a,token:o,access_token:l,nonce:u}=e,{data:h,error:c}=await o3(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(r=null==i?void 0:i.access_token)?r:void 0,body:{provider:a,id_token:o,access_token:l,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:o4});if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!h||!h.session||!h.user)return this._returnResult({data:{user:null,session:null},error:new ov});return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:c})}catch(e){if(await oF(this.storage,`${this.storageKey}-code-verifier`),of(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;let{data:i,error:n}=t;if(n)throw n;return await o3(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!=(s=null==(r=i.session)?void 0:r.access_token)?s:void 0})})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{var r,s;let i=Date.now();return await (r=async r=>(r>0&&await oq(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await o3(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:o4})),s=(e,t)=>{let r=200*Math.pow(2,e);return t&&oT(t)&&Date.now()+r-i<3e4},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{let t=await r(i);if(!s(i,null,t))return void e(t)}catch(e){if(!s(i,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),of(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),oM()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let s=await oV(this.storage,this.storageKey);if(s&&this.userStorage){let t=await oV(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!t&&(t={user:s.user},await oB(this.userStorage,this.storageKey+"-user",t)),s.user=null!=(e=null==t?void 0:t.user)?e:oQ()}else if(s&&!s.user&&!s.user){let e=await oV(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(s.user=e.user,await oF(this.storage,this.storageKey+"-user"),await oB(this.storage,this.storageKey,s)):s.user=oQ()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),null!==s&&await this._removeSession();return}let i=(null!=(t=s.expires_at)?t:1/0)*1e3-Date.now()<9e4;if(this._debug(r,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&s.refresh_token){let{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),oT(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{let{data:e,error:t}=await this._getUser(s.access_token);!t&&(null==e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(e){console.error("Error getting user data:",e),this._debug(r,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(e){this._debug(r,"error",e),console.error(e);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new oy;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new oz;let{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new oy;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let s={data:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(e){if(this._debug(s,"error",e),of(e)){let r={data:null,error:e};return oT(e)||await this._removeSession(),null==(t=this.refreshingDeferred)||t.resolve(r),r}throw null==(r=this.refreshingDeferred)||r.reject(e),e}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){let s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let s=[],i=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(e){s.push(e)}});if(await Promise.all(i),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await oF(this.storage,`${this.storageKey}-code-verifier`);let t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await oB(this.userStorage,this.storageKey+"-user",{user:t.user});let e=Object.assign({},t);delete e.user;let s=o0(e);await oB(this.storage,this.storageKey,s)}else{let e=o0(t);await oB(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await oF(this.storage,this.storageKey),await oF(this.storage,this.storageKey+"-code-verifier"),await oF(this.storage,this.storageKey+"-user"),this.userStorage&&await oF(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&oM()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e);let t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&"object"==typeof t&&"function"==typeof t.unref?t.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);let t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let s=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof la)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!oM()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{"visible"!==document.visibilityState?this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let s=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){let[e,t]=await oJ(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(r.toString())}if(null==r?void 0:r.queryParams){let e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:s,error:i}=t;return i?this._returnResult({data:null,error:i}):await o3(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null==(r=null==s?void 0:s.session)?void 0:r.access_token})})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;let{data:i,error:n}=t;if(n)return this._returnResult({data:null,error:n});let a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await o3(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null==(s=null==o?void 0:o.totp)?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r,s,i;let{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});let o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?(s=e.webauthn.credential_response,"toJSON"in s&&"function"==typeof s.toJSON?s.toJSON():{id:s.id,rawId:s.id,response:{attestationObject:o$(new Uint8Array(s.response.attestationObject)),clientDataJSON:o$(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:null!=(i=s.authenticatorAttachment)?i:void 0}):function(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();let r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:o$(new Uint8Array(s.authenticatorData)),clientDataJSON:o$(new Uint8Array(s.clientDataJSON)),signature:o$(new Uint8Array(s.signature)),userHandle:s.userHandle?o$(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!=(t=e.authenticatorAttachment)?t:void 0}}(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:u}=await o3(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;let{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});let n=await o3(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null==(r=null==s?void 0:s.session)?void 0:r.access_token});if(n.error)return n;let{data:a}=n;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential creation options are required");if("u">typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:r,excludeCredentials:s}=e,i=n7(e,["challenge","user","excludeCredentials"]),n=oN(t).buffer,a=Object.assign(Object.assign({},r),{id:oN(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:n,user:a});if(s&&s.length>0){o.excludeCredentials=Array(s.length);for(let e=0;e<s.length;e++){let t=s[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:oN(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential request options are required");if("u">typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:r}=e,s=n7(e,["challenge","allowCredentials"]),i=oN(t).buffer,n=Object.assign(Object.assign({},s),{challenge:i});if(r&&r.length>0){n.allowCredentials=Array(r.length);for(let e=0;e<r.length;e++){let t=r[e];n.allowCredentials[e]=Object.assign(Object.assign({},t),{id:oN(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return n}(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;let{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};let s={all:[],phone:[],totp:[],webauthn:[]};for(let r of null!=(e=null==t?void 0:t.factors)?e:[])s.all.push(r),"verified"===r.status&&s[r.factor_type].push(r);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,r,s,i;if(e)try{let{payload:s}=oW(e),i=null;s.aal&&(i=s.aal);let n=i,{data:{user:a},error:o}=await this.getUser(e);if(o)return this._returnResult({data:null,error:o});(null!=(r=null==(t=null==a?void 0:a.factors)?void 0:t.filter(e=>"verified"===e.status))?r:[]).length>0&&(n="aal2");let l=s.amr||[];return{data:{currentLevel:i,nextLevel:n,currentAuthenticationMethods:l},error:null}}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}let{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:o}=oW(n.access_token),l=null;o.aal&&(l=o.aal);let u=l;return(null!=(i=null==(s=n.user.factors)?void 0:s.filter(e=>"verified"===e.status))?i:[]).length>0&&(u="aal2"),{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:o.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{let{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await o3(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new oy})})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new oy});let n=await o3(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&oM()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new oy});let n=await o3(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&oM()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}async _listOAuthGrants(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await o3(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new oy})})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{let{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?(await o3(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new oy})})}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;let s=Date.now();if((r=this.jwks.keys.find(t=>t.kid===e))&&this.jwks_cached_at+6e5>s)return r;let{data:i,error:n}=await o3(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return i.keys&&0!==i.keys.length&&(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(t=>t.kid===e))?r:null}async getClaims(e,t={}){try{var r;let s,i=e;if(!i){let{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});i=e.session.access_token}let{header:n,payload:a,signature:o,raw:{header:l,payload:u}}=oW(i);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(a.exp);let h=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks);if(!h){let{error:e}=await this.getUser(i);if(e)throw e;return{data:{claims:a,header:n,signature:o},error:null}}let c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",h,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,(r=`${l}.${u}`,s=[],!function(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){let t=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(s,t)}}(r,e=>s.push(e)),new Uint8Array(s))))throw new oA("Invalid JWT signature");return{data:{claims:a,header:n,signature:o},error:null}}catch(e){if(of(e))return this._returnResult({data:null,error:e});throw e}}}lS.nextInstanceID={};let lT=lS,lE="";lE="u">typeof Deno?"deno":"u">typeof document?"web":"u">typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let lA={headers:{"X-Client-Info":`supabase-js-${lE}/2.93.3`}},lj={schema:"public"},lP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lR={};function lC(e){return(lC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function lI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lO(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=lC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=lC(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==lC(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var lN=class extends lT{constructor(e){super(e)}},l$=class{constructor(e,t,r){var s,i,n;this.supabaseUrl=e,this.supabaseKey=t;const a=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t.endsWith("/")?t:t+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,s;let{db:i,auth:n,realtime:a,global:o}=e,{db:l,auth:u,realtime:h,global:c}=t,d={db:lI(lI({},l),i),auth:lI(lI({},u),n),realtime:lI(lI({},h),a),storage:{},global:lI(lI(lI({},c),o),{},{headers:lI(lI({},null!=(r=null==c?void 0:c.headers)?r:{}),null!=(s=null==o?void 0:o.headers)?s:{})}),accessToken:async()=>""};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!=r?r:{},{db:lj,realtime:lR,auth:lI(lI({},lP),{},{storageKey:o}),global:lA});this.storageKey=null!=(s=l.auth.storageKey)?s:"",this.headers=null!=(i=l.global.headers)?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(n=l.auth)?n:{},this.headers,l.global.fetch),this.fetch=((e,t,r)=>{let s=r?(...e)=>r(...e):(...e)=>fetch(...e),i=Headers;return async(r,n)=>{var a;let o=null!=(a=await t())?a:e,l=new i(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(r,lI(lI({},n),{},{headers:l}))}})(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(lI({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new ao(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new oa(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new ae(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!=(e=null==(t=r.session)?void 0:t.access_token)?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:n,flowType:a,lock:o,debug:l,throwOnError:u},h,c){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lN({url:this.authUrl.href,headers:lI(lI({},d),h),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:o,debug:l,throwOnError:u,fetch:c,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new aj(this.realtimeUrl.href,lI(lI({},e),{},{params:lI(lI({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}};(function(){if("u">typeof window)return!1;let e=globalThis.process;if(!e)return!1;let t=e.version;if(null==t)return!1;let r=t.match(/^v(\d+)\./);return!!r&&18>=parseInt(r[1],10)})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let lM=new l$(eE.default.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder-url.supabase.co",eE.default.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder-key",i);function lD(){let e,t,r,s,i,n,a=(0,P.c)(8);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],a[0]=e):e=a[0];let[o,l]=(0,R.useState)(e);return a[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{l(Array.from({length:30}).map(lL))},r=[],a[1]=t,a[2]=r):(t=a[1],r=a[2]),(0,R.useEffect)(t,r),a[3]!==o?(s=o.map(lU),a[3]=o,a[4]=s):s=a[4],a[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,j.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-white/20 pointer-events-none"}),a[5]=i):i=a[5],a[6]!==s?(n=(0,j.jsxs)("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[s,i]}),a[6]=s,a[7]=n):n=a[7],n}function lU(e){return(0,j.jsx)(nD.div,{initial:{y:"110vh",opacity:0},animate:{y:"-10vh",opacity:[0,1,0]},transition:{duration:e.duration,repeat:1/0,delay:e.delay,ease:"linear"},className:"absolute text-pink-300",style:{left:`${e.left}%`},children:(0,j.jsx)(n1,{fill:"currentColor",size:40*e.scale,className:"opacity-60"})},e.id)}function lL(e,t){return{id:t,left:100*Math.random(),duration:10*Math.random()+10,delay:5*Math.random(),scale:.5*Math.random()+.5}}let lB=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),lV=[],lF=(e,t,r)=>{if(0==e.length-t)return r.classGroupId;let s=e[t],i=r.nextPart.get(s);if(i){let r=lF(e,t+1,i);if(r)return r}let n=r.validators;if(null===n)return;let a=0===t?e.join("-"):e.slice(t).join("-"),o=n.length;for(let e=0;e<o;e++){let t=n[e];if(t.validator(a))return t.classGroupId}},lz=(e,t)=>{let r=lB();for(let s in e)lW(e[s],r,s,t);return r},lW=(e,t,r,s)=>{let i=e.length;for(let n=0;n<i;n++)lq(e[n],t,r,s)},lq=(e,t,r,s)=>{"string"==typeof e?lK(e,t,r):"function"==typeof e?lG(e,t,r,s):lH(e,t,r,s)},lK=(e,t,r)=>{(""===e?t:lJ(t,e)).classGroupId=r},lG=(e,t,r,s)=>{lY(e)?lW(e(s),t,r,s):(null===t.validators&&(t.validators=[]),t.validators.push({classGroupId:r,validator:e}))},lH=(e,t,r,s)=>{let i=Object.entries(e),n=i.length;for(let e=0;e<n;e++){let[n,a]=i[e];lW(a,lJ(t,n),r,s)}},lJ=(e,t)=>{let r=e,s=t.split("-"),i=s.length;for(let e=0;e<i;e++){let t=s[e],i=r.nextPart.get(t);i||(i=lB(),r.nextPart.set(t,i)),r=i}return r},lY=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,lX=[],lZ=(e,t,r,s,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:s,isExternal:i}),lQ=/\s+/,l0=e=>{let t;if("string"==typeof e)return e;let r="";for(let s=0;s<e.length;s++)e[s]&&(t=l0(e[s]))&&(r&&(r+=" "),r+=t);return r},l1=[],l2=e=>{let t=t=>t[e]||l1;return t.isThemeGetter=!0,t},l5=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,l3=/^\((?:(\w[\w-]*):)?(.+)\)$/i,l6=/^\d+\/\d+$/,l4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,l8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,l9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,l7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ue=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ut=e=>l6.test(e),ur=e=>!!e&&!Number.isNaN(Number(e)),us=e=>!!e&&Number.isInteger(Number(e)),ui=e=>e.endsWith("%")&&ur(e.slice(0,-1)),un=e=>l4.test(e),ua=()=>!0,uo=e=>l8.test(e)&&!l9.test(e),ul=()=>!1,uu=e=>l7.test(e),uh=e=>ue.test(e),uc=e=>!uf(e)&&!uv(e),ud=e=>uE(e,uR,ul),uf=e=>l5.test(e),up=e=>uE(e,uC,uo),um=e=>uE(e,uO,ur),ug=e=>uE(e,uj,ul),uy=e=>uE(e,uP,uh),ub=e=>uE(e,uN,uu),uv=e=>l3.test(e),uw=e=>uA(e,uC),ux=e=>uA(e,uI),u_=e=>uA(e,uj),uk=e=>uA(e,uR),uS=e=>uA(e,uP),uT=e=>uA(e,uN,!0),uE=(e,t,r)=>{let s=l5.exec(e);return!!s&&(s[1]?t(s[1]):r(s[2]))},uA=(e,t,r=!1)=>{let s=l3.exec(e);return!!s&&(s[1]?t(s[1]):r)},uj=e=>"position"===e||"percentage"===e,uP=e=>"image"===e||"url"===e,uR=e=>"length"===e||"size"===e||"bg-size"===e,uC=e=>"length"===e,uO=e=>"number"===e,uI=e=>"family-name"===e,uN=e=>"shadow"===e,u$=((e,...t)=>{let r,s,i,n,a=e=>{let t=s(e);if(t)return t;let n=((e,t)=>{let{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:n}=t,a=[],o=e.trim().split(lQ),l="";for(let e=o.length-1;e>=0;e-=1){let t=o[e],{isExternal:u,modifiers:h,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:f}=r(t);if(u){l=t+(l.length>0?" "+l:l);continue}let p=!!f,m=s(p?d.substring(0,f):d);if(!m){if(!p||!(m=s(d))){l=t+(l.length>0?" "+l:l);continue}p=!1}let g=0===h.length?"":1===h.length?h[0]:n(h).join(":"),y=c?g+"!":g,b=y+m;if(a.indexOf(b)>-1)continue;a.push(b);let v=i(m,p);for(let e=0;e<v.length;++e){let t=v[e];a.push(y+t)}l=t+(l.length>0?" "+l:l)}return l})(e,r);return i(e,n),n};return n=o=>{var l;let u;return s=(r={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=Object.create(null),s=Object.create(null),i=(i,n)=>{r[i]=n,++t>e&&(t=0,s=r,r=Object.create(null))};return{get(e){let t=r[e];return void 0!==t?t:void 0!==(t=s[e])?(i(e,t),t):void 0},set(e,t){e in r?r[e]=t:i(e,t)}}})((l=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{prefix:t,experimentalParseClassName:r}=e,s=e=>{let t,r=[],s=0,i=0,n=0,a=e.length;for(let o=0;o<a;o++){let a=e[o];if(0===s&&0===i){if(":"===a){r.push(e.slice(n,o)),n=o+1;continue}if("/"===a){t=o;continue}}"["===a?s++:"]"===a?s--:"("===a?i++:")"===a&&i--}let o=0===r.length?e:e.slice(n),l=o,u=!1;return o.endsWith("!")?(l=o.slice(0,-1),u=!0):o.startsWith("!")&&(l=o.slice(1),u=!0),lZ(r,u,l,t&&t>n?t-n:void 0)};if(t){let e=t+":",r=s;s=t=>t.startsWith(e)?r(t.slice(e.length)):lZ(lX,!1,t,void 0,!0)}if(r){let e=s;s=t=>r({className:t,parseClassName:e})}return s})(l),sortModifiers:(u=new Map,l.orderSensitiveModifiers.forEach((e,t)=>{u.set(e,1e6+t)}),e=>{let t=[],r=[];for(let s=0;s<e.length;s++){let i=e[s],n="["===i[0],a=u.has(i);n||a?(r.length>0&&(r.sort(),t.push(...r),r=[]),t.push(i)):r.push(i)}return r.length>0&&(r.sort(),t.push(...r)),t}),...(e=>{let t=(e=>{let{theme:t,classGroups:r}=e;return lz(r,t)})(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]")){var r;let t,s,i;return -1===(r=e).slice(1,-1).indexOf(":")?void 0:(s=(t=r.slice(1,-1)).indexOf(":"),(i=t.slice(0,s))?"arbitrary.."+i:void 0)}let s=e.split("-"),i=+(""===s[0]&&s.length>1);return lF(s,i,t)},getConflictingClassGroupIds:(e,t)=>{if(t){let t=s[e],i=r[e];if(t){if(i){let e=Array(i.length+t.length);for(let t=0;t<i.length;t++)e[t]=i[t];for(let r=0;r<t.length;r++)e[i.length+r]=t[r];return e}return t}return i||lV}return r[e]||lV}}})(l)}).cache.get,i=r.cache.set,n=a,a(o)},(...e)=>n(((...e)=>{let t,r,s=0,i="";for(;s<e.length;)(t=e[s++])&&(r=l0(t))&&(i&&(i+=" "),i+=r);return i})(...e))})(()=>{let e=l2("color"),t=l2("font"),r=l2("text"),s=l2("font-weight"),i=l2("tracking"),n=l2("leading"),a=l2("breakpoint"),o=l2("container"),l=l2("spacing"),u=l2("radius"),h=l2("shadow"),c=l2("inset-shadow"),d=l2("text-shadow"),f=l2("drop-shadow"),p=l2("blur"),m=l2("perspective"),g=l2("aspect"),y=l2("ease"),b=l2("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],x=()=>[...w(),uv,uf],_=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],S=()=>[uv,uf,l],T=()=>[ut,"full","auto",...S()],E=()=>[us,"none","subgrid",uv,uf],A=()=>["auto",{span:["full",us,uv,uf]},us,uv,uf],j=()=>[us,"auto",uv,uf],P=()=>["auto","min","max","fr",uv,uf],R=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],C=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...S()],I=()=>[ut,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],N=()=>[e,uv,uf],$=()=>[...w(),u_,ug,{position:[uv,uf]}],M=()=>["no-repeat",{repeat:["","x","y","space","round"]}],D=()=>["auto","cover","contain",uk,ud,{size:[uv,uf]}],U=()=>[ui,uw,up],L=()=>["","none","full",u,uv,uf],B=()=>["",ur,uw,up],V=()=>["solid","dashed","dotted","double"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>[ur,ui,u_,ug],W=()=>["","none",p,uv,uf],q=()=>["none",ur,uv,uf],K=()=>["none",ur,uv,uf],G=()=>[ur,uv,uf],H=()=>[ut,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[un],breakpoint:[un],color:[ua],container:[un],"drop-shadow":[un],ease:["in","out","in-out"],font:[uc],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[un],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[un],shadow:[un],spacing:["px",ur],text:[un],"text-shadow":[un],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ut,uf,uv,g]}],container:["container"],columns:[{columns:[ur,uf,uv,o]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:x()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[us,"auto",uv,uf]}],basis:[{basis:[ut,"full","auto",o,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ur,ut,"auto","initial","none",uf]}],grow:[{grow:["",ur,uv,uf]}],shrink:[{shrink:["",ur,uv,uf]}],order:[{order:[us,"first","last","none",uv,uf]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...R(),"normal"]}],"justify-items":[{"justify-items":[...C(),"normal"]}],"justify-self":[{"justify-self":["auto",...C()]}],"align-content":[{content:["normal",...R()]}],"align-items":[{items:[...C(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...C(),{baseline:["","last"]}]}],"place-content":[{"place-content":R()}],"place-items":[{"place-items":[...C(),"baseline"]}],"place-self":[{"place-self":["auto",...C()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[o,"screen",...I()]}],"min-w":[{"min-w":[o,"screen","none",...I()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",r,uw,up]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,uv,um]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ui,uf]}],"font-family":[{font:[ux,uf,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,uv,uf]}],"line-clamp":[{"line-clamp":[ur,"none",uv,um]}],leading:[{leading:[n,...S()]}],"list-image":[{"list-image":["none",uv,uf]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",uv,uf]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:N()}],"text-color":[{text:N()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:[ur,"from-font","auto",uv,up]}],"text-decoration-color":[{decoration:N()}],"underline-offset":[{"underline-offset":[ur,"auto",uv,uf]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",uv,uf]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",uv,uf]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:$()}],"bg-repeat":[{bg:M()}],"bg-size":[{bg:D()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},us,uv,uf],radial:["",uv,uf],conic:[us,uv,uf]},uS,uy]}],"bg-color":[{bg:N()}],"gradient-from-pos":[{from:U()}],"gradient-via-pos":[{via:U()}],"gradient-to-pos":[{to:U()}],"gradient-from":[{from:N()}],"gradient-via":[{via:N()}],"gradient-to":[{to:N()}],rounded:[{rounded:L()}],"rounded-s":[{"rounded-s":L()}],"rounded-e":[{"rounded-e":L()}],"rounded-t":[{"rounded-t":L()}],"rounded-r":[{"rounded-r":L()}],"rounded-b":[{"rounded-b":L()}],"rounded-l":[{"rounded-l":L()}],"rounded-ss":[{"rounded-ss":L()}],"rounded-se":[{"rounded-se":L()}],"rounded-ee":[{"rounded-ee":L()}],"rounded-es":[{"rounded-es":L()}],"rounded-tl":[{"rounded-tl":L()}],"rounded-tr":[{"rounded-tr":L()}],"rounded-br":[{"rounded-br":L()}],"rounded-bl":[{"rounded-bl":L()}],"border-w":[{border:B()}],"border-w-x":[{"border-x":B()}],"border-w-y":[{"border-y":B()}],"border-w-s":[{"border-s":B()}],"border-w-e":[{"border-e":B()}],"border-w-t":[{"border-t":B()}],"border-w-r":[{"border-r":B()}],"border-w-b":[{"border-b":B()}],"border-w-l":[{"border-l":B()}],"divide-x":[{"divide-x":B()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":B()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...V(),"hidden","none"]}],"divide-style":[{divide:[...V(),"hidden","none"]}],"border-color":[{border:N()}],"border-color-x":[{"border-x":N()}],"border-color-y":[{"border-y":N()}],"border-color-s":[{"border-s":N()}],"border-color-e":[{"border-e":N()}],"border-color-t":[{"border-t":N()}],"border-color-r":[{"border-r":N()}],"border-color-b":[{"border-b":N()}],"border-color-l":[{"border-l":N()}],"divide-color":[{divide:N()}],"outline-style":[{outline:[...V(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ur,uv,uf]}],"outline-w":[{outline:["",ur,uw,up]}],"outline-color":[{outline:N()}],shadow:[{shadow:["","none",h,uT,ub]}],"shadow-color":[{shadow:N()}],"inset-shadow":[{"inset-shadow":["none",c,uT,ub]}],"inset-shadow-color":[{"inset-shadow":N()}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:N()}],"ring-offset-w":[{"ring-offset":[ur,up]}],"ring-offset-color":[{"ring-offset":N()}],"inset-ring-w":[{"inset-ring":B()}],"inset-ring-color":[{"inset-ring":N()}],"text-shadow":[{"text-shadow":["none",d,uT,ub]}],"text-shadow-color":[{"text-shadow":N()}],opacity:[{opacity:[ur,uv,uf]}],"mix-blend":[{"mix-blend":[...F(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":F()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ur]}],"mask-image-linear-from-pos":[{"mask-linear-from":z()}],"mask-image-linear-to-pos":[{"mask-linear-to":z()}],"mask-image-linear-from-color":[{"mask-linear-from":N()}],"mask-image-linear-to-color":[{"mask-linear-to":N()}],"mask-image-t-from-pos":[{"mask-t-from":z()}],"mask-image-t-to-pos":[{"mask-t-to":z()}],"mask-image-t-from-color":[{"mask-t-from":N()}],"mask-image-t-to-color":[{"mask-t-to":N()}],"mask-image-r-from-pos":[{"mask-r-from":z()}],"mask-image-r-to-pos":[{"mask-r-to":z()}],"mask-image-r-from-color":[{"mask-r-from":N()}],"mask-image-r-to-color":[{"mask-r-to":N()}],"mask-image-b-from-pos":[{"mask-b-from":z()}],"mask-image-b-to-pos":[{"mask-b-to":z()}],"mask-image-b-from-color":[{"mask-b-from":N()}],"mask-image-b-to-color":[{"mask-b-to":N()}],"mask-image-l-from-pos":[{"mask-l-from":z()}],"mask-image-l-to-pos":[{"mask-l-to":z()}],"mask-image-l-from-color":[{"mask-l-from":N()}],"mask-image-l-to-color":[{"mask-l-to":N()}],"mask-image-x-from-pos":[{"mask-x-from":z()}],"mask-image-x-to-pos":[{"mask-x-to":z()}],"mask-image-x-from-color":[{"mask-x-from":N()}],"mask-image-x-to-color":[{"mask-x-to":N()}],"mask-image-y-from-pos":[{"mask-y-from":z()}],"mask-image-y-to-pos":[{"mask-y-to":z()}],"mask-image-y-from-color":[{"mask-y-from":N()}],"mask-image-y-to-color":[{"mask-y-to":N()}],"mask-image-radial":[{"mask-radial":[uv,uf]}],"mask-image-radial-from-pos":[{"mask-radial-from":z()}],"mask-image-radial-to-pos":[{"mask-radial-to":z()}],"mask-image-radial-from-color":[{"mask-radial-from":N()}],"mask-image-radial-to-color":[{"mask-radial-to":N()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[ur]}],"mask-image-conic-from-pos":[{"mask-conic-from":z()}],"mask-image-conic-to-pos":[{"mask-conic-to":z()}],"mask-image-conic-from-color":[{"mask-conic-from":N()}],"mask-image-conic-to-color":[{"mask-conic-to":N()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:$()}],"mask-repeat":[{mask:M()}],"mask-size":[{mask:D()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",uv,uf]}],filter:[{filter:["","none",uv,uf]}],blur:[{blur:W()}],brightness:[{brightness:[ur,uv,uf]}],contrast:[{contrast:[ur,uv,uf]}],"drop-shadow":[{"drop-shadow":["","none",f,uT,ub]}],"drop-shadow-color":[{"drop-shadow":N()}],grayscale:[{grayscale:["",ur,uv,uf]}],"hue-rotate":[{"hue-rotate":[ur,uv,uf]}],invert:[{invert:["",ur,uv,uf]}],saturate:[{saturate:[ur,uv,uf]}],sepia:[{sepia:["",ur,uv,uf]}],"backdrop-filter":[{"backdrop-filter":["","none",uv,uf]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[ur,uv,uf]}],"backdrop-contrast":[{"backdrop-contrast":[ur,uv,uf]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ur,uv,uf]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ur,uv,uf]}],"backdrop-invert":[{"backdrop-invert":["",ur,uv,uf]}],"backdrop-opacity":[{"backdrop-opacity":[ur,uv,uf]}],"backdrop-saturate":[{"backdrop-saturate":[ur,uv,uf]}],"backdrop-sepia":[{"backdrop-sepia":["",ur,uv,uf]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",uv,uf]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ur,"initial",uv,uf]}],ease:[{ease:["linear","initial",y,uv,uf]}],delay:[{delay:[ur,uv,uf]}],animate:[{animate:["none",b,uv,uf]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,uv,uf]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:q()}],"rotate-x":[{"rotate-x":q()}],"rotate-y":[{"rotate-y":q()}],"rotate-z":[{"rotate-z":q()}],scale:[{scale:K()}],"scale-x":[{"scale-x":K()}],"scale-y":[{"scale-y":K()}],"scale-z":[{"scale-z":K()}],"scale-3d":["scale-3d"],skew:[{skew:G()}],"skew-x":[{"skew-x":G()}],"skew-y":[{"skew-y":G()}],transform:[{transform:[uv,uf,"","none","gpu","cpu"]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:H()}],"translate-x":[{"translate-x":H()}],"translate-y":[{"translate-y":H()}],"translate-z":[{"translate-z":H()}],"translate-none":["translate-none"],accent:[{accent:N()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:N()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",uv,uf]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",uv,uf]}],fill:[{fill:["none",...N()]}],"stroke-w":[{stroke:[ur,uw,up,um]}],stroke:[{stroke:["none",...N()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function uM(...e){return u$(function(){for(var e,t,r=0,s="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,s,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(s=e(t[r]))&&(i&&(i+=" "),i+=s)}else for(s in t)t[s]&&(i&&(i+=" "),i+=s);return i}(e))&&(s&&(s+=" "),s+=t);return s}(e))}let uD=[{text:"If you could describe our connection in one word, what would it be? ",type:"text"},{text:"Which of these romantic settings feels most like 'us'? ",type:"choice",options:["Walking on a moonlit beach ","Cuddling by a warm fireplace ","Dancing under the city lights ","Picnic in a field of flowers "]},{text:"What is the one thing I do that makes you feel most loved? ",type:"text"},{text:"If we were characters in a love story, what kind would it be? ",type:"choice",options:["A passionate fairytale ","A sweet high school romance ","An adventurous duo ","A soulful, eternal bond "]},{text:"What is your wish for us this Valentine's Day? ",type:"text"}];function uU(){let e,t,r,s,i,n,a,o,l,u,h,c,d,f,p,m,g,y,b,v,w,x,_,k,S,T,E,A,C,O,I,N,$,M,D,U=(0,P.c)(103),[L,B]=(0,R.useState)(!1),[V,F]=(0,R.useState)("INTRO"),[z,W]=(0,R.useState)(""),[q,K]=(0,R.useState)(null),[G,H]=(0,R.useState)(0),[J,Y]=(0,R.useState)("");U[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],U[0]=e):e=U[0];let[X,Z]=(0,R.useState)(e),[Q,ee]=(0,R.useState)(0);U[1]===Symbol.for("react.memo_cache_sentinel")?(t={x:0,y:0},U[1]=t):t=U[1];let[et,er]=(0,R.useState)(t);U[2]===Symbol.for("react.memo_cache_sentinel")?(r={},U[2]=r):r=U[2],(0,R.useState)(r);let es=(0,R.useRef)(null),[ei,en]=(0,R.useState)(""),[ea,eo]=(0,R.useState)(""),[el,eu]=(0,R.useState)(""),[eh,ec]=(0,R.useState)(6),[ed,ef]=(0,R.useState)(!1),[ep,em]=(0,R.useState)(""),[eg,ey]=(0,R.useState)(""),[eb,ev]=(0,R.useState)(0),[ew,ex]=(0,R.useState)(""),[e_,ek]=(0,R.useState)(6),[eS,eT]=(0,R.useState)(!1);U[3]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{B(!0)},i=[],U[3]=s,U[4]=i):(s=U[3],i=U[4]),(0,R.useEffect)(s,i),U[5]===Symbol.for("react.memo_cache_sentinel")?(n=async e=>{try{let{data:t}=await lM.from("valentine_responses").insert({name:e,created_at:new Date().toISOString(),answers:[],yes_attempts:0,no_attempts:0,final_response:"PENDING"}).select().single();t&&K(t.id)}catch(e){console.error(e)}},U[5]=n):n=U[5];let eE=n;U[6]!==q?(a=async e=>{if(q)try{await lM.from("valentine_responses").update(e).eq("id",q)}catch(e){}},U[6]=q,U[7]=a):a=U[7];let eA=a;U[8]!==z?(o=()=>{z.trim()&&(eE(z),F("QUESTIONS"))},U[8]=z,U[9]=o):o=U[9];let ej=o,[eP,eR]=(0,R.useState)(""),[eC,eO]=(0,R.useState)("rose");U[10]===Symbol.for("react.memo_cache_sentinel")?(l=["You're such a sweetheart! ","I love how you think! ","That's so fascinating! ","You're amazing! ","Every answer makes me fall more! ","You have the most beautiful soul! ","You're perfection! ","You just melted my heart! ","I could listen to you forever! "],U[10]=l):l=U[10];let[eI,eN]=(0,R.useState)(l);U[11]===Symbol.for("react.memo_cache_sentinel")?(u=["rose","gold","lavender","sky","peach"],U[11]=u):u=U[11];let e$=u;U[12]!==X||U[13]!==J||U[14]!==G||U[15]!==eI||U[16]!==eA?(h=async()=>{if(!J.trim())return;let e=Math.floor(Math.random()*eI.length),t=eI[e];eN(eI.filter((t,r)=>r!==e));let r=e$[Math.floor(Math.random()*e$.length)];eR(t),eO(r),setTimeout(async()=>{let e=[...X,{question:uD[G].text,answer:J}];Z(e),Y(""),eR(""),await eA({answers:e}),G<uD.length-1?H(uH):F("MESSAGE")},2e3)},U[12]=X,U[13]=J,U[14]=G,U[15]=eI,U[16]=eA,U[17]=h):h=U[17];let eM=h,eD=()=>{eA({final_response:"YES"}),F("SUCCESS"),eK()};U[18]!==Q||U[19]!==eA?(c=()=>{ee(uG),eA({no_attempts:Q+1})},U[18]=Q,U[19]=eA,U[20]=c):c=U[20];let eU=c,eL=uW,eB=uz;U[21]!==ei||U[22]!==ea?(d=()=>{if(!ei.trim()||!ea.trim())return;let e=function(e,t){let r=e.toLowerCase().replace(/\s/g,"").split(""),s=t.toLowerCase().replace(/\s/g,"").split("");for(let e=0;e<r.length;e++){let t=r[e],i=s.indexOf(t);-1!==i&&(r[e]="",s[i]="")}r=r.filter(uK),s=s.filter(uq);let i=r.length+s.length;if(0===i)return"Soulmates";let n=["Friends","Love","Affection","Marriage","Enemy","Soulmates"],a=0;for(;n.length>1;)a=(a+i-1)%n.length,n.splice(a,1),a===n.length&&(a=0);return n[0]}(ei,ea),t=eL(ei,ea),r=eB(t);eu(e),ev(t),ex(r),ef(!0),ec(6)},U[21]=ei,U[22]=ea,U[23]=d):d=U[23];let eV=d;U[24]!==eh||U[25]!==ed?(f=()=>{if(ed&&eh>0){let e=setTimeout(()=>{ec(uF)},1e3);return()=>clearTimeout(e)}ed&&0===eh&&F("PROPOSAL")},p=[ed,eh],U[24]=eh,U[25]=ed,U[26]=f,U[27]=p):(f=U[26],p=U[27]),(0,R.useEffect)(f,p),U[28]!==e_||U[29]!==eS?(m=()=>{if(eS&&e_>0){let e=setTimeout(()=>{ek(uV)},1e3);return()=>clearTimeout(e)}eS&&0===e_&&F("PROPOSAL")},g=[eS,e_],U[28]=e_,U[29]=eS,U[30]=m,U[31]=g):(m=U[30],g=U[31]),(0,R.useEffect)(m,g),U[32]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{eu(""),ef(!1),ec(6)},U[32]=y):y=U[32];let eF=y;U[33]!==ep||U[34]!==eg?(b=()=>{if(!ep.trim()||!eg.trim())return;let e=eL(ep,eg),t=eB(e);ev(e),ex(t),eT(!0),ek(6)},U[33]=ep,U[34]=eg,U[35]=b):b=U[35];let ez=b;U[36]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{ev(0),ex(""),eT(!1),ek(6)},U[36]=v):v=U[36];let eW=v;U[37]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{er({x:Math.random()*(window.innerWidth-200)-(window.innerWidth/2-100),y:Math.random()*(window.innerHeight-200)-(window.innerHeight/2-100)})},U[37]=w):w=U[37];let eq=w,eK=uL;if(!L)return null;U[38]===Symbol.for("react.memo_cache_sentinel")?(x={initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},transition:{duration:.4}},U[38]=x):x=U[38];let eG=x,eH=uD[G];return U[39]===Symbol.for("react.memo_cache_sentinel")?(_=(0,j.jsx)(lD,{}),U[39]=_):_=U[39],U[40]===Symbol.for("react.memo_cache_sentinel")?(k=(0,j.jsx)("div",{className:"fixed top-0 left-0 w-32 h-32 md:w-64 md:h-64 pointer-events-none z-0 opacity-80",children:(0,j.jsx)(n3.default,{src:"/flowers_v2.png",alt:"flowers",fill:!0,className:"object-contain -translate-x-10 -translate-y-10 rotate-12"})}),U[40]=k):k=U[40],U[41]===Symbol.for("react.memo_cache_sentinel")?(S=(0,j.jsx)("div",{className:"fixed bottom-0 right-0 w-32 h-32 md:w-64 md:h-64 pointer-events-none z-0 opacity-80",children:(0,j.jsx)(n3.default,{src:"/flowers_v2.png",alt:"flowers",fill:!0,className:"object-contain translate-x-10 translate-y-10 rotate-180"})}),U[41]=S):S=U[41],U[42]!==eq||U[43]!==et||U[44]!==Q||U[45]!==V?(T="PROPOSAL"===V&&Q>0&&(0,j.jsx)(nD.button,{initial:{scale:0},animate:{scale:1,x:et.x,y:et.y},onMouseEnter:eq,onClick:eq,style:{position:"fixed",left:"50%",top:"50%"},transition:{type:"spring",stiffness:300,damping:20},className:"z-[100] bg-gray-400 hover:bg-gray-500 text-white text-xl font-bold py-4 px-10 rounded-full shadow-lg whitespace-nowrap transition-colors",ref:es,children:"Please don't... "}),U[42]=eq,U[43]=et,U[44]=Q,U[45]=V,U[46]=T):T=U[46],U[47]!==ej||U[48]!==z||U[49]!==V?(E="INTRO"===V&&(0,j.jsxs)(nD.div,{...eG,className:"z-10 bg-white/40 backdrop-blur-xl p-8 rounded-3xl shadow-2xl border border-white/50 max-w-md w-full text-center flex flex-col items-center",children:[(0,j.jsx)("div",{className:"flex justify-center mb-6",children:(0,j.jsx)("div",{className:"bg-pink-100 p-4 rounded-full shadow-inner animate-pulse",children:(0,j.jsx)(n1,{className:"w-12 h-12 text-rose-500 fill-rose-500"})})}),(0,j.jsx)("h1",{className:"text-3xl md:text-4xl font-bold italic text-rose-900 mb-2 drop-shadow-sm",children:"Hello beautiful..."}),(0,j.jsx)("p",{className:"text-rose-800 mb-2 font-medium italic",children:"Before we begin, may I know your name?"}),(0,j.jsx)("p",{className:"text-rose-600 text-xs italic mb-6 bg-rose-50/50 p-2 rounded-lg border border-rose-200",children:" We'll use this name throughout the experience (including FLAMES!)"}),(0,j.jsx)("input",{type:"text",value:z,onChange:e=>W(e.target.value),placeholder:"Your name...",className:"w-full bg-white/70 border-2 border-rose-200 rounded-xl px-4 py-3 text-lg text-rose-900 placeholder:text-rose-300 focus:ring-4 focus:ring-rose-200 focus:border-rose-400 focus:outline-none transition-all mb-6 text-center shadow-inner",onKeyDown:e=>"Enter"===e.key&&ej()}),(0,j.jsxs)("button",{onClick:ej,disabled:!z.trim(),className:"w-full bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 active:scale-95 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed group",children:["Begin ",(0,j.jsx)(n2,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]},"intro"),U[47]=ej,U[48]=z,U[49]=V,U[50]=E):E=U[50],U[51]!==J||U[52]!==eC||U[53]!==eP||U[54]!==eH||U[55]!==eM||U[56]!==G||U[57]!==V?(A="QUESTIONS"===V&&eH&&(0,j.jsxs)(nD.div,{...eG,className:"z-10 bg-white/40 backdrop-blur-xl p-8 rounded-3xl shadow-2xl border border-white/50 max-w-lg w-full",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,j.jsxs)("div",{className:"text-xs font-bold uppercase tracking-widest text-rose-500 bg-rose-100 px-3 py-1 rounded-full",children:["Question ",G+1," / ",uD.length]}),(0,j.jsx)(n1,{className:"text-rose-300 fill-rose-100",size:20})]}),(0,j.jsx)("h2",{className:"text-2xl md:text-3xl font-bold italic text-rose-900 mb-8 leading-relaxed",children:eH.text}),"text"===eH.type?(0,j.jsx)("textarea",{value:J,onChange:e=>Y(e.target.value),placeholder:"Type your answer here...",rows:4,className:"w-full bg-white/60 border-2 border-rose-200 rounded-xl px-4 py-3 text-lg text-rose-900 placeholder:text-rose-300 focus:ring-4 focus:ring-rose-200 focus:border-rose-400 focus:outline-none transition-all mb-6 resize-none shadow-inner",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eM())},autoFocus:!0}):(0,j.jsx)("div",{className:"grid grid-cols-1 gap-3 mb-6",children:eH.options?.map(e=>(0,j.jsxs)("button",{onClick:()=>Y(e),className:uM("w-full text-left px-6 py-4 rounded-xl border-2 transition-all font-medium text-lg relative overflow-hidden group",J===e?"bg-gradient-to-r from-rose-100 to-pink-50 border-rose-500 text-rose-900 shadow-md transform scale-[1.02]":"bg-white/60 border-white hover:bg-white/90 hover:border-rose-200 text-rose-800"),children:[(0,j.jsx)("span",{className:"relative z-10",children:e}),J===e&&(0,j.jsx)(nD.div,{layoutId:"highlight",className:"absolute inset-0 bg-rose-100/50 z-0"})]},e))}),(0,j.jsxs)("button",{onClick:eM,disabled:!J.trim(),className:"w-full bg-gradient-to-r from-rose-400 to-pink-500 hover:brightness-110 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg active:scale-95 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next ",(0,j.jsx)(n0,{size:18})]}),(0,j.jsx)(nK,{children:eP&&(0,j.jsxs)(nD.div,{initial:{opacity:0,scale:.8,rotate:-5},animate:{opacity:1,scale:1,rotate:0},exit:{opacity:0,scale:1.1,rotate:5},className:uM("absolute inset-0 backdrop-blur-xl rounded-3xl flex flex-col items-center justify-center p-6 z-50 text-center border-[6px] border-double shadow-[inset_0_0_40px_rgba(255,255,255,0.2)] overflow-hidden transition-colors duration-500","rose"===eC&&"bg-gradient-to-br from-pink-50/95 via-rose-100/95 to-red-50/95 border-rose-300","gold"===eC&&"bg-gradient-to-br from-amber-50/95 via-yellow-100/95 to-orange-50/95 border-amber-300","lavender"===eC&&"bg-gradient-to-br from-purple-50/95 via-violet-100/95 to-pink-50/95 border-purple-300","sky"===eC&&"bg-gradient-to-br from-sky-50/95 via-blue-100/95 to-pink-50/95 border-sky-300","peach"===eC&&"bg-gradient-to-br from-orange-50/95 via-pink-100/95 to-rose-50/95 border-orange-300"),children:[(0,j.jsx)("div",{className:"absolute top-2 left-2 opacity-50 text-rose-300",children:""}),(0,j.jsx)("div",{className:"absolute top-2 right-2 opacity-50 text-rose-300",children:""}),(0,j.jsx)("div",{className:"absolute bottom-2 left-2 opacity-50 text-rose-300",children:""}),(0,j.jsx)("div",{className:"absolute bottom-2 right-2 opacity-50 text-rose-300",children:""}),(0,j.jsxs)(nD.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0],filter:["drop-shadow(0 0 0px rgba(255,105,180,0))","drop-shadow(0 0 20px rgba(255,105,180,0.5))","drop-shadow(0 0 0px rgba(255,105,180,0))"]},transition:{duration:.8,repeat:1/0,repeatDelay:1},className:"relative",children:[(0,j.jsx)(n1,{className:uM("w-24 h-24 mb-6 drop-shadow-xl","rose"===eC&&"text-rose-500 fill-rose-500","gold"===eC&&"text-amber-500 fill-amber-500","lavender"===eC&&"text-purple-400 fill-purple-400","sky"===eC&&"text-sky-500 fill-sky-500","peach"===eC&&"text-orange-400 fill-orange-400")}),(0,j.jsx)(n5,{className:"absolute -top-2 -right-2 text-yellow-400 w-8 h-8 animate-pulse"})]}),(0,j.jsx)("h2",{className:uM("text-4xl font-black italic text-transparent bg-clip-text drop-shadow-sm leading-tight px-4","rose"===eC&&"bg-gradient-to-br from-rose-600 via-pink-600 to-rose-500","gold"===eC&&"bg-gradient-to-br from-amber-600 via-orange-500 to-yellow-600","lavender"===eC&&"bg-gradient-to-br from-purple-600 via-violet-500 to-pink-600","sky"===eC&&"bg-gradient-to-br from-sky-600 via-blue-500 to-indigo-500","peach"===eC&&"bg-gradient-to-br from-orange-600 via-pink-500 to-rose-600"),children:eP})]})})]},`q-${G}`),U[51]=J,U[52]=eC,U[53]=eP,U[54]=eH,U[55]=eM,U[56]=G,U[57]=V,U[58]=A):A=U[58],U[59]!==z||U[60]!==V?(C="MESSAGE"===V&&(0,j.jsxs)(nD.div,{...eG,className:"z-10 bg-white/60 backdrop-blur-xl p-8 rounded-3xl shadow-2xl border border-white/50 max-w-xl w-full text-center relative overflow-hidden",children:[(0,j.jsx)(n5,{className:"absolute top-4 right-4 text-yellow-500 animate-spin-slow w-8 h-8"}),(0,j.jsx)(n5,{className:"absolute bottom-4 left-4 text-pink-400 animate-pulse w-6 h-6"}),(0,j.jsxs)("h2",{className:"text-3xl font-bold italic text-rose-800 mb-6 drop-shadow-sm",children:["A Message for ",z,"..."]}),(0,j.jsxs)("div",{className:"prose prose-rose max-w-none mb-8 text-rose-900 italic text-xl leading-relaxed",children:[(0,j.jsxs)("p",{children:["Dearest ",z,","]}),(0,j.jsx)("p",{children:"From the moment I met you, the world has seemed a little brighter. Your smile is my favorite sunrise, and your laughter is a melody I could listen to forever. "}),(0,j.jsx)("p",{children:"Every answer you gave just now made me adore you even more. I cherish every moment we share, and I dream of creating countless more loving memories with you. "}),(0,j.jsx)("p",{className:"font-semibold text-2xl mt-4",children:"You are truly magical. "})]}),(0,j.jsx)("button",{onClick:()=>{en(z),F("FLAMES")},className:"w-full bg-gradient-to-r from-orange-500 via-pink-500 to-rose-500 hover:from-orange-600 hover:via-pink-600 hover:to-rose-600 text-white font-extrabold py-4 px-8 rounded-full transition-all shadow-lg hover:shadow-xl active:scale-95 text-lg",children:"Let's Play! "})]},"message"),U[59]=z,U[60]=V,U[61]=C):C=U[61],U[62]!==eh||U[63]!==ei||U[64]!==ea||U[65]!==el||U[66]!==eV||U[67]!==eF||U[68]!==ew||U[69]!==eb||U[70]!==ed||U[71]!==V?(O="FLAMES"===V&&(0,j.jsxs)(nD.div,{...eG,className:"z-10 bg-white/60 backdrop-blur-xl p-6 md:p-8 rounded-3xl shadow-2xl border border-white/50 w-full max-w-[95vw] md:max-w-lg text-center relative overflow-hidden my-4",children:[(0,j.jsxs)("div",{className:"mb-6",children:[(0,j.jsx)("h2",{className:"text-4xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-orange-500 via-pink-500 to-rose-500 mb-2 drop-shadow-sm",children:"Love Games "}),(0,j.jsx)("p",{className:"text-rose-700 italic text-lg",children:"Let's see what destiny says about you two!"})]}),el?(0,j.jsxs)(nD.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"py-2 md:py-4",children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-4 md:mb-6",children:[(0,j.jsxs)(nD.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"bg-gradient-to-br from-orange-50 to-red-50 p-4 md:p-6 rounded-2xl border-2 border-orange-200 shadow-lg",children:[(0,j.jsxs)("div",{className:"mb-3 md:mb-4",children:[(0,j.jsx)("div",{className:"text-xs md:text-sm font-bold text-orange-600 uppercase tracking-wider mb-2",children:"FLAMES Result"}),(0,j.jsx)(n1,{className:"w-12 h-12 md:w-16 md:h-16 mx-auto text-rose-500 fill-rose-500 animate-pulse"})]}),(0,j.jsxs)("h3",{className:"text-3xl md:text-4xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-600 mb-2",children:[el,"!"]}),(0,j.jsx)("p",{className:"text-rose-600 text-xs md:text-sm italic",children:" Destiny says..."})]}),(0,j.jsxs)(nD.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4},className:"bg-gradient-to-br from-pink-50 to-rose-50 p-4 md:p-6 rounded-2xl border-2 border-pink-200 shadow-lg",children:[(0,j.jsxs)("div",{className:"mb-3 md:mb-4",children:[(0,j.jsx)("div",{className:"text-xs md:text-sm font-bold text-pink-600 uppercase tracking-wider mb-2",children:"Love Match"}),(0,j.jsxs)("div",{className:"relative w-28 h-28 md:w-32 md:h-32 mx-auto",children:[(0,j.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,j.jsx)("circle",{cx:"56",cy:"56",r:"50",stroke:"#fce7f3",strokeWidth:"8",fill:"none",className:"md:hidden"}),(0,j.jsx)("circle",{cx:"64",cy:"64",r:"58",stroke:"#fce7f3",strokeWidth:"8",fill:"none",className:"hidden md:block"}),(0,j.jsx)(nD.circle,{cx:"56",cy:"56",r:"50",stroke:"url(#gradient-small)",strokeWidth:"8",fill:"none",strokeLinecap:"round",initial:{strokeDasharray:"0 314"},animate:{strokeDasharray:`${eb/100*314} 314`},transition:{duration:1.5,ease:"easeOut",delay:.5},className:"md:hidden"}),(0,j.jsx)(nD.circle,{cx:"64",cy:"64",r:"58",stroke:"url(#gradient-small)",strokeWidth:"8",fill:"none",strokeLinecap:"round",initial:{strokeDasharray:"0 364"},animate:{strokeDasharray:`${eb/100*364} 364`},transition:{duration:1.5,ease:"easeOut",delay:.5},className:"hidden md:block"}),(0,j.jsx)("defs",{children:(0,j.jsxs)("linearGradient",{id:"gradient-small",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,j.jsx)("stop",{offset:"0%",stopColor:"#ec4899"}),(0,j.jsx)("stop",{offset:"100%",stopColor:"#f43f5e"})]})})]}),(0,j.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,j.jsx)(nD.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},className:"text-center",children:(0,j.jsxs)("div",{className:"text-2xl md:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-br from-pink-600 to-rose-600",children:[eb,"%"]})})})]})]}),(0,j.jsx)("p",{className:"text-pink-600 text-xs md:text-sm italic",children:" Compatibility Score"})]})]}),(0,j.jsxs)(nD.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1},className:"mb-4 md:mb-6 bg-white/70 backdrop-blur-sm p-4 md:p-6 rounded-2xl border-2 border-rose-200 shadow-lg",children:[(0,j.jsx)("h4",{className:"text-lg md:text-2xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-rose-600 to-pink-600 mb-2 md:mb-3 leading-tight",children:ew}),(0,j.jsxs)("p",{className:"text-rose-700 italic text-base md:text-lg font-medium",children:[ei,"  ",ea]})]}),ed&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"mb-4 md:mb-6 bg-rose-50/70 backdrop-blur-sm p-3 md:p-4 rounded-xl border-2 border-rose-200",children:[(0,j.jsxs)("p",{className:"text-rose-600 text-base md:text-lg font-bold mb-1 md:mb-2",children:["Redirecting in ",eh," second",1!==eh?"s":"","..."]}),(0,j.jsx)("p",{className:"text-rose-500 text-xs md:text-sm italic",children:"Want to try different names?"})]}),(0,j.jsx)("button",{onClick:eF,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 md:py-4 px-6 rounded-xl transition-all shadow-lg active:scale-95 flex items-center justify-center gap-2 text-base md:text-lg",children:" Try Again"})]})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"text-rose-600 text-sm italic mb-4 bg-rose-50/50 p-3 rounded-lg border border-rose-200",children:" Tip: We've added your name, but you can edit both names if you'd like!"}),(0,j.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,j.jsx)("input",{type:"text",value:ei,onChange:e=>en(e.target.value),placeholder:"Your name...",className:"w-full bg-white/70 border-2 border-rose-200 rounded-xl px-4 py-3 text-lg text-rose-900 placeholder:text-rose-300 focus:ring-4 focus:ring-rose-200 focus:border-rose-400 focus:outline-none transition-all text-center shadow-inner"}),(0,j.jsx)("input",{type:"text",value:ea,onChange:e=>eo(e.target.value),placeholder:"Their name...",className:"w-full bg-white/70 border-2 border-rose-200 rounded-xl px-4 py-3 text-lg text-rose-900 placeholder:text-rose-300 focus:ring-4 focus:ring-rose-200 focus:border-rose-400 focus:outline-none transition-all text-center shadow-inner",onKeyDown:e=>"Enter"===e.key&&eV()})]}),(0,j.jsx)("button",{onClick:eV,disabled:!ei.trim()||!ea.trim(),className:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:"Calculate FLAMES "})]})]},"flames"),U[62]=eh,U[63]=ei,U[64]=ea,U[65]=el,U[66]=eV,U[67]=eF,U[68]=ew,U[69]=eb,U[70]=ed,U[71]=V,U[72]=O):O=U[72],U[73]!==ez||U[74]!==eW||U[75]!==e_||U[76]!==ew||U[77]!==ep||U[78]!==eg||U[79]!==eb||U[80]!==eS||U[81]!==V?(I="LOVE_CALCULATOR"===V&&(0,j.jsxs)(nD.div,{...eG,className:"z-10 bg-white/60 backdrop-blur-xl p-8 rounded-3xl shadow-2xl border border-white/50 max-w-lg w-full text-center relative overflow-hidden",children:[(0,j.jsxs)("div",{className:"mb-6",children:[(0,j.jsx)("h2",{className:"text-4xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-rose-500 to-red-500 mb-2 drop-shadow-sm",children:"Love Calculator "}),(0,j.jsx)("p",{className:"text-rose-700 italic text-lg",children:"Discover your love compatibility!"})]}),0===eb?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"text-rose-600 text-sm italic mb-4 bg-rose-50/50 p-3 rounded-lg border border-rose-200",children:" Tip: We've added your name, but you can edit both names if you'd like!"}),(0,j.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,j.jsx)("input",{type:"text",value:ep,onChange:e=>em(e.target.value),placeholder:"Your name...",className:"w-full bg-white/70 border-2 border-rose-200 rounded-xl px-4 py-3 text-lg text-rose-900 placeholder:text-rose-300 focus:ring-4 focus:ring-rose-200 focus:border-rose-400 focus:outline-none transition-all text-center shadow-inner"}),(0,j.jsx)("div",{className:"flex justify-center",children:(0,j.jsx)(n1,{className:"w-8 h-8 text-rose-400 fill-rose-400 animate-pulse"})}),(0,j.jsx)("input",{type:"text",value:eg,onChange:e=>ey(e.target.value),placeholder:"Their name...",className:"w-full bg-white/70 border-2 border-rose-200 rounded-xl px-4 py-3 text-lg text-rose-900 placeholder:text-rose-300 focus:ring-4 focus:ring-rose-200 focus:border-rose-400 focus:outline-none transition-all text-center shadow-inner",onKeyDown:e=>"Enter"===e.key&&ez()})]}),(0,j.jsx)("button",{onClick:ez,disabled:!ep.trim()||!eg.trim(),className:"w-full bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:"Calculate Love "})]}):(0,j.jsxs)(nD.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"py-8",children:[(0,j.jsxs)("div",{className:"relative w-48 h-48 mx-auto mb-6",children:[(0,j.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,j.jsx)("circle",{cx:"96",cy:"96",r:"88",stroke:"#fce7f3",strokeWidth:"12",fill:"none"}),(0,j.jsx)(nD.circle,{cx:"96",cy:"96",r:"88",stroke:"url(#gradient)",strokeWidth:"12",fill:"none",strokeLinecap:"round",initial:{strokeDasharray:"0 552"},animate:{strokeDasharray:`${eb/100*552} 552`},transition:{duration:1.5,ease:"easeOut"}}),(0,j.jsx)("defs",{children:(0,j.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,j.jsx)("stop",{offset:"0%",stopColor:"#ec4899"}),(0,j.jsx)("stop",{offset:"100%",stopColor:"#f43f5e"})]})})]}),(0,j.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,j.jsxs)(nD.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},className:"text-center",children:[(0,j.jsxs)("div",{className:"text-6xl font-black text-transparent bg-clip-text bg-gradient-to-br from-pink-600 to-rose-600",children:[eb,"%"]}),(0,j.jsx)(n1,{className:"w-8 h-8 mx-auto text-rose-500 fill-rose-500 animate-pulse mt-2"})]})})]}),(0,j.jsx)("h3",{className:"text-3xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-rose-600 to-pink-600 mb-4",children:ew}),(0,j.jsxs)("p",{className:"text-rose-700 italic text-lg mb-6",children:[ep,"  ",eg]}),eS&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"mb-6 bg-rose-50/70 backdrop-blur-sm p-4 rounded-xl border-2 border-rose-200",children:[(0,j.jsxs)("p",{className:"text-rose-600 text-lg font-bold mb-2",children:["Redirecting in ",e_," second",1!==e_?"s":"","..."]}),(0,j.jsx)("p",{className:"text-rose-500 text-sm italic",children:"Want to try different names?"})]}),(0,j.jsx)("button",{onClick:eW,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg active:scale-95 flex items-center justify-center gap-2",children:" Try Again"})]})]})]},"love-calculator"),U[73]=ez,U[74]=eW,U[75]=e_,U[76]=ew,U[77]=ep,U[78]=eg,U[79]=eb,U[80]=eS,U[81]=V,U[82]=I):I=U[82],U[83]!==eU||U[84]!==eD||U[85]!==z||U[86]!==Q||U[87]!==V?(N="PROPOSAL"===V&&(0,j.jsxs)(nD.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"z-10 text-center flex flex-col items-center relative w-full",children:[(0,j.jsx)("div",{className:"mb-6 relative w-48 h-48 md:w-64 md:h-64 animate-float",children:(0,j.jsx)(n3.default,{src:Q>0?"/crying-teddy_final.png":"/intro-bear.png",alt:"Cute Bear",fill:!0,className:"object-contain drop-shadow-2xl transition-all duration-300",priority:!0})}),(0,j.jsx)("h1",{className:"text-5xl md:text-7xl font-black italic text-transparent bg-clip-text bg-gradient-to-br from-rose-600 via-red-500 to-pink-600 mb-8 drop-shadow-sm leading-tight p-2",children:0===Q?(0,j.jsxs)(j.Fragment,{children:[z,", will you be my",(0,j.jsx)("br",{}),"Valentine? "]}):"My heart beats only for you... "}),(0,j.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center gap-8 mt-4 h-40 relative w-full",children:[(0,j.jsx)("button",{onClick:eD,className:"bg-gradient-to-b from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 text-white text-3xl font-black py-6 px-16 rounded-full shadow-2xl hover:shadow-[0_0_40px_rgba(74,222,128,0.6)] hover:scale-110 active:scale-95 transition-all z-20 border-4 border-white/20 whitespace-nowrap",children:"YES! "}),0===Q&&(0,j.jsx)("button",{onClick:eU,className:"bg-gray-400 hover:bg-gray-500 text-white text-xl font-bold py-4 px-10 rounded-full shadow-lg whitespace-nowrap transition-colors",children:"NO "})]}),Q>0&&(0,j.jsxs)(nD.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-12 p-6 bg-white/70 backdrop-blur-md rounded-2xl border border-rose-200 shadow-xl max-w-md",children:[(0,j.jsx)("p",{className:"text-xl font-bold italic text-rose-800 mb-2",children:Q<=2?"Every moment with you is magic... ":Q<=5?"You are my favorite person! ":"I can't imagine a world without you! "}),(0,j.jsx)("p",{className:"text-rose-600 text-sm italic",children:"(The 'No' button is just playing hard to get, like you! )"})]})]},"proposal"),U[83]=eU,U[84]=eD,U[85]=z,U[86]=Q,U[87]=V,U[88]=N):N=U[88],U[89]!==z||U[90]!==V?($="SUCCESS"===V&&(0,j.jsxs)(nD.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"z-10 text-center p-10 bg-white/60 backdrop-blur-2xl rounded-[3rem] shadow-2xl max-w-3xl border-4 border-white/50 flex flex-col items-center",children:[(0,j.jsx)("div",{className:"mb-8 relative w-64 h-64",children:(0,j.jsx)(n3.default,{src:"/celebration.png",alt:"Celebration",fill:!0,className:"object-contain drop-shadow-2xl"})}),(0,j.jsx)("h1",{className:"text-6xl font-black italic text-rose-600 mb-6 drop-shadow-sm tracking-tight",children:"YAAAY!!! "}),(0,j.jsxs)("p",{className:"text-3xl text-rose-900 mb-10 font-medium italic leading-relaxed",children:["You just made me the happiest person in the world, ",(0,j.jsx)("span",{className:"font-bold underline decoration-wavy decoration-rose-400",children:z}),"!",(0,j.jsx)("br",{}),"Get ready for the best Valentine's Day ever! "]}),(0,j.jsxs)("div",{className:"flex justify-center gap-6 mb-6",children:[(0,j.jsx)(n1,{className:"w-20 h-20 text-pink-500 fill-pink-500 animate-bounce drop-shadow-lg"}),(0,j.jsx)(n1,{className:"w-20 h-20 text-rose-500 fill-rose-500 animate-bounce delay-100 drop-shadow-lg"}),(0,j.jsx)(n1,{className:"w-20 h-20 text-red-500 fill-red-500 animate-bounce delay-200 drop-shadow-lg"})]}),(0,j.jsx)("p",{className:"text-4xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-rose-600 to-pink-600 drop-shadow-sm",children:"Love you "})]},"success"),U[89]=z,U[90]=V,U[91]=$):$=U[91],U[92]!==E||U[93]!==A||U[94]!==C||U[95]!==O||U[96]!==I||U[97]!==N||U[98]!==$?(M=(0,j.jsxs)(nK,{mode:"wait",children:[E,A,C,O,I,N,$]}),U[92]=E,U[93]=A,U[94]=C,U[95]=O,U[96]=I,U[97]=N,U[98]=$,U[99]=M):M=U[99],U[100]!==T||U[101]!==M?(D=(0,j.jsxs)("div",{className:"relative min-h-screen flex flex-col items-center justify-center p-4 md:p-6 font-romantic select-none overflow-x-hidden overflow-y-auto",children:[_,k,S,T,M]}),U[100]=T,U[101]=M,U[102]=D):D=U[102],D}function uL(){let e=Date.now()+5e3,t={startVelocity:30,spread:360,ticks:60,zIndex:0},r=uB,s=setInterval(function(){let i=e-Date.now();if(i<=0)return clearInterval(s);let n=i/5e3*50;nH({...t,particleCount:n,origin:{x:r(.1,.3),y:Math.random()-.2}}),nH({...t,particleCount:n,origin:{x:r(.7,.9),y:Math.random()-.2}})},250)}function uB(e,t){return Math.random()*(t-e)+e}function uV(e){return e-1}function uF(e){return e-1}function uz(e){return e>=95?"Perfect Match! You two are meant to be together! ":e>=90?"Soulmates! Your love is written in the stars! ":e>=85?"Amazing Connection! True love is in the air! ":e>=80?"Strong Bond! Your hearts beat as one! ":e>=75?"Beautiful Chemistry! Love is blooming! ":e>=70?"Great Match! Your love story is just beginning! ":e>=65?"Sweet Connection! Romance is in the air! ":e>=60?"Lovely Pair! Your bond is growing stronger! ":e>=55?"Good Compatibility! Love is on the horizon! ":"Promising Start! Every love story has a beginning! "}function uW(e,t){let r=(e+t).toLowerCase().replace(/\s/g,""),s=0;for(let e=0;e<r.length;e++)s=(s<<5)-s+r.charCodeAt(e),s&=s;return 50+Math.abs(s)%50}function uq(e){return""!==e}function uK(e){return""!==e}function uG(e){return e+1}function uH(e){return e+1}e.s(["default",()=>uU],59175)}]);